(window.webpackJsonpunifiNetworkUi=window.webpackJsonpunifiNetworkUi||[]).push([[75],{1829:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(31),i=a(8),l=a(28),o=a(64),s=a(2),u=a(5),d=a(4),E=a(170),O=a(13),m=a(97),b=a(1945),_=a(464),N=a(1982),p=a(2151),S=a(2214),T=a(45),A=a(1753),g=a(1754),j=a(1924),h=a(1755),f=a(54),I=a(1954);var D=()=>{const{values:e}=Object(T.e)();return c.a.createElement(A.a,null,c.a.createElement(g.a,null,c.a.createElement(j.a,{alignWith:"input",htmlFor:"name",label:c.a.createElement(d.c,{id:"SETTINGS_COMMON_NAME"})}),c.a.createElement(h.a,{column:!0},c.a.createElement(f.Field,{full:!0,name:"name"}))),c.a.createElement(g.a,null,c.a.createElement(j.a,{alignWith:"input",htmlFor:"vlan",label:c.a.createElement(d.c,{id:"SETTINGS_NETWORKS_LABEL_VLAN"})}),c.a.createElement(h.a,{column:!0},c.a.createElement(f.Field,{name:"vlan",type:"number"}))),c.a.createElement(g.a,null,c.a.createElement(j.a,{alignWith:"toggleSmall",htmlFor:"igmp_snooping",label:c.a.createElement(d.c,{id:"SETTINGS_ADVANCED_FEATURES_NETWORK_ISOLATION_IGMP_SNOOPING_LABEL"}),description:c.a.createElement(d.c,{id:"SETTINGS_ADVANCED_FEATURES_NETWORK_ISOLATION_IGMP_SNOOPING_LABEL_DESCRIPTION"})}),c.a.createElement(h.a,null,c.a.createElement(f.Field,{name:"igmp_snooping",type:"checkbox"}))),c.a.createElement(g.a,null,c.a.createElement(j.a,{alignWith:"toggleSmall",htmlFor:"dhcpguard_enabled",label:c.a.createElement(d.c,{id:"SETTINGS_ADVANCED_FEATURES_NETWORK_ISOLATION_DHCP_GUARDING_LABEL"}),description:c.a.createElement(d.c,{id:"SETTINGS_ADVANCED_FEATURES_NETWORK_ISOLATION_DHCP_GUARDING_LABEL_DESCRIPTION"})}),c.a.createElement(h.a,null,c.a.createElement(f.Field,{name:"dhcpguard_enabled",type:"checkbox"}))),c.a.createElement(I.a,{in:e.dhcpguard_enabled},[1,2,3].map(e=>c.a.createElement(g.a,{key:"dhcpd-ip-"+e},c.a.createElement(j.a,{alignWith:"input",htmlFor:"dhcpd_ip_"+e,label:c.a.createElement(d.c,{id:"SETTINGS_ADVANCED_FEATURES_NETWORK_ISOLATION_TRUSTED_DHCP_SERVER_LABEL",values:{number:e}})}),c.a.createElement(h.a,{column:!0},c.a.createElement(f.Field,{name:"dhcpd_ip_"+e}))))))};const C=Object(u.c)(b.b)`
  width: 100%;
`;var v=e=>{const{initialValues:t,onBack:a}=e,r=Object(i.useSelector)(O.u),o=Object(i.useSelector)(m.k),s=Object(i.useSelector)(l.selectVlansInUse),u=Object(n.useMemo)(()=>s.filter(e=>e!==+t.vlan),[s,t.vlan]),b=Object(i.useDispatch)(),T=Object(n.useMemo)(()=>t._id?{component:t.name,message:"network-isolation-edit-view"}:{component:c.a.createElement(d.c,{id:"SETTINGS_ADVANCED_FEATURES_NETWORK_ISOLATION_ADD"}),message:"network-isolation-create"},[t._id,t.name]),A=Object(n.useCallback)(Object(N.c)(e)(async(e,{setValues:t})=>{const a=Object(p.a)(e),n=a._id?l.updateNetwork:l.createNetwork;return b(n(a,{},l.saveToastsWithErr))}),[b,t]),g=Object(n.useMemo)(()=>Object(S.a)(u,o),[u,o]),j=Object(n.useCallback)(()=>{b(Object(_.b)({name:t.name,onConfirm:async()=>{await b(Object(l.deleteNetwork)(t._id,{name:t.name})),a()}}))},[t._id,t.name,a]);return c.a.createElement(C,{goBack:a,initialValues:t,isEdit:!!t._id,isView:r,showBack:!0,title:T,validationSchema:g,onEscClicked:a,onSubmit:A,enableReinitialize:!1,footerActiveOverride:!!(null==t?void 0:t._id),customFooterButtons:e=>(null==t?void 0:t._id)&&c.a.createElement(E.a,{disabled:e,type:"button",variant:"default",onClick:j},c.a.createElement(d.c,{id:"COMMON_ACTION_REMOVE"}))},c.a.createElement(D,null))};t.default=()=>{const{networkId:e}=Object(r.m)(),t=Object(i.useSelector)(l.selectVlanOnlyNetworks).find(t=>t._id===e),a=Object(o.g)();return Object(o.e)([Object(l.fetchNetworks)(void 0,{crudCacheStrategy:{type:s.a.CACHE}})],c.a.createElement(v,{initialValues:t||Object(l.networkInitialValues)(l.NetworkPurpose.VLAN_ONLY),onBack:a}))}},1946:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return r})),a.d(t,"m",(function(){return E})),a.d(t,"k",(function(){return O})),a.d(t,"h",(function(){return m})),a.d(t,"g",(function(){return b})),a.d(t,"j",(function(){return _})),a.d(t,"f",(function(){return N})),a.d(t,"i",(function(){return p})),a.d(t,"l",(function(){return S})),a.d(t,"d",(function(){return A})),a.d(t,"e",(function(){return g})),a.d(t,"n",(function(){return h})),a.d(t,"o",(function(){return f})),a.d(t,"c",(function(){return I})),a.d(t,"p",(function(){return C})),a.d(t,"q",(function(){return v}));var n=a(112);const c=e=>(t,a,c,r)=>Object(n.d)(e(c,t),e(r,a)),r=e=>t=>{const a=(e=>t=>e.formatMessage({id:t}))(e);return(e,n,c,r)=>{const[i,l]=[t(e,c),t(n,r)].map(a);return i.localeCompare(l)}};var i=a(16),l=a(133),o=a(6),s=a(138),u=a(76);const d={ugw:1,usw:2,uap:3},E=(e,t,a,c)=>{const r=o.DEVICE_STATE_IMPORTANCE[Object(o.getDeviceState)(a)],i=o.DEVICE_STATE_IMPORTANCE[Object(o.getDeviceState)(c)];if(r===i){if(a.adopted===c.adopted){if(a.type!==c.type)return((e,t)=>{const a=e.type,c=t.type;return a===c?Object(n.d)(Object(u.a)(e),Object(u.a)(t)):Object(n.d)(d[a],d[c])})(a,c);const e=a.originalName,t=c.originalName;return e&&t?Object(n.d)(e,t):e?-1:t?1:Object(n.d)(a.modelName,c.modelName)}return Object(n.d)(a.adopted?1:2,c.adopted?1:2)}return Object(n.d)(r,i)},O=(e,t,a,c)=>Object(n.d)(Object(u.a)(a),Object(u.a)(c)),m=(e,t,a,c)=>{const r=Object(s.d)(Object(o.getDeviceIp)(a))||0,i=Object(s.d)(Object(o.getDeviceIp)(c))||0;return Object(n.d)(r,i)},b=(e,t,a,c)=>{const{averageSatisfaction:r}=a.satisfactionByRadio,{averageSatisfaction:i}=c.satisfactionByRadio;let l=Object(o.getDeviceExperience)(a),s=Object(o.getDeviceExperience)(c);return a.type===o.DeviceType.AP&&r<0&&(l=-.5),c.type===o.DeviceType.AP&&i<0&&(s=-.5),Object(n.d)(l,s)},_=(e,t,a,c)=>{const r=Object(o.getDeviceMemoryUsage)(a)||0,i=Object(o.getDeviceMemoryUsage)(c)||0;return Object(n.d)(r,i)},N=(e,t,a,c)=>{const r=parseFloat(Object(i.a)(a,"system-stats.cpu",0)),l=parseFloat(Object(i.a)(c,"system-stats.cpu",0));return Object(n.d)(r,l)},p=(e,t,a,c)=>{const r=parseFloat(Object(i.a)(a,"sys_stats.loadavg_1",-1)),l=parseFloat(Object(i.a)(c,"sys_stats.loadavg_1",-1));return Object(n.d)(r,l)},S=(e,t,a)=>{const c=Object(o.getRadioByType)(e,a),r=Object(o.getRadioByType)(t,a),i=c?Object(o.getRadioStatsByName)(e,c.name):null,l=r?Object(o.getRadioStatsByName)(t,r.name):null;if(c&&r&&i&&l){let a,s;const u=(e,t)=>e&&t?Object(n.d)(e,t):(e?-1:t&&1)||0;return a=("auto"===c.channel?0:c.channel)||0,s=("auto"===r.channel?0:r.channel)||0,u(a,s)?u(a,s):(a=Object(o.getRadioStatsBindedChannel)(e,i)||c.channel||0,s=Object(o.getRadioStatsBindedChannel)(t,l)||r.channel||0,u(a,s)?u(a,s):(a=parseInt(Object(o.getRadioHt)(c),10),s=parseInt(Object(o.getRadioHt)(r),10),u(a,s)?u(a,s):(a=Object(o.getRadioStatsPrimaryChannel)(i)||c.channel||0,s=Object(o.getRadioStatsPrimaryChannel)(l)||c.channel||0,u(a,s)?u(a,s):(a=Object(o.getRadioStatsTransmitPower)(i),s=Object(o.getRadioStatsTransmitPower)(l),u(a,s)?u(a,s):0))))}if(c&&r){if(i)return 1;if(l)return-1}return c?1:r?-1:0},T=(e,t)=>{if(!e.radio_table_stats)return-1;return Object(o.getRadioStatsByType)(e,t).reduce((e,t)=>e+t.num_sta||0,0)},A=(e,t,a,c)=>{const r=T(a,l.b.NG),i=T(c,l.b.NG);return Object(n.d)(r,i)},g=(e,t,a,c)=>{const r=T(a,l.b.NA),i=T(c,l.b.NA);return Object(n.d)(r,i)},j=(e,t)=>{const a=Object(o.getRadioStatsByType)(e,t);return a.length?a.reduce((e,t)=>e+(t.ast_be_xmit||0)+(t.tx_packets||0),0):-1},h=(e,t,a,c)=>{const r=j(a,l.b.NG),i=j(c,l.b.NG);return Object(n.d)(r,i)},f=(e,t,a,c)=>{const r=j(a,l.b.NA),i=j(c,l.b.NA);return Object(n.d)(r,i)},I=(e,t,a,c)=>{const r=Object(o.getChannelValue)(a),i=Object(o.getChannelValue)(c);return Object(n.d)(r,i)},D=(e,t)=>Object(o.getRadioStatsByType)(e,t).reduce((e,t)=>e+t.cu_total||0,0),C=(e,t,a,c)=>{const r=D(a,l.b.NG),i=D(c,l.b.NG);return Object(n.d)(r,i)},v=(e,t,a,c)=>{const r=D(a,l.b.NA),i=D(c,l.b.NA);return Object(n.d)(r,i)}},1948:function(e,t,a){"use strict";var n=a(0),c=a.n(n),r=a(5),i=a(4),l=a(1949),o=a.n(l),s=a(1759),u=a(538),d=a(539);const E=Object(r.c)("span")`
  line-height: 1.5;
  margin-top: ${({theme:e})=>e.spacing["spacing-xxxxl"]};
`;t.a=({when:e,ignoredPaths:t=null,onLeave:a=null,onStay:r=null})=>{const l=Object(n.useMemo)(()=>({overlay:{"--modal-z-index":2e3}}),[]),O=Object(d.a)(t),m=Object(n.useCallback)((e,t)=>t.pathname!==e.pathname,[]),b=Object(n.useCallback)(e=>(e={},t={})=>O(e,t)&&m(e,t),[O,m]);return!!e&&c.a.createElement(o.a,{when:b(t)},({onCancel:e,onConfirm:t})=>c.a.createElement(s.a,{actions:[{type:"button",text:c.a.createElement(i.c,{id:"SETTINGS_MODAL_UNSAVED_CHANGES_STAY"}),onClick:()=>r?r(e):e()},{type:"button",text:c.a.createElement(i.c,{id:"SETTINGS_MODAL_UNSAVED_CHANGES_LEAVE"}),onClick:()=>a?a(t):t(),variant:"primary"}],isOpen:!0,size:"small",style:l,parentSelector:u.b,title:c.a.createElement(i.c,{id:"SETTINGS_MODAL_UNSAVED_CHANGES_TITLE"}),onRequestClose:()=>r?r(e):e()},c.a.createElement(E,null,c.a.createElement(i.c,{id:"SETTINGS_MODAL_UNSAVED_CHANGES_CONTENT"}))))}},1982:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return o}));var n=a(18),c=function(e,t){var a=t.successMessage,n=t.failureMessage;if((a||n)&&!e.createToast)throw new Error("formSubmit util requires createToast action as a prop. Please add it to mapDispatchToProps")},r=function(e){return function(t){return function(a){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(i,l){var o=l.props||t;c(o,r);var s=o.createToast,u="function"==typeof r?r(i):r,d=u.msgValues,E=u.successMessage,O=u.failureMessage;a(i,o,l).then((function(){return E&&s({icon:n.a.success,message:E,values:d}),e(l,t)})).catch((function(e){O&&s({icon:n.a.danger,message:O,values:d,errorMessage:e.msg,errorValues:e}),l.setSubmitting(!1)}))}}}},i=r((function(e){return e.setStatus({isSubmitted:!0})}))(),l=r((function(e){return e.setStatus({isSubmitted:!0})})),o=(r((function(e){return e.props.onClose()}))(),r((function(e,t){return t.onBack()})))},2214:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return E}));var n=a(0),c=a.n(n),r=a(4),i=a(98),l=a(1946),o=a(30);const s=[{compare:Object(l.a)(({name:e})=>e),id:"network-isolation-table-name",label:c.a.createElement(r.c,{id:"SETTINGS_COMMON_NAME"}),renderCell:({name:e})=>e,sortable:!0,minWidth:100,maxWidth:150},{compare:Object(l.a)(({vlan:e})=>e),label:c.a.createElement(r.c,{id:"SETTINGS_NETWORKS_LABEL_VLAN"}),id:"network-isolation-table-vlan-id",renderCell:({vlan:e})=>e,sortable:!0,minWidth:100,maxWidth:200},{compare:Object(l.a)(({igmp_snooping:e})=>e),label:c.a.createElement(r.c,{id:"SETTINGS_ADVANCED_FEATURES_NETWORK_ISOLATION_IGMP_SNOOPING_HEADER"}),id:"network-isolation-table-igmp-snooping",renderCell:({igmp_snooping:e})=>c.a.createElement(r.c,{id:e?"COMMON_ENABLED":"COMMON_DISABLED"}),sortable:!0,minWidth:130,maxWidth:200},{compare:Object(l.a)(({dhcpguard_enabled:e})=>e),label:c.a.createElement(r.c,{id:"SETTINGS_ADVANCED_FEATURES_NETWORK_ISOLATION_DHCP_GUARDING_LABEL"}),id:"network-isolation-table-dhcp-guarding",renderCell:({dhcpguard_enabled:e})=>c.a.createElement(r.c,{id:e?"COMMON_ENABLED":"COMMON_DISABLED"}),sortable:!0,minWidth:130}],u=(e,t)=>Object(o.f)(t).clone().notOneOf(e,({value:e})=>c.a.createElement(r.c,{id:"SETTINGS_NETWORKS_VLAN_IN_USE",values:{vlan:e}})).required(),d=(e,t=!1)=>{const a=o.a.string().matches(i.h,c.a.createElement(r.c,{id:"COMMON_VALIDATION_VALID_IPV4"}));return o.a.string().when("dhcpguard_enabled",{is:!0,then:t?a.required(c.a.createElement(r.c,{id:"COMMON_VALIDATION_EMPTY",values:{name:c.a.createElement(r.c,{id:"SETTINGS_ADVANCED_FEATURES_NETWORK_ISOLATION_TRUSTED_DHCP_SERVER_LABEL",values:{number:e}})}})):a})},E=(e,t)=>o.a.object().shape({dhcpguard_enabled:o.a.boolean(),igmp_snooping:o.a.boolean(),name:o.e,vlan:u(e,t),dhcpd_ip_1:d(1,!0),dhcpd_ip_2:d(2),dhcpd_ip_3:d(3)})}}]);