(window.webpackJsonpunifiNetworkUi=window.webpackJsonpunifiNetworkUi||[]).push([[76],{1825:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),E=a(394),_=a(171),c=a(42),r=a(64),i=a(2),S=a(4),m=a(8),A=a(31),s=a(13),u=a(97),d=a(1945),T=a(21),o=a(75),R=a(18),b=a(45),N=a(1753),D=a(1754),I=a(1755),O=a(54);var p=()=>{const{values:e}=Object(b.e)();return l.a.createElement(N.a,null,l.a.createElement(D.a,null,l.a.createElement(o.SearchableGridLabel,{alignWith:"toggleSmall",htmlFor:"enabled",label:l.a.createElement(S.c,{id:"SETTINGS_ADVANCED_RADIUS_SERVER_FORM_LABEL_RADIUS_SERVER"}),description:l.a.createElement(S.c,{id:"SETTINGS_ADVANCED_RADIUS_SERVER_FORM_DESCRIPTION_RADIUS_SERVER"})}),l.a.createElement(I.a,null,l.a.createElement(O.Field,{name:"enabled",type:"checkbox"}))),l.a.createElement(D.a,{disabled:!e.enabled},l.a.createElement(o.SearchableGridLabel,{alignWith:"input",htmlFor:"x_secret",label:l.a.createElement(S.c,{id:"SETTINGS_ADVANCED_RADIUS_SERVER_FORM_LABEL_RADIUS_SECRET"}),description:l.a.createElement(S.c,{id:"SETTINGS_GATEWAY_RADIUS_DESCRIPTION_SECRET"}),searchText:"SETTINGS_ADVANCED_RADIUS_SERVER_FORM_LABEL_RADIUS_SECRET_SEARCH_TEXT"}),l.a.createElement(I.a,{column:!0},l.a.createElement(O.Field,{name:"x_secret",full:!0,type:"password",passwordToggle:!0,disabled:!e.enabled}))))};var C=()=>{const{values:e}=Object(b.e)();return l.a.createElement(N.a,{padding:"none"},l.a.createElement(D.a,{disabled:!e.enabled},l.a.createElement(o.SearchableGridLabel,{alignWith:"input",htmlFor:"auth_port",label:l.a.createElement(S.c,{id:"SETTINGS_ADVANCED_RADIUS_SERVER_FORM_LABEL_AUTHENTICATION_PORT"}),description:l.a.createElement(S.c,{id:"SETTINGS_ADVANCED_RADIUS_SERVER_FORM_DESCRIPTIONS_AUTHENTICATION_PORT"}),searchText:"SETTINGS_ADVANCED_RADIUS_SERVER_FORM_LABEL_AUTHENTICATION_PORT_SEARCH_TEXT"}),l.a.createElement(I.a,{column:!0},l.a.createElement(O.Field,{name:"auth_port",full:!0,type:"number",disabled:!e.enabled}))),l.a.createElement(D.a,{disabled:!e.enabled},l.a.createElement(o.SearchableGridLabel,{alignWith:"input",htmlFor:"acct_port",label:l.a.createElement(S.c,{id:"SETTINGS_ADVANCED_RADIUS_SERVER_FORM_LABEL_ACCOUNTING_PORT"}),description:l.a.createElement(S.c,{id:"SETTINGS_ADVANCED_RADIUS_SERVER_FORM_DESCRIPTIONS_ACCOUNTING_PORT"}),searchText:"SETTINGS_ADVANCED_RADIUS_SERVER_FORM_LABEL_ACCOUNTING_PORT_SEARCH_TEXT"}),l.a.createElement(I.a,{column:!0},l.a.createElement(O.Field,{name:"acct_port",full:!0,type:"number",disabled:!e.enabled}))),l.a.createElement(D.a,{disabled:!e.enabled},l.a.createElement(o.SearchableGridLabel,{alignWith:"input",htmlFor:"interim_update_interval",label:l.a.createElement(S.c,{id:"SETTINGS_ADVANCED_RADIUS_SERVER_FORM_LABEL_ACCOUNTING_INTERIM_INTERVAL"}),description:l.a.createElement(S.c,{id:"SETTINGS_ADVANCED_RADIUS_SERVER_FORM_DESCRIPTIONS_ACCOUNTING_INTERIM_INTERVAL"}),searchText:"SETTINGS_ADVANCED_RADIUS_SERVER_FORM_LABEL_ACCOUNTING_INTERIM_INTERVAL_SEARCH_TEXT"}),l.a.createElement(I.a,{column:!0},l.a.createElement(O.Field,{name:"interim_update_interval",full:!0,type:"number",disabled:!e.enabled}))),l.a.createElement(D.a,{disabled:!e.enabled},l.a.createElement(o.SearchableGridLabel,{alignWith:"toggleSmall",htmlFor:"tunneled_reply",label:l.a.createElement(S.c,{id:"SETTINGS_ADVANCED_RADIUS_SERVER_FORM_LABEL_TUNNELED_REPLY"}),description:l.a.createElement(S.c,{id:"SETTINGS_ADVANCED_RADIUS_SERVER_FORM_DESCRIPTIONS_TUNNELED_REPLY"}),searchText:"SETTINGS_ADVANCED_RADIUS_SERVER_FORM_LABEL_TUNNELED_REPLY_SEARCH_TEXT"}),l.a.createElement(I.a,null,l.a.createElement(O.Field,{name:"tunneled_reply",type:"checkbox",disabled:!e.enabled}))))},L=a(5),U=a(660),h=a(1972),V=a(23),M=a(95),g=a(2215);const G=Object(L.c)(U.a)`
  margin-top: 35px;
  margin-right: auto !important;
`,y=Object(L.c)(V.ub)`
  color: ${({theme:e})=>e.motifPalette.ui06};
`,j=Object(L.c)(M.c)`
  margin-left: ${({theme:e})=>e.spacing["spacing-s"]};
`;var v=()=>{const e=Object(A.k)(),t=Object(r.h)("advanced/radius/form/user"),a=Object(n.useCallback)(e=>`${t}/${e}`,[t]),_=Object(m.useSelector)(E.selectAccounts);return l.a.createElement(l.a.Fragment,null,l.a.createElement(h.a,{columns:g.b,idField:"_id",items:_,disableColumnFilters:!0,disableSelection:!0,disableTextPointer:!0,onRowClick:({_id:t})=>e.push(a(t))}),l.a.createElement(G,{variant:"comfy"},l.a.createElement(y,null),l.a.createElement(j,{legacy:!1,name:"new-radius-user",variant:"link",type:"button",onClick:()=>e.push(t)},l.a.createElement(S.c,{id:"SETTINGS_ADVANCED_RADIUS_SERVER_FORM_SECTION_BUTTON_ADD_RADIUS_USER"}))))},F=a(2254),f=a(2216),B=a(2169);var x=()=>{const{user:e}=Object(A.m)(),t=Object(n.useMemo)(()=>!!e,[e]),a=Object(m.useDispatch)(),E=Object(m.useSelector)(s.u),i=Object(m.useSelector)(_.selectDefaultRadiusProfile),b=Object(m.useSelector)(u.e),N=Object(m.useSelector)(c.selectRadiusSettings),D=Object(A.k)(),I=Object(r.g)(),O=Object(n.useMemo)(()=>({isSubmitted:!1}),[]),L=Object(r.h)("advanced/radius/form"),U=Object(n.useCallback)(()=>{D.push(L)},[L,D]),h=Object(n.useMemo)(()=>({component:l.a.createElement(S.c,{id:"SETTINGS_ADVANCED_RADIUS_SERVER_PAGE_TITLE",values:{name:Object(B.b)(i,b)}}),message:"radius-server"}),[i,b]),V=Object(n.useMemo)(()=>[{id:"radius-settings",label:l.a.createElement(S.c,{id:"SETTINGS_ADVANCED_RADIUS_SERVER_FORM_SECTION_LABEL_RADIUS_SETTINGS"}),renderContent:()=>l.a.createElement(C,null)},{id:"radius-users",label:l.a.createElement(S.c,{id:"SETTINGS_ADVANCED_RADIUS_SERVER_FORM_SECTION_LABEL_RADIUS_USERS"}),renderContent:()=>l.a.createElement(v,null),openByDefault:t}],[t]),M=Object(n.useCallback)((e,{setSubmitting:t})=>{const n={...e,key:"radius"};n.enabled||delete n.x_secret,a(Object(c.saveSettings)(n)).then(()=>a(Object(T.c)({icon:R.a.success,message:"SETTINGS_ADVANCED_RADIUS_SERVER_FORM_TOAST_SAVE_SUCCESS"}))).catch(e=>{a(Object(T.c)({errorMessage:e.msg,errorValues:e,icon:R.a.danger,message:"SETTINGS_ADVANCED_RADIUS_SERVER_FORM_TOAST_SAVE_FAILURE"})),t(!1)})},[a]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.b,{goBack:I,initialStatus:O,initialValues:N,isEdit:!0,isView:E,showBack:!0,title:h,validationSchema:f.b,onEscClicked:I,hideClose:!0,onSubmit:M,unsavedChangesModalIgnoredPaths:/\/radius\/form\/user(\/[\w_-]*\/?)?$/},l.a.createElement(p,null),l.a.createElement(o.SearchableAccordion,{items:V,multiOpen:!0,variant:"primary"})),t&&l.a.createElement(F.a,{onClose:U}))};t.default=()=>Object(r.e)([Object(_.fetchRadiusProfiles)(void 0,{crudCacheStrategy:{type:i.a.CACHE}}),Object(E.fetchAccounts)(void 0,{crudCacheStrategy:{type:i.a.CACHE}}),Object(c.fetchSettings)({type:i.a.CACHE})],l.a.createElement(x,null))},1948:function(e,t,a){"use strict";var n=a(0),l=a.n(n),E=a(5),_=a(4),c=a(1949),r=a.n(c),i=a(1759),S=a(538),m=a(539);const A=Object(E.c)("span")`
  line-height: 1.5;
  margin-top: ${({theme:e})=>e.spacing["spacing-xxxxl"]};
`;t.a=({when:e,ignoredPaths:t=null,onLeave:a=null,onStay:E=null})=>{const c=Object(n.useMemo)(()=>({overlay:{"--modal-z-index":2e3}}),[]),s=Object(m.a)(t),u=Object(n.useCallback)((e,t)=>t.pathname!==e.pathname,[]),d=Object(n.useCallback)(e=>(e={},t={})=>s(e,t)&&u(e,t),[s,u]);return!!e&&l.a.createElement(r.a,{when:d(t)},({onCancel:e,onConfirm:t})=>l.a.createElement(i.a,{actions:[{type:"button",text:l.a.createElement(_.c,{id:"SETTINGS_MODAL_UNSAVED_CHANGES_STAY"}),onClick:()=>E?E(e):e()},{type:"button",text:l.a.createElement(_.c,{id:"SETTINGS_MODAL_UNSAVED_CHANGES_LEAVE"}),onClick:()=>a?a(t):t(),variant:"primary"}],isOpen:!0,size:"small",style:c,parentSelector:S.b,title:l.a.createElement(_.c,{id:"SETTINGS_MODAL_UNSAVED_CHANGES_TITLE"}),onRequestClose:()=>E?E(e):e()},l.a.createElement(A,null,l.a.createElement(_.c,{id:"SETTINGS_MODAL_UNSAVED_CHANGES_CONTENT"}))))}},2169:function(e,t,a){"use strict";a.d(t,"b",(function(){return m})),a.d(t,"a",(function(){return A}));var n=a(0),l=a.n(n),E=a(5),_=a(24);const c=Object(E.c)(_.a)`
  margin: ${({theme:e})=>e.space[3]}px 0;
`,r=Object(E.c)("div")`
  margin: ${({theme:e})=>e.space[2]}px 0;
`,i=e=>l.a.createElement(r,{key:`${e.ip}${e.port}`},e.ip," : ",e.port),S=({children:e})=>l.a.createElement(c,{flexDirection:"column"},e),m=({auth_servers:e,attr_no_delete:t},a)=>t?l.a.createElement("span",null,a):e&&e.length>0?l.a.createElement(S,null,e.map(i)):"-",A=({accounting_enabled:e,acct_servers:t,attr_no_delete:a})=>{if(a)return"-";return t&&t.length>0&&e?l.a.createElement(S,null,t.map(i)):"-"}},2215:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return i}));var n=a(0),l=a.n(n),E=a(4),_=a(394),c=a(2169);const r=e=>[{id:"name",label:l.a.createElement(E.c,{id:"SETTINGS_ADVANCED_RADIUS_TABLE_LABEL_NAME"}),sortable:!0,renderCell:({name:e})=>e,minWidth:100,maxWidth:150},{id:"auth_servers",label:l.a.createElement(E.c,{id:"SETTINGS_ADVANCED_RADIUS_TABLE_LABEL_AUTH_SERVERS"}),renderCell:t=>Object(c.b)(t,e),minWidth:170,maxWidth:200},{id:"acct_servers",label:l.a.createElement(E.c,{id:"SETTINGS_ADVANCED_RADIUS_TABLE_LABEL_ACCT_SERVERS"}),renderCell:e=>Object(c.a)(e),minWidth:170}],i=[{id:"name",label:l.a.createElement(E.c,{id:"SETTINGS_ADVANCED_RADIUS_TABLE_LABEL_NAME"}),sortable:!0,renderCell:({name:e})=>e},{id:"vlan",label:l.a.createElement(E.c,{id:"SETTINGS_ADVANCED_RADIUS_USERS_TABLE_LABEL_VLAN"}),sortable:!0,renderCell:({vlan:e})=>e},{id:"tunnel_type",label:l.a.createElement(E.c,{id:"SETTINGS_ADVANCED_RADIUS_USERS_TABLE_LABEL_TUNNEL_TYPE"}),sortable:!0,renderCell:({tunnel_type:e})=>{const t=_.tunnelTypeOptions[e||0];return l.a.createElement(E.c,{id:t.label,values:t.values})}},{id:"tunnel_medium_type",label:l.a.createElement(E.c,{id:"SETTINGS_ADVANCED_RADIUS_USERS_TABLE_LABEL_TUNNEL_MEDIUM_TYPE"}),sortable:!0,renderCell:({tunnel_medium_type:e})=>{const t=_.tunnelMediumTypeOptions[e||0];return l.a.createElement(E.c,{id:t.label,values:t.values})}}]},2254:function(e,t,a){"use strict";var n=a(0),l=a.n(n),E=a(5),_=a(52),c=a(4),r=a(8),i=a(31),S=a(45),m=a(1154),A=a(23),s=a(49),u=a(660),d=a(170),T=a(394),o=a(97),R=a(98),b=a(464),N=a(95),D=a(54),I=a(64),O=a(30);const p=(e,t)=>e.map(e=>({value:e.value,label:t.formatMessage({id:e.label},{id:e.values?e.values.id:void 0})})),C=e=>{if(e)return{...e,tunnel_type:""!==e.tunnel_type?e.tunnel_type:0,tunnel_medium_type:""!==e.tunnel_medium_type?e.tunnel_medium_type:0}},L=Object(E.c)(s.a)`
  width: 100%;
  text-align: center;
`,U=Object(E.c)(D.Field,{shouldForwardProp:e=>"hasHelperMessage"!==e})`
  margin-top: 28px;
  ${({hasHelperMessage:e})=>e&&"margin-bottom: 40px;"}
`,h=Object(E.c)(u.a)`
  margin: 14px auto 10px 0;
  display: flex;
  justify-content: flex-end;
`,V=Object(E.c)("div")`
  margin-right: auto;
`,M=Object(E.c)("div")`
  margin: 60px 0 30px;
`,g=Object(m.a)(e=>O.a.object().shape({name:O.a.string().label("SETTINGS_RADIUS_USERS_CREATE_USER_FORM_NAME_LABEL").required().matches(R.x,l.a.createElement(c.c,{id:"SETTINGS_RADIUS_USERS_NAME_VALIDATION_MESSAGE"})),x_password:O.a.string().label("SETTINGS_RADIUS_USERS_CREATE_USER_FORM_PASSWORD_LABEL").required().min(4),vlan:Object(O.f)(e),tunnel_type:O.a.number().when("tunnel_medium_type",{is:e=>e!==T.NONE_VALUE,then:O.a.number().label("SETTINGS_RADIUS_USERS_TUNNEL_TYPE_LABEL").min(1).required()}),tunnel_medium_type:O.a.number().when("tunnel_type",{is:e=>e!==T.NONE_VALUE,then:O.a.number().label("SETTINGS_RADIUS_USERS_TUNNEL_MEDIUM_TYPE_LABEL").min(1).required()})},["tunnel_type","tunnel_medium_type"]));var G=Object(c.f)(({intl:e,simpleForm:t=!1,onClose:a})=>{const{userId:E}=Object(i.m)(),_=Object(r.useDispatch)(),m=Object(r.useSelector)(T.selectAccountById)(E),s=Object(r.useSelector)(o.k),u=Object(I.h)("advanced/radius/form"),R=p(T.tunnelTypeOptions,e),D=p(T.tunnelMediumTypeOptions,e),O=Object(n.useMemo)(()=>({name:"",x_password:"",vlan:"",tunnel_type:0,tunnel_medium_type:0,...C(m)}),[m]),G=g(s),y=Object(n.useCallback)((e,{setSubmitting:t})=>{const n={...e,tunnel_type:0!==e.tunnel_type?e.tunnel_type:"",tunnel_medium_type:0!==e.tunnel_medium_type?e.tunnel_medium_type:""};m?_(Object(T.updateAccount)(m._id,n)).then(()=>a()).catch(()=>t(!1)):_(Object(T.saveAccount)(n)).then(()=>a()).catch(()=>t(!1))},[a,_,m]),j=Object(n.useCallback)(e=>{e.preventDefault(),a()},[a]),v=Object(n.useCallback)(()=>{_(Object(b.b)({name:O.name,onConfirm:()=>_(Object(T.removeAccount)(O._id,O.name)).then(a())}))},[_,O._id,O.name]);return l.a.createElement(S.c,{initialValues:O,onSubmit:y,validationSchema:G},({handleSubmit:a})=>l.a.createElement("form",{autoComplete:"off",onSubmit:a},l.a.createElement(L,{size:"body"},l.a.createElement(c.c,{id:m?"SETTINGS_ADVANCED_RADIUS_USERS_FROM_TITLE_EDIT":"SETTINGS_ADVANCED_RADIUS_USERS_FROM_TITLE_ADD"})),l.a.createElement(U,{label:"SETTINGS_ADVANCED_RADIUS_USERS_FROM_LABEL_NAME",name:"name",type:"input",full:!0}),l.a.createElement(U,{hasHelperMessage:!0,label:"SETTINGS_ADVANCED_RADIUS_USERS_FROM_LABEL_PASSWORD",name:"x_password",type:"password",passwordToggle:!0,full:!0,helperMessage:l.a.createElement(c.c,{id:"SETTINGS_ADVANCED_RADIUS_USERS_FROM_LABEL_PASSWORD_DESCRIPTION"})}),!t&&l.a.createElement(l.a.Fragment,null,l.a.createElement(U,{label:"SETTINGS_ADVANCED_RADIUS_USERS_FROM_LABEL_VLAN",name:"vlan",type:"input",full:!0}),l.a.createElement(U,{label:e.formatMessage({id:"SETTINGS_ADVANCED_RADIUS_USERS_FROM_LABEL_TUNNEL_TYPE"}),type:"dropdown",name:"tunnel_type",options:R,full:!0,validated:!0}),l.a.createElement(U,{label:e.formatMessage({id:"SETTINGS_ADVANCED_RADIUS_USERS_FROM_LABEL_TUNNEL_MEDIUM_TYPE"}),type:"dropdown",name:"tunnel_medium_type",options:D,full:!0,validated:!0})),t&&l.a.createElement(M,null,l.a.createElement(d.a,{variant:"inline",href:"/network"+u,target:"_blank"},l.a.createElement(N.g,{alignItems:"center"},l.a.createElement(A.hb,null),l.a.createElement(c.c,{id:"SETTINGS_ADVANCED_RADIUS_USERS_FROM_LABEL_LINK_RADIUS_FORM"})))),l.a.createElement(h,null,!t&&O._id&&l.a.createElement(V,null,l.a.createElement(d.a,{type:"button",variant:"default",onClick:v},l.a.createElement(c.c,{id:"COMMON_ACTION_REMOVE"}))),l.a.createElement(d.a,{type:"button",variant:"default",onClick:j},l.a.createElement(c.c,{id:"COMMON_ACTION_CANCEL"})),l.a.createElement(d.a,{type:"submit",variant:"primary"},l.a.createElement(c.c,{id:m?"COMMON_ACTION_APPLY_CHANGES":"SETTINGS_ADVANCED_RADIUS_USERS_FROM_LABEL_BUTTON_CREATE_USER"})))))});const y=Object(E.c)(_.a)`
  overflow: visible;
  padding: 24px 45px;
`;t.a=({simpleForm:e,onClose:t})=>l.a.createElement(y,{size:"small",onRequestClose:t},l.a.createElement(G,{simpleForm:e,onClose:t}))}}]);