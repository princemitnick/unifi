(window.webpackJsonpunifiNetworkUi=window.webpackJsonpunifiNetworkUi||[]).push([[66],{1804:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),c=a(31),r=a(8),_=a(2),i=a(28),E=a(6),o=a(189),s=a(42),d=a(332),m=a(540),p=a(64),S=a(5),T=a(4),u=a(16),O=a(170),N=a(148),b=a(574),I=a(394),R=a(804),h=a(171),D=a(13),F=a(395),A=a(832),g=a(97),P=a(1945),L=a(21),C=a(1982),f=a(18),M=a(2030),v=a(2151),G=a(2254),W=a(464),j=a(45),y=a(52),V=a(1837),w=a(1753),x=a(1972),U=a(668),K=a(1754),k=a(1755),H=a(24),B=a(54),$=Object.prototype.hasOwnProperty;var Y=function(e,t){return null!=e&&$.call(e,t)},z=a(1131);var X,q,Z,J=function(e,t){return null!=e&&Object(z.a)(e,t,Y)},Q=a(30),ee=a(98),te=a(1946);!function(e){e.VIEW="view",e.ASSIGN_VALUE="assignValue"}(X||(X={})),function(e){e.PREDEFINED="predefined",e.ADD_NEW="addNew"}(q||(q={})),function(e){e.ADD_NEW="addNew",e.PREDEFINED_FIRST="predefinedFirst",e.PREDEFINED_SECOND="predefinedSecond"}(Z||(Z={}));const ae=e=>`${R.DHCP_USER_OPTION_PREFIX}${e._id}`,le=(e={},t=!1)=>{var a;const l=t?"max":"min",n=null!==(a=e.width)&&void 0!==a?a:8;return(e.signed?R.DHCP_CODE.SIGNED_EXTENTS:R.DHCP_CODE.UNSIGNED_EXTENTS)[n][l]},ne=e=>{switch(e.type){case R.DHCP_OPTIONS.BOOLEAN:return Q.a.boolean();case R.DHCP_OPTIONS.HEX_ARRAY:return Q.a.string().label("SETTINGS_GATEWAY_DHCP_TYPE_OPTION_HEX_ARRAY").matches(ee.e,n.a.createElement(T.c,{id:"SETTINGS_NETWORK_DHCP_OPTION_HEX_ARRAY_VALIDATION"})).required();case R.DHCP_OPTIONS.MAC_ADDRESS:return Q.a.string().label("SETTINGS_GATEWAY_DHCP_TYPE_OPTION_MAC_ADDRESS").matches(ee.p,n.a.createElement(T.c,{id:"COMMON_VALIDATION_VALID_MAC"})).required();case R.DHCP_OPTIONS.IP_ADDRESS:return Q.b.required(n.a.createElement(T.c,{id:"COMMON_VALIDATION_FIELD_REQUIRED"}));case R.DHCP_OPTIONS.TEXT:return Q.a.string().label("SETTINGS_GATEWAY_DHCP_TYPE_OPTION_TEXT").required();case R.DHCP_OPTIONS.INTEGER:return Q.a.number().label("SETTINGS_GATEWAY_DHCP_TYPE_OPTION_INTEGER").min(le(e)).max(le(e,!0)).required();default:return Q.a.string()}},ce=Object(S.c)(B.Field)`
  height: 36px;
  + div > span {
    // hide error text as there is no space for it in table
    display: none !important;
  }
`,re=Object(S.c)("span")`
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
`,_e=e=>{const t=(e=>{const{signed:t,type:a,width:l}=e;switch(a){case R.DhcpOptionTypes.BOOLEAN:return{type:"checkbox"};case R.DhcpOptionTypes.HEX_ARRAY:return{label:"SETTINGS_GATEWAY_DHCP_TYPE_OPTION_HEX_ARRAY"};case R.DhcpOptionTypes.INTEGER:return{label:t?"SETTINGS_NETWORK_DHCP_OPTION_SIGNED_INTEGER_LABEL":"SETTINGS_NETWORK_DHCP_OPTION_UNSIGNED_INTEGER_LABEL",labelValues:{value:l},type:"number"};case R.DhcpOptionTypes.IP_ADDRESS:return{label:"SETTINGS_GATEWAY_DHCP_TYPE_OPTION_IPADDRESS"};case R.DhcpOptionTypes.MAC_ADDRESS:return{label:"SETTINGS_GATEWAY_DHCP_TYPE_OPTION_MAC_ADDRESS"};case R.DhcpOptionTypes.TEXT:return{label:"SETTINGS_GATEWAY_DHCP_TYPE_OPTION_TEXT"};default:return{}}})(e);return"checkbox"!==t.type?{...t,full:!0}:t},ie=(e,t,a)=>{const l=[{compare:Object(te.a)(({name:e})=>e.toLowerCase()),id:"dhcp-option-name",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORK_DHCP_OPTION_TABLE_HEADER_NAME"}),renderCell:({name:e})=>n.a.createElement(re,null,e),sortable:!0},{compare:Object(te.a)(({code:e})=>e),id:"dhcp-option-code",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORK_DHCP_OPTION_TABLE_HEADER_CODE"}),renderCell:({code:e})=>n.a.createElement(re,null,e),sortable:!0,minWidth:40,maxWidth:60},{compare:Object(te.a)(({signed:t,type:a,width:l})=>Object(R.getDhcpOptionTypeDisplayText)(e,t,a,l)),id:"dhcp-option-type",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORK_DHCP_OPTION_TABLE_HEADER_TYPE"}),renderCell:({signed:t,type:a,width:l})=>n.a.createElement(re,null,Object(R.getDhcpOptionTypeDisplayText)(e,t,a,l))}];return t===X.ASSIGN_VALUE&&l.push({id:"dhcp-option-value",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORK_DHCP_OPTION_TABLE_HEADER_VALUE"}),renderCell:e=>n.a.createElement(ce,Object.assign({name:"networkDhcpOptions."+ae(e)},_e(e)))}),t===X.VIEW&&l.push({id:"dhcp-option-value",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORK_DHCP_OPTION_TABLE_HEADER_VALUE"}),renderCell:t=>n.a.createElement(re,null,((e,t)=>"boolean"==typeof e?e?t.formatMessage({id:"COMMON_TRUE"}):t.formatMessage({id:"COMMON_FALSE"}):e)(a[ae(t)],e))}),l},Ee=(e,t)=>e.filter(e=>J(t,ae(e))),oe=Object(S.c)(H.a)`
  > span {
    color: ${({theme:e})=>e.motifPalette.text02};
    margin-bottom: ${({theme:e})=>e.spacing["spacing-m"]};
  }
`,se=Object(S.c)(H.a)`
  span {
    color: ${({theme:e})=>e.motifPalette.text02};
    margin-bottom: ${({theme:e})=>e.spacing["spacing-l"]};
  }
`,de=Object(S.c)(H.a)`
  > * {
    margin-right: ${({theme:e})=>e.spacing["spacing-s"]};
    &:last-child {
      margin-right: ${({theme:e})=>e.spacing["spacing-xl"]};
    }
  }
`,me=Object(S.c)(U.a)`
  font-size: ${({theme:e})=>e.fontSize["font-size-xxs"]} !important;
  color: ${({theme:e})=>e.motifPalette.ui05} !important;
  margin-bottom: 5px;
`;var pe=()=>{const{setFieldValue:e,values:{dhcpOption:t}}=Object(j.e)(),a=_e(t);return n.a.createElement(n.a.Fragment,null,n.a.createElement(K.a,null,n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{name:"dhcpOption.name",placeholder:"SETTINGS_GATEWAY_DHCP_PLACEHOLDER_DHCP_NAME",label:"SETTINGS_INTERNET_GENERAL_ADV_GW_DHCP_OPTIONS_NAME",full:!0}))),n.a.createElement(K.a,null,n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{type:"dropdown",name:"dhcpOption.type",options:R.typeOptions,translateOptions:!0,translateLabel:!0,label:"SETTINGS_INTERNET_GENERAL_ADV_GW_DHCP_OPTIONS_TYPE",onChange:t=>{e("dhcpOption.type",t.value),e("dhcpOption.value",void 0)},full:!0}))),n.a.createElement(K.a,null,n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{name:"dhcpOption.code",label:"SETTINGS_INTERNET_GENERAL_ADV_GW_DHCP_OPTIONS_CODE",type:"number",full:!0}))),t.type===R.DHCP_OPTIONS.INTEGER&&n.a.createElement(K.a,null,n.a.createElement(H.a,{width:"100%"},n.a.createElement(oe,{flexDirection:"column"},n.a.createElement(T.c,{id:"SETTINGS_GATEWAY_DHCP_CREATE_OPTION_LABEL_INTEGER_TYPE"}),n.a.createElement(de,null,R.integerOptions.map(({value:e})=>n.a.createElement(B.Field,{key:e,value:e,type:"togglebox",toggleboxType:"radio",name:"dhcpOption.width",inModal:!0},e)))),n.a.createElement(se,{flexDirection:"column"},n.a.createElement(T.c,{id:"SETTINGS_INTERNET_GENERAL_ADV_GW_DHCP_OPTIONS_SIGNED"}),n.a.createElement(B.Field,{name:"dhcpOption.signed",type:"checkbox"})))),n.a.createElement(K.a,null,n.a.createElement(k.a,{column:!0},t.type===R.DhcpOptionTypes.BOOLEAN&&n.a.createElement(me,null,n.a.createElement(T.c,{id:"SETTINGS_NETWORK_DHCP_OPTION_TABLE_HEADER_VALUE"})),n.a.createElement(B.Field,Object.assign({name:"dhcpOption.value"},a)))))},Se=a(1760),Te=a(1801),ue=a(1139),Oe=a(619),Ne=a(243),be=a(120);var Ie=function(e,t,a){return e=Object(be.a)(e),a=null==a?0:Object(ue.a)(Object(Ne.a)(a),0,e.length),t=Object(Oe.a)(t),e.slice(a,a+t.length)==t},Re=a(88);const he=(e,t,a)=>{var l;const n=new Set([...e,...R.DHCP_CODE.DISALLOWED_CODES]),c=null!==(l=Object(Se.a)(224,R.DHCP_CODE.MAX).find(e=>!n.has(e)))&&void 0!==l?l:Object(Se.a)(R.DHCP_CODE.MIN,224).find(e=>!n.has(e)),r=Object(Te.a)(t,(e,t)=>Ie(t,R.DHCP_USER_OPTION_PREFIX)),_=a.reduce((e,t)=>{const a=ae(t);return e[a]=r[a]||t.type!==R.DhcpOptionTypes.BOOLEAN&&void 0,e},{});return{dhcpOption:{name:"",code:c,type:R.DhcpOptionTypes.TEXT,width:8,signed:!1,value:void 0},networkDhcpOptions:{..._}}};function De(e){const t=e.reduce((e,t)=>(e[ae(t)]=ne(t),e),{});return Re.a.object().shape({networkDhcpOptions:Re.a.object().shape({...t})})}const Fe=[{id:q.PREDEFINED,label:n.a.createElement(T.c,{id:"SETTINGS_DHCP_OPTIONS_MODAL_TAB_PREDEFINED"})},{id:q.ADD_NEW,label:n.a.createElement(T.c,{id:"SETTINGS_DHCP_OPTIONS_MODAL_TAB_ADD_NEW"})}],Ae=Object(S.c)(V.a)`
  > div {
    width: 100%;
    border-bottom: 1px solid ${({theme:e})=>e.motifPalette.ui07};
  }

  button {
    margin-right: 16px;
    span {
      font-size: ${({theme:e})=>e.fontSize["font-size-m"]} !important;
      ::before {
        display: none;
      }
      ::after {
        bottom: -1px;
      }
    }
  }
`,ge=Object(S.c)("div")`
  margin-top: 20px;
`,Pe=Object(S.c)(w.a,{shouldForwardProp:e=>"isLarge"!==e})`
  max-width: ${({isLarge:e})=>e?"304px":"initial"};
  margin-right: auto;
  margin-left: auto;
  margin-top: ${({isLarge:e})=>e?"20px":"0"};
`,Le=Object(S.c)("div")`
  tr {
    background: transparent !important;
    border-bottom: 1px solid ${({theme:e})=>e.motifPalette.ui07};
  }
`,Ce=Object(S.c)("div")`
  tr {
    background: transparent !important;
  }
  th {
    border-bottom: 1px solid ${({theme:e})=>e.motifPalette.ui07};
  }
  td {
    padding-right: 0px !important;
    padding-bottom: 0px !important;
    &:not(:last-child) {
      border-bottom: 1px solid ${({theme:e})=>e.motifPalette.ui07};
      > div {
        height: 35px;
      }
    }
  }
`;var fe=Object(T.f)(({intl:e,activeStep:t,selectedTab:a,onSelectTab:c,onChangeDhcpOptionSelection:_})=>{const{resetForm:i}=Object(j.e)(),E=Object(r.useSelector)(R.selectDhcpOptionsData);Object(l.useEffect)(()=>{i()},[i,t.id]);const o=!!E.length;return n.a.createElement(n.a.Fragment,null,o&&n.a.createElement(Ae,{tabs:Fe,selectedTab:a,onSelectTab:c,variant:"secondary"}),a===q.PREDEFINED&&n.a.createElement(ge,null,t.id===Z.PREDEFINED_FIRST&&n.a.createElement(Le,null,n.a.createElement(x.a,{columns:ie(e),items:t.tableItems,idField:"_id",rowHeight:30,multiSelectMode:!0,initialSelectedIds:t.initialSelectedIds,onChangeSelection:_,disableColumnFilters:!0})),t.id===Z.PREDEFINED_SECOND&&n.a.createElement(Ce,null,n.a.createElement(x.a,{columns:ie(e,X.ASSIGN_VALUE),items:t.tableItems,idField:"_id",rowHeight:50,disableColumnFilters:!0,disableTextPointer:!0,disableSelection:!0}))),(a===q.ADD_NEW||!o)&&n.a.createElement(Pe,{padding:"m",isLarge:o},n.a.createElement(pe,null)))});const Me=Object(S.c)(y.a,{shouldForwardProp:e=>"isLarge"!==e})`
  width: ${({isLarge:e})=>e?468:385}px !important;
  padding: ${({theme:e,isLarge:t})=>t?e.spacing["spacing-xxxl"]+" 40px":`${e.spacing["spacing-xxxl"]} ${e.spacing["spacing-xxxxl"]}`} !important;

  header {
    span {
      font-size: 18px !important;
    }
    svg {
      display: none;
    }
  }

  footer {
    border-top: 1px solid ${({theme:e})=>e.motifPalette.ui07};
    margin-top: ${({theme:e})=>e.spacing["spacing-xxxxl"]};
    justify-content: flex-end;
  }
`;var ve=({onClose:e})=>{const t=Object(r.useDispatch)(),a=Object(r.useSelector)(R.selectDhcpOptionsCodes),c=Object(r.useSelector)(R.selectDhcpOptionsData),{values:_,setValues:i,setFieldValue:E}=Object(j.e)(),[o,s]=Object(l.useState)(Ee(c,_)),d=Object(p.g)(),m=Object(p.g)(),S=Object(l.useMemo)(()=>({...he(a,_,o)}),[a,_,o]),u=Object(l.useMemo)(()=>((e,t,a)=>{return{[Z.ADD_NEW]:{id:Z.ADD_NEW,cancelButtonText:"COMMON_ACTION_CANCEL",submitButtonText:"SETTINGS_NETWORK_DHCP_OPTION_ADD",submitButtonDisabled:!1,validationSchema:(l=e,Re.a.object().shape({dhcpOption:Re.a.object().shape({name:Re.a.string().label("SETTINGS_INTERNET_GENERAL_ADV_GW_DHCP_OPTIONS_NAME").matches(/^[\w-_]*$/,n.a.createElement(T.c,{id:"SETTINGS_INTERNET_GENERAL_ADV_GW_DHCP_OPTIONS_NAME_VALIDATION"})).required(),code:Re.a.number().label("SETTINGS_INTERNET_GENERAL_ADV_GW_DHCP_OPTIONS_CODE").min(R.DHCP_CODE.MIN).max(R.DHCP_CODE.MAX).notOneOf([...l,...R.DHCP_CODE.DISALLOWED_CODES],n.a.createElement(T.c,{id:"SETTINGS_INTERNET_GENERAL_ADV_GW_DHCP_OPTIONS_CODE_VALIDATION"})).required(),type:Re.a.string(),width:Re.a.number(),signed:Re.a.boolean(),value:Re.a.mixed().when(["type","width","signed"],(e,t,a)=>ne({type:e,width:t,signed:a}))})}))},[Z.PREDEFINED_FIRST]:{id:Z.PREDEFINED_FIRST,cancelButtonText:"COMMON_ACTION_CANCEL",submitButtonText:"SETTINGS_DHCP_OPTIONS_MODAL_BUTTON_NEXT_STEP",submitButtonDisabled:0===a.length,tableItems:t,initialSelectedIds:a.map(e=>e._id),validationSchema:void 0},[Z.PREDEFINED_SECOND]:{id:Z.PREDEFINED_SECOND,cancelButtonText:"COMMON_ACTION_BACK",submitButtonText:"SETTINGS_DHCP_OPTIONS_MODAL_BUTTON_ADD_OPTS",submitButtonDisabled:!1,tableItems:a,validationSchema:De(a)}};var l})(a,c,o),[o,a,c]),[O,N]=Object(l.useState)(c.length?u.predefinedFirst.id:u.addNew.id),[b,I]=Object(l.useState)(c.length?q.PREDEFINED:q.ADD_NEW),h=u[O],D=Object(l.useCallback)(({id:e})=>{e===q.ADD_NEW&&N(Z.ADD_NEW),e===q.PREDEFINED&&N(Z.PREDEFINED_FIRST),I(e)},[I]),F=Object(l.useCallback)(async(a,{setSubmitting:l,resetForm:n})=>{if(O===Z.ADD_NEW){const{value:n,...r}=a.dhcpOption;try{const l=await t(Object(R.saveDhcpOption)({...r,code:Number(a.dhcpOption.code),width:Number(a.dhcpOption.width)})),c=ae(l);E(c,n),t(Object(L.c)({icon:f.a.success,message:"SETTINGS_GATEWAY_DHCP_OPTION_SAVE_SUCCESS"})),e()}catch(c){t(Object(L.c)({errorMessage:c.msg,errorValues:c,icon:f.a.danger,message:"SETTINGS_GATEWAY_DHCP_OPTION_SAVE_ERROR"}))}l(!1)}if(O===Z.PREDEFINED_FIRST&&(n(),N(Z.PREDEFINED_SECOND)),O===Z.PREDEFINED_SECOND){const t=Object(M.c)(_,R.DHCP_USER_OPTION_PREFIX);i({...t,...a.networkDhcpOptions},!1),e()}},[t,i,_,E,O,e]),A=Object(l.useCallback)(()=>{O===Z.PREDEFINED_SECOND?N(Z.PREDEFINED_FIRST):e()},[O,e]),g=Object(l.useCallback)(e=>{s(c.filter(t=>e.includes(t._id)))},[s,c]);return n.a.createElement(j.c,{initialValues:S,validationSchema:h.validationSchema,onSubmit:F,onEscape:m,onBack:d,enableReinitialize:!0},({isSubmitting:t,handleSubmit:a})=>n.a.createElement(Me,{isLarge:!!c.length,title:n.a.createElement(T.c,{id:"SETTINGS_NETWORK_DHCP_OPTION_ADD"}),onRequestClose:e,actions:[{style:{width:"106px"},disabled:t,text:n.a.createElement(T.c,{id:h.cancelButtonText}),type:"button",variant:"default",onClick:()=>A()},{style:{width:"178px"},disabled:t||h.submitButtonDisabled,text:n.a.createElement(T.c,{id:h.submitButtonText}),type:"button",variant:"primary",onClick:()=>a()}]},n.a.createElement(fe,{activeStep:h,selectedTab:b,onSelectTab:D,onChangeDhcpOptionSelection:g})))},Ge=a(2093),We=a(2288),je=a(75),ye=a(1207),Ve=a(23),we=a(1924),xe=a(49),Ue=a(159),Ke=a(160),ke=a(158),He=a(95),Be=a(1954),$e=a(2157),Ye=a(119);const ze=[{label:"SETTINGS_NETWORKS_FORM_VALUES_DHCP_MODE_NONE",value:i.DhcpRelayMode.NONE},{label:"SETTINGS_NETWORKS_FORM_VALUES_DHCP_MODE_SERVER",value:i.DhcpRelayMode.ENABLED},{label:"SETTINGS_NETWORKS_FORM_VALUES_DHCP_MODE_RELAY",value:i.DhcpRelayMode.RELAY}],Xe=[{value:!0,label:"SETTINGS_NETWORKS_FORM_VALUES_DHCP_SERVER_MANUAL"},{value:!1,label:"SETTINGS_NETWORKS_FORM_VALUES_DHCP_SERVER_AUTO"}],qe=[{value:!1,label:"SETTINGS_NETWORKS_FORM_VALUES_DHCP_SERVER_MANUAL"},{value:!0,label:"SETTINGS_NETWORKS_FORM_VALUES_DHCP_SERVER_AUTO"}],Ze=[{label:"SETTINGS_NETWORKS_FORM_VALUES_IPV6_INTERFACE_TYPE_NONE",value:i.IPV6_INTERFACE_TYPES.NONE},{label:"SETTINGS_NETWORKS_FORM_VALUES_IPV6_INTERFACE_TYPE_STATIC",value:i.IPV6_INTERFACE_TYPES.STATIC},{label:"SETTINGS_NETWORKS_FORM_VALUES_IPV6_INTERFACE_TYPE_PD",value:i.IPV6_INTERFACE_TYPES.PD}],Je=[{value:"low",label:"SETTINGS_NETWORKS_FORM_VALUES_IPV6_RA_PRIORITY_LOW"},{value:"medium",label:"SETTINGS_NETWORKS_FORM_VALUES_IPV6_RA_PRIORITY_MEDIUM"},{value:"high",label:"SETTINGS_NETWORKS_FORM_VALUES_IPV6_RA_PRIORITY_HIGH"}];var Qe=a(1197),et=a(79),tt=a(138);const at=Object(S.c)(He.g)`
  margin-right: ${({theme:e})=>e.spacing["spacing-xxxxl"]};
`,lt=Object(S.c)(He.g,{shouldForwardProp:e=>"hasError"!==e})`
  margin-top: ${({theme:e,hasError:t})=>t?"64px":e.spacing["spacing-xl"]};
`,nt=Object(S.c)(Qe.a)`
  margin-left: ${({theme:e})=>e.spacing["spacing-s"]};
`,ct=Object(S.c)(Ve.b)`
  color: ${({theme:e})=>e.motifPalette.warning};
`;var rt=()=>{const{values:e,validateForm:t,setFieldValue:a,errors:l,touched:c,submitCount:r}=Object(j.e)(),_=Object(Ye.b)("dhcpd_start",l,c,r)||Object(Ye.b)("dhcpd_stop",l,c,r),i=e.dhcpd_enabled&&e.ip_subnet&&!Object(Ye.b)("ip_subnet",l,c,r),{numIps:E}=i&&Object(tt.l)(e.ip_subnet)||{numIps:0},o=E>et.k.MAX_DHCP_LEASES;return n.a.createElement(n.a.Fragment,null,!e.auto_scale_enabled&&n.a.createElement(K.a,null,n.a.createElement(we.a,{alignWith:"input",htmlFor:"dhcpd_start",label:n.a.createElement(He.g,null,n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_DHCP_RANGE"}),o&&n.a.createElement(nt,{message:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_CREATE_FIELD_LIMIT_DHCP_LEASE_RANGE",values:{limit:et.k.MAX_DHCP_LEASES}}),position:"bottom",width:140},n.a.createElement(ct,null)))}),n.a.createElement(k.a,{column:!0},n.a.createElement(He.g,{width:"100%"},n.a.createElement(at,{flexDirection:"column",flex:"1 1 50%"},n.a.createElement(B.Field,{name:"dhcpd_start",full:!0,label:"SETTINGS_NETWORKS_FORM_FIELD_LABEL_DHCP_RANGE_START"})),n.a.createElement(He.g,{flexDirection:"column",flex:"1 1 50%"},n.a.createElement(B.Field,{name:"dhcpd_stop",full:!0,label:"SETTINGS_NETWORKS_FORM_FIELD_LABEL_DHCP_RANGE_STOP"}))),n.a.createElement(lt,{width:"100%",justifyContent:"flex-end",hasError:_},n.a.createElement(He.c,{name:"auto-configure-dhcp-range",variant:"inline",type:"button",legacy:!1,onClick:()=>{const{start:l,stop:n}=Object(Ge.c)(e.ip_subnet);a("dhcpd_start",l),a("dhcpd_stop",n),setTimeout(t)},disabled:!i,Icon:Ve.Fb},n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_BUTTON_DHCP_RANGE_CONFIGURE"}))))),n.a.createElement(K.a,null,n.a.createElement(we.a,{alignWith:"dropdown",htmlFor:"dhcpd_dns_enabled",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_DHCP_NAME_SERVER"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_DHCP_NAME_SERVER_DESCRIPTION"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,name:"dhcpd_dns_enabled",options:Xe,type:"dropdown",translateOptions:!0}))),e.dhcpd_dns_enabled&&Object(ye.a)(4,e=>n.a.createElement(K.a,{key:e},n.a.createElement(we.a,{alignWith:"input",htmlFor:"dhcpd_dns_"+(e+1),label:null}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,name:"dhcpd_dns_"+(e+1),placeholder:"SETTINGS_NETWORKS_FORM_FIELD_DNS_SERVER",placeholderValues:{number:e+1}})))),n.a.createElement(K.a,null,n.a.createElement(we.a,{alignWith:"input",htmlFor:"dhcpd_leasetime",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_DHCP_LEASE_TIME"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,type:"number",label:"COMMON_UNIT_SECONDS",name:"dhcpd_leasetime"}))),n.a.createElement(K.a,null,n.a.createElement(we.a,{alignWith:"dropdown",htmlFor:"dhcpd_gateway_enabled",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_DHCP_GATEWAY_IP_ENABLED"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_DHCP_GATEWAY_IP_ENABLED_DESCRIPTION"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,name:"dhcpd_gateway_enabled",type:"dropdown",options:Xe,translateOptions:!0}))),e.dhcpd_gateway_enabled&&n.a.createElement(K.a,null,n.a.createElement(we.a,{alignWith:"input",htmlFor:"dhcpd_gateway",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_DHCP_GATEWAY_IP"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,name:"dhcpd_gateway"}))))};var _t=()=>null,it=a(573),Et=a(82),ot=a(141);const st=Object(S.c)(He.g)`
  margin-right: ${({theme:e})=>e.spacing["spacing-xxxxl"]};
`,dt=Object(S.c)(He.g)`
  margin-top: ${({theme:e})=>e.spacing["spacing-l"]};
`,mt=Object(S.c)(Qe.a)`
  margin-left: ${({theme:e})=>e.space[3]}px};
`,pt=({ipv6_ra_enabled:e,isUdm:t})=>n.a.createElement(n.a.Fragment,null,n.a.createElement(K.a,null,n.a.createElement(we.a,{alignWith:"toggleSmall",htmlFor:"ipv6_ra_enabled",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELDS_IPV6_RA"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELDS_IPV6_RA_DESCRIPTION"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{name:"ipv6_ra_enabled",type:"checkbox"}))),e&&n.a.createElement(n.a.Fragment,null,n.a.createElement(K.a,null,n.a.createElement(we.a,{alignWith:"dropdown",htmlFor:"ipv6_ra_priority",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELDS_IPV6_RA_PRIORITY"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,name:"ipv6_ra_priority",options:Je,type:"dropdown",translateOptions:!0}))),!t&&n.a.createElement(n.a.Fragment,null,n.a.createElement(K.a,null,n.a.createElement(we.a,{alignWith:"input",htmlFor:"ipv6_ra_valid_lifetime",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELDS_IPV6_RA_VALID_LIFETIME"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,name:"ipv6_ra_valid_lifetime",placeholder:"SETTINGS_NETWORKS_FORM_FIELDS_IPV6_RA_VALID_LIFETIME"}))),n.a.createElement(K.a,null,n.a.createElement(we.a,{alignWith:"input",htmlFor:"ipv6_ra_preferred_lifetime",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELDS_IPV6_RA_PREFERRED_LIFETIME"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,name:"ipv6_ra_preferred_lifetime",placeholder:"SETTINGS_NETWORKS_FORM_FIELDS_IPV6_RA_PREFERRED_LIFETIME"})))))),St=()=>n.a.createElement(K.a,null,n.a.createElement(we.a,{alignWith:"dropdown",htmlFor:"dhcpdv6_dns_auto",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELDS_DHCP_DNS_CONTROL"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,name:"dhcpdv6_dns_auto",options:qe,type:"dropdown",translateOptions:!0}))),Tt=Object(T.f)(({intl:e})=>n.a.createElement(n.a.Fragment,null,Object(ye.a)(4,t=>n.a.createElement(K.a,{key:t},n.a.createElement(we.a,{alignWith:"input",htmlFor:"dhcpdv6_dns_"+(t+1),label:0===t?n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELDS_DHCP_V6_NAME_SERVER"}):null}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,name:"dhcpdv6_dns_"+(t+1),placeholder:e.formatMessage({id:"SETTINGS_NETWORKS_FORM_FIELD_DNS_SERVER"},{number:t+1})}))))));var ut,Ot=()=>{const e=Object(r.useSelector)(g.k),t=Object(r.useSelector)(E.selectWanInterfaceOptions),{values:a,setFieldValue:l,validateForm:c,submitCount:_,errors:o,touched:s}=Object(j.e)(),d=a.ipv6_subnet&&!Object(Ye.b)("ipv6_subnet",o,s,_),{ipCount:m}=d&&Object(it.c)(a.ipv6_subnet)||{ipCount:0},p=!!a.dhcpdv6_enabled,S=!d,u=m>i.networkDefaults.MAX_DHCPV6_LEASES;return n.a.createElement(n.a.Fragment,null,n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isLan",alignWith:"dropdown",htmlFor:"ipv6_interface_type",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_IPV6_INTERFACE_TYPE"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,name:"ipv6_interface_type",options:Ze,type:"dropdown",translateOptions:!0}))),a.ipv6_interface_type===i.IPV6_INTERFACE_TYPES.PD&&n.a.createElement(n.a.Fragment,null,!e&&n.a.createElement(n.a.Fragment,null,n.a.createElement(K.a,null,n.a.createElement(we.a,{alignWith:"input",htmlFor:"ipv6_pd_prefixid",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELDS_IPV6_PD_PREFIX_ID"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,name:"ipv6_pd_prefixid",placeholder:"SETTINGS_NETWORKS_FORM_FIELDS_IPV6_PD_PREFIX_ID"}))),n.a.createElement(K.a,null,n.a.createElement(we.a,{alignWith:"dropdown",htmlFor:"ipv6_pd_interface",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELDS_IPV6_PREFIX_DELEGATION_INTERFACE"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,name:"ipv6_pd_interface",options:t,type:"dropdown"})))),n.a.createElement(pt,{ipv6_ra_enabled:a.ipv6_ra_enabled,isUdm:e}),e&&n.a.createElement(K.a,null,n.a.createElement(we.a,{alignWith:"input",htmlFor:"ipv6_pd_start",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELDS_DHCP_V6_RANGE"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(He.g,{width:"100%"},n.a.createElement(st,{flexDirection:"column",flex:"1 1 50%"},n.a.createElement(B.Field,{name:"ipv6_pd_start",label:"SETTINGS_NETWORKS_FORM_FIELD_LABEL_DHCP_RANGE_START",full:!0})),n.a.createElement(He.g,{flexDirection:"column",flex:"1 1 50%"},n.a.createElement(B.Field,{name:"ipv6_pd_stop",label:"SETTINGS_NETWORKS_FORM_FIELD_LABEL_DHCP_RANGE_STOP",full:!0}))))),n.a.createElement(St,null),n.a.createElement(Tt,null)),a.ipv6_interface_type===i.IPV6_INTERFACE_TYPES.STATIC&&n.a.createElement(n.a.Fragment,null,n.a.createElement(K.a,null,n.a.createElement(we.a,{alignWith:"input",htmlFor:"ipv6_subnet",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELDS_IPV6_GATEWAY_SUBNET"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,name:"ipv6_subnet",placeholder:"SETTINGS_NETWORKS_FORM_FIELDS_IPV6_GATEWAY_SUBNET"}))),n.a.createElement(pt,{ipv6_ra_enabled:a.ipv6_ra_enabled,isUdm:e}),n.a.createElement(K.a,null,n.a.createElement(we.a,{alignWith:"toggleSmall",htmlFor:"dhcpdv6_enabled",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELDS_DHCP_V6"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{name:"dhcpdv6_enabled",type:"checkbox"}))),p&&n.a.createElement(K.a,null,n.a.createElement(we.a,{alignWith:"input",htmlFor:"dhcpdv6_start",label:n.a.createElement(He.g,null,n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELDS_DHCP_V6_RANGE"}),u&&n.a.createElement(mt,{message:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELDS_LIMIT_DHCP_V6_LEASE_RANGE",values:{limit:i.networkDefaults.MAX_DHCP_LEASES}}),position:"bottom",width:140},n.a.createElement(Ve.b,{color:Et.q.warning})))}),n.a.createElement(k.a,{column:!0},n.a.createElement(He.g,{width:"100%"},n.a.createElement(st,{flexDirection:"column",flex:"1 1 50%"},n.a.createElement(B.Field,{name:"dhcpdv6_start",full:!0,label:"SETTINGS_NETWORKS_FORM_FIELD_LABEL_DHCP_RANGE_START"})),n.a.createElement(He.g,{flexDirection:"column",flex:"1 1 50%"},n.a.createElement(B.Field,{name:"dhcpdv6_stop",full:!0,label:"SETTINGS_NETWORKS_FORM_FIELD_LABEL_DHCP_RANGE_STOP"}))),n.a.createElement(dt,{width:"100%",justifyContent:"flex-end"},n.a.createElement(He.c,{name:"auto-configure-dhcpV6-range",variant:"link",type:"button",className:ot.b,legacy:!1,onClick:()=>{const{start:e,stop:t}=Object(Ge.d)(a.ipv6_subnet);e&&t&&(l("dhcpdv6_start",e),l("dhcpdv6_stop",t),setTimeout(c))},disabled:S},n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_BUTTON_DHCP_RANGE_CONFIGURE"}))))),a.dhcpdv6_enabled&&n.a.createElement(K.a,null,n.a.createElement(we.a,{alignWith:"input",htmlFor:"dhcpdv6_leasetime",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELDS_DHCP_V6_LEASETIME"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,type:"number",name:"dhcpdv6_leasetime",label:"COMMON_UNIT_SECONDS"}))),n.a.createElement(St,null),n.a.createElement(Tt,null)))},Nt=a(1950),bt=a(188);!function(e){e.CUSTOMIZED="customized",e.AZURE_DYNAMIC="azure_dynamic",e.AZURE_STATIC="azure_static"}(ut||(ut={}));const It=!1,Rt=!0,ht=[{label:"SETTINGS_VPN_CREATE_ADVANCED_VALUE_L2TP_SERVER",value:i.ServerVpnType.L2TP_SERVER},{label:"SETTINGS_VPN_CREATE_ADVANCED_VALUE_PPTP_SERVER",value:i.ServerVpnType.PPTP_SERVER}],Dt=[{value:i.SiteToSiteVpnType.AUTO_IPSEC_VTI,label:"SETTINGS_VPN_UNIFI_TO_UNIFI_CREATE_VALUE_AUTO_IPSEC_VTI"},{value:i.SiteToSiteVpnType.MANUAL_IPSEC,label:"SETTINGS_VPN_UNIFI_TO_UNIFI_CREATE_VALUE_MANUAL_IPSEC"},{value:i.SiteToSiteVpnType.OPEN_VPN,label:"SETTINGS_VPN_UNIFI_TO_UNIFI_CREATE_VALUE_OPEN_VPN"}],Ft=[{value:i.ClientVpnType.PPTP_CLIENT,label:"SETTINGS_VPN_CLIENT_CREATE_VALUE_PPTP_CLIENT"}],At=[{value:ut.CUSTOMIZED,label:"SETTINGS_VPN_UNIFI_TO_UNIFI_CREATE_VALUE_PROFILE_CUSTOMIZED"},{value:ut.AZURE_DYNAMIC,label:"SETTINGS_VPN_UNIFI_TO_UNIFI_CREATE_VALUE_PROFILE_AZURE_DYNAMIC_ROUTING"},{value:ut.AZURE_STATIC,label:"SETTINGS_VPN_UNIFI_TO_UNIFI_CREATE_VALUE_PROFILE_AZURE_STATIC_ROUTING"}],gt=[{label:"SETTINGS_VPN_CREATE_ADVANCED_VALUE_AUTO",value:String(It)},{label:"SETTINGS_VPN_CREATE_ADVANCED_VALUE_MANUAL",value:String(Rt)}],Pt=[{label:"IKEv1",value:"ikev1"},{label:"IKEv2",value:"ikev2"}],Lt=[{value:"aes128",label:"AES-128"},{value:"aes256",label:"AES-256"},{value:"3des",label:"3DES"}],Ct=[{value:"aes128",label:"AES-128"},{value:"aes192",label:"AES-192"},{value:"aes256",label:"AES-256"},{value:"3des",label:"3DES"}],ft=[{value:"sha1",label:"SHA1"},{value:"md5",label:"MD5"}],Mt=[{value:"sha1",label:"SHA1"},{value:"sha256",label:"SHA256"},{value:"sha384",label:"SHA384"},{value:"sha512",label:"SHA512"},{value:"md5",label:"MD5"}],vt=e=>({label:String(e),value:e}),Gt=[2,5,14,15,16,19,20,21,25,26].map(vt),Wt=[1,2,5,14,15,16,17,18].map(vt),jt=[1,2,5,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32].map(vt);var yt;!function(e){e.CREATE_DHCP_OPTION="createDhcpOption",e.CREATE_RADIUS_USER="createRadiusUser",e.VPN_SETUP="vpnSetup"}(yt||(yt={}));const Vt=Object(S.c)("div")`
  width: 100%;

  table {
    th {
      height: 30px !important;
    }
    td {
      padding-right: 0 !important;
    }
  }
`,wt=Object(S.c)("div",{shouldForwardProp:e=>"noTable"!==e})`
  margin-top: ${({theme:e,noTable:t})=>t?"10px":e.spacing["spacing-xxxl"]};
`;var xt=Object(T.f)(({intl:e})=>{const t=Object(r.useDispatch)(),a=Object(c.k)(),_=Object(r.useSelector)(R.selectDhcpOptionsData),{networkId:i}=Object(c.m)(),E=Object(p.h)(`networks/form/${i||0}/${yt.CREATE_DHCP_OPTION}`),{values:o,setValues:s}=Object(j.e)(),d=ie(e,X.VIEW,o),m=Ee(_,o),S=Object(l.useCallback)(e=>{t(Object(W.b)({name:e.name,onConfirm:()=>{const t=Object(M.c)(o,ae(e));s(t,!1)}}))},[t,o,s]),u=Object(l.useMemo)(()=>{const e=Object(Te.a)(o,(e,t)=>Ie(t,R.DHCP_USER_OPTION_PREFIX));let t="";return Object.entries(e).forEach(([e,a])=>{t=`${t}_${e}_${Object(be.a)(a)}`}),t},[o]);return n.a.createElement(Vt,null,m.length>0&&n.a.createElement(x.a,{key:u,columns:d,disableColumnFilters:!0,items:m,idField:"_id",renderRowPopoverContent:e=>n.a.createElement(Nt.h,null,n.a.createElement(Nt.f,{onClick:()=>S(e),name:"dhcp-option-remove"},n.a.createElement(T.c,{id:"COMMON_ACTION_REMOVE"}))),rowHeight:30,disableSelection:!0,disableTextPointer:!0}),n.a.createElement(wt,{noTable:!m.length},n.a.createElement(bt.c,{name:"dhcp-option-add",variant:"inline",legacy:!1,type:"button",onClick:()=>a.push(E),Icon:n.a.createElement(Ve.ub,null)},n.a.createElement(H.a,{alignItems:"center"},n.a.createElement(T.c,{id:"SETTINGS_NETWORK_DHCP_OPTION_ADD"})))))}),Ut=a(35);const Kt=(e=Ut.b.NONE)=>{switch(e){case Ut.b.NONE:return{dhcpd_enabled:!1,dhcp_relay_enabled:!1};case Ut.b.ENABLED:return{dhcpd_enabled:!0,dhcp_relay_enabled:!1};case Ut.b.RELAY:return{dhcpd_enabled:!1,dhcp_relay_enabled:!0};default:return{dhcpd_enabled:!1,dhcp_relay_enabled:!1}}};var kt=a(815);const Ht=Object(S.c)(He.g)`
  opacity: 0.4;
  pointer-events: none;
  user-select: none;
`;var Bt=()=>{const{values:e,setFieldValue:t,setFieldTouched:a}=Object(j.e)(),c=Object(r.useSelector)(kt.D),_=Object(r.useSelector)(i.selectNetworksData),{wan_ip:E,wan_ip_aliases:o=[],name:s,wan_type:d}=Object(l.useMemo)(()=>_.find(({wan_networkgroup:e})=>e===m.a.WAN)||{wan_ip:void 0,wan_ip_aliases:[],name:void 0},[_]),{wan_ip:p,wan_ip_aliases:S=[],name:u,wan_type:O}=Object(l.useMemo)(()=>_.find(({wan_networkgroup:e})=>e===m.a.WAN2)||{wan_ip:void 0,wan_ip_aliases:[],name:void 0},[_]),N=Object(l.useMemo)(()=>E?[{label:E,value:E},...o.map(e=>{const{ip:t}=Object(tt.j)(e);return{label:t,value:t}})]:[],[E,o]),b=Object(l.useMemo)(()=>p?[{label:p,value:p},...S.map(e=>{const{ip:t}=Object(tt.j)(e);return{label:t,value:t}})]:[],[p,S]),I=Object(l.useMemo)(()=>_.reduce((e,t)=>{var a;return[m.a.WAN,m.a.WAN2].includes(null==t?void 0:t.wan_networkgroup)&&[i.IpV4ConnectionType.STATIC,i.IpV4ConnectionType.PPPOE].includes(null==t?void 0:t.wan_type)&&(null===(a=t.wan_ip_aliases)||void 0===a?void 0:a.length)?[...e,t.wan_networkgroup]:e},[]),[_]),R=Object(l.useMemo)(()=>{var t,a;return null===(a=null===(t=e.nat_outbound_ip_addresses)||void 0===t?void 0:t.find(e=>e.wan_network_group===m.a.WAN))||void 0===a?void 0:a.ip_address},[e.nat_outbound_ip_addresses]),h=Object(l.useMemo)(()=>{var t,a;return null===(a=null===(t=e.nat_outbound_ip_addresses)||void 0===t?void 0:t.find(e=>e.wan_network_group===m.a.WAN2))||void 0===a?void 0:a.ip_address},[e.nat_outbound_ip_addresses]),D=Object(l.useCallback)((l,n)=>{var c;t("nat_outbound_ip_addresses",null===(c=e.nat_outbound_ip_addresses)||void 0===c?void 0:c.map(e=>e.wan_network_group===l?{wan_network_group:l,ip_address:n}:e)),a("nat_outbound_ip_addresses")},[a,t,e.nat_outbound_ip_addresses]),F=Object(l.useCallback)((e,t,a)=>n.a.createElement(Qe.a,{message:a?n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELDS_INTERNET_SOURCE_IP_TOOLTIP_IS_DHCP"}):n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELDS_INTERNET_SOURCE_IP_TOOLTIP_NO_ADDITIONAL_IPS"}),position:"bottom",width:a?140:235},n.a.createElement(Ht,{flexDirection:"column"},n.a.createElement(U.a,null,n.a.createElement(xe.a,{size:"label",color:"tertiary"},e)),n.a.createElement(xe.a,null,a?n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELDS_INTERNET_SOURCE_IP_TOOLTIP_DHCP"}):t))),[]);return I.length&&c?n.a.createElement(K.a,null,n.a.createElement(we.a,{alignWith:o.length?"dropdown":15,htmlFor:"sourceIpWan1",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELDS_INTERNET_SOURCE_IP"})}),n.a.createElement(k.a,{column:!!o.length||!!S.length},I.includes(m.a.WAN)?n.a.createElement(B.Field,{full:!0,name:"sourceIpWan1",label:s,value:R,options:N,type:"dropdown",onChange:(e,t)=>D(m.a.WAN,t)}):F(s,R,d===i.IpV4ConnectionType.DHCP),p&&n.a.createElement(He.g,Object.assign({width:"100%"},(!!o.length||!!S.length)&&{paddingTop:20},I.includes(m.a.WAN)&&!S.length&&{paddingLeft:25}),I.includes(m.a.WAN2)?n.a.createElement(B.Field,{full:!0,name:"sourceIpWan2",label:u,value:h,options:b,type:"dropdown",onChange:(e,t)=>D(m.a.WAN2,t)}):F(u,h,O===i.IpV4ConnectionType.DHCP)))):null};const $t=Object(S.c)(He.g)`
  margin-top: ${({theme:e})=>e.spacing["spacing-l"]};

  > button {
    display: flex;
    align-items: center;
  }
`,Yt=Object(S.c)("div")`
  margin-left: ${({theme:e})=>e.spacing["spacing-s"]};
  padding-top: ${({theme:e})=>e.spacing["spacing-xxs"]};
`;var zt=({hiddenId:e})=>{const{values:t,initialValues:a,setFieldValue:c,errors:_,touched:s,submitCount:d}=Object(j.e)(),m=Object(r.useSelector)(A.selectSubnetSuggestions),S=Object(r.useSelector)(o.c),u=Object(r.useSelector)(E.selectSiteGateway),O=Object(p.h)("advanced/gateway/dhcp/form",!0),N=Object(r.useSelector)(i.selectNetworksData),I=Object(l.useCallback)(()=>{const e=m.find(({mask:e})=>24===e);if(null==e?void 0:e.gateways.length){const t=Object($e.a)(e.gateways);c("ip_subnet",`${t}/${e.mask}`)}},[m,c]),R=Object(l.useMemo)(()=>{if(Object(E.isUdm)(u)||!Object(ke.g)(u))return[];return Object(Ke.a)(u).map(e=>({label:e,value:e}))},[u]);Object(l.useEffect)(()=>{const{dhcpd_enabled:e,dhcp_relay_enabled:a}=Kt(t.dhcp_mode);c("dhcpd_enabled",e),c("dhcp_relay_enabled",a)},[t.dhcp_mode,c]);const h=Object(l.useMemo)(()=>!!Object(Ye.b)("ip_subnet",_,s,d)&&Object(Ge.a)(N,t.ip_subnet,_.ip_subnet,a.ip_subnet),[_,a.ip_subnet,N,d,s,t.ip_subnet]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isLan",alignWith:"input",htmlFor:"vlan",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VLAN_ID"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VLAN_ID_DESCRIPTION"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{disabled:!!e,type:"number",full:!0,min:b.a.MIN_VLAN,max:Object(E.isUdm)(u)?b.a.MAX_VLAN_UDM:b.a.MAX_VLAN,name:"vlan",placeholder:"SETTINGS_NETWORKS_FORM_FIELD_VLAN_ID"}))),n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isLan",alignWith:"input",htmlFor:"domain_name",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_DOMAIN_NAME"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_DOMAIN_NAME_DESCRIPTION"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,name:"domain_name",placeholder:"SETTINGS_NETWORKS_FORM_FIELD_DOMAIN_NAME_PLACEHOLDER"}))),R.length>0&&n.a.createElement(K.a,null,n.a.createElement(we.a,{alignWith:"dropdown",htmlFor:"networkgroup",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_NETWORK_GROUP"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_NETWORK_GROUP_DESCRIPTION"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,name:"networkgroup",options:R,type:"dropdown",disabled:!!e}))),n.a.createElement(K.a,{disabled:!!a.vpn_type},n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isLan",alignWith:"toggleSmall",htmlFor:"guestIsolation",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_DEVICE_ISOLATION"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_DEVICE_ISOLATION_DESCRIPTION"})}),n.a.createElement(k.a,null,n.a.createElement(B.Field,{name:"guestIsolation",type:"checkbox",disabled:!!a.vpn_type,value:t.purpose===i.NetworkPurpose.GUEST,onChange:e=>c("purpose",e.target.checked?i.NetworkPurpose.GUEST:i.NetworkPurpose.CORPORATE)}))),n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isLan",alignWith:"toggleSmall",htmlFor:"igmp_snooping",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_IGMP_SNOOPING"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_IGMP_SNOOPING_DESCRIPTION"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{name:"igmp_snooping",type:"checkbox"}))),n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isLan",alignWith:"toggleSmall",htmlFor:"auto_scale_enabled",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_AUTO_SCALE_NETWORK"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_AUTO_SCALE_NETWORK_DESCRIPTION"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{name:"auto_scale_enabled",type:"checkbox"}))),n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isLan",alignWith:"dropdown",htmlFor:"dhcp_mode",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_DHCP_MODE"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,name:"dhcp_mode",options:ze,type:"dropdown",translateOptions:!0}),n.a.createElement(Be.a,{in:t.dhcp_mode===i.DhcpRelayMode.RELAY,wrap:!0,padding:"15px 0 0"},n.a.createElement(He.g,null,n.a.createElement(Ve.cb,{isActive:!0}),n.a.createElement(Yt,null,n.a.createElement(T.b,{id:"SETTINGS_NETWORKS_FORM_DHCP_RELAY_INFO",values:{link:O}})))))),n.a.createElement(Be.a,{in:!t.auto_scale_enabled},n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isLan",alignWith:"input",htmlFor:"ip_subnet",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_GATEWAY_IP_SUBNET"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{name:"ip_subnet",full:!0,label:"SETTINGS_NETWORKS_FORM_FIELD_ENTER_GATEWAY_IP_SUBNET",invalid:!!h}),n.a.createElement($t,{width:"100%",justifyContent:"flex-end"},n.a.createElement(He.c,{name:"auto-configure-ip-subnet",variant:"inline",type:"button",legacy:!1,onClick:I,Icon:Ve.Fb},n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_BUTTON_DHCP_RANGE_CONFIGURE"}))),n.a.createElement(Be.a,{wrap:!0,padding:"10px 0 0 0",in:!!h},n.a.createElement(xe.a,{color:"danger"},h))))),n.a.createElement(Be.a,{in:t.dhcp_mode===i.DhcpRelayMode.ENABLED,wrap:!0,flexDirection:"column"},n.a.createElement(rt,null)),n.a.createElement(Be.a,{in:t.dhcp_mode===i.DhcpRelayMode.RELAY,wrap:!0,flexDirection:"column",padding:"0"},n.a.createElement(_t,null)),n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isLan",alignWith:"input",htmlFor:"dhcpd_unifi_controller",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_DHCP_UNIFI_CTRL"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_DHCP_UNIFI_CTRL_DESCRIPTION"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,placeholder:"SETTINGS_NETWORKS_FORM_FIELD_DHCP_UNIFI_CTRL_PLACEHOLDER",name:"dhcpd_unifi_controller"}))),n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isLan",alignWith:"toggleSmall",htmlFor:"dhcpguard_enabled",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_DHCP_GUARDING"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_DHCP_GUARDING_DESCRIPTION"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{name:"dhcpguard_enabled",type:"checkbox"}))),n.a.createElement(Be.a,{in:t.dhcpguard_enabled},Object(ye.a)(3,e=>n.a.createElement(K.a,{key:e},n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isLan",searchText:"SETTINGS_NETWORKS_FORM_FIELD_DHCP_GUARD_SERVER_SEARCH",alignWith:"input",htmlFor:"dhcpd_ip_"+(e+1),label:null}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,name:"dhcpd_ip_"+(e+1),placeholder:"SETTINGS_NETWORKS_FORM_FIELD_DHCP_GUARD_SERVER",placeholderValues:{number:e+1}}))))),n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isLan",alignWith:"toggleSmall",htmlFor:"dhcpd_ntp_enabled",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_DHCP_NTP_SERVER"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_DHCP_NTP_SERVER_DESCRIPTION"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{name:"dhcpd_ntp_enabled",type:"checkbox"}))),n.a.createElement(Be.a,{in:t.dhcpd_ntp_enabled},Object(ye.a)(2,e=>n.a.createElement(K.a,{key:e},n.a.createElement(we.a,{alignWith:"input",htmlFor:"dhcpd_ntp_"+(e+1),label:null}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,name:"dhcpd_ntp_"+(e+1),placeholder:"SETTINGS_NETWORKS_FORM_FIELD_DHCP_NTP_SERVER_ITEM",placeholderValues:{number:e+1}}))))),n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isLan",alignWith:"toggleSmall",htmlFor:"dhcpd_boot_enabled",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_DHCP_BOOT"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_DHCP_BOOT_DESCRIPTION"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{name:"dhcpd_boot_enabled",type:"checkbox"}))),n.a.createElement(Be.a,{in:t.dhcpd_boot_enabled},n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isLan",searchText:"SETTINGS_NETWORKS_FORM_FIELD_DHCP_BOOT_SERVER_SEARCH",alignWith:"input",htmlFor:"dhcpd_boot_server",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_DHCP_BOOT_SERVER"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,name:"dhcpd_boot_server",placeholder:"SETTINGS_NETWORKS_FORM_FIELD_DHCP_BOOT_SERVER"}))),n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isLan",searchText:"SETTINGS_NETWORKS_FORM_FIELD_DHCP_BOOT_FILENAME_SEARCH",alignWith:"input",htmlFor:"dhcpd_boot_filename",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_DHCP_BOOT_FILENAME"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,name:"dhcpd_boot_filename",placeholder:"SETTINGS_NETWORKS_FORM_FIELD_DHCP_BOOT_FILENAME"})))),n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isLan",alignWith:"toggleSmall",htmlFor:"dhcpd_time_offset_enabled",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_DHCP_TIME_OFFSET_ENABLED"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_DHCP_TIME_OFFSET_ENABLED_DESCRIPTION"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{name:"dhcpd_time_offset_enabled",type:"checkbox"}))),n.a.createElement(Be.a,{in:t.dhcpd_time_offset_enabled},n.a.createElement(K.a,null,n.a.createElement(we.a,{alignWith:"input",htmlFor:"dhcpd_time_offset",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_DHCP_TIME_OFFSET"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,name:"dhcpd_time_offset",label:"COMMON_UNIT_SECONDS"})))),n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isLan",alignWith:"input",htmlFor:"dhcpd_wpad_url",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_DHCP_WPAD_URL"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,name:"dhcpd_wpad_url",placeholder:"SETTINGS_NETWORKS_FORM_FIELD_DHCP_WPAD_URL"}))),n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isLan",alignWith:"input",htmlFor:"dhcpd_tftp_server",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_DHCP_TFTP_SERVER"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,name:"dhcpd_tftp_server",placeholder:"SETTINGS_NETWORKS_FORM_FIELD_DHCP_TFTP_SERVER"}))),n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isLan",alignWith:10,label:n.a.createElement(T.c,{id:"SETTINGS_NETWORK_DHCP_OPTION_LABEL"}),description:n.a.createElement(T.b,{id:"SETTINGS_NETWORK_DHCP_OPTION_DESCRIPTION",values:{url:Ue.a.dhcpOptionsGuide}})}),n.a.createElement(k.a,{column:!0},n.a.createElement(xt,null))),n.a.createElement(Be.a,{in:S&&t.purpose===i.NetworkPurpose.GUEST},n.a.createElement(He.a,{preAuthKey:"allowedSubnets",postAuthKey:"restrictedSubnets"})),n.a.createElement(Bt,null),n.a.createElement(Ot,null))},Xt=a(76);var qt=Object(T.f)(({intl:e})=>{const{values:t,setFieldValue:a,initialValues:_}=Object(j.e)(),{networkId:o}=Object(c.m)(),{gateway_device:s,purpose:d}=t,m=Object(r.useSelector)(E.selectAdoptedL3Switches),p=Object(r.useSelector)(E.selectSiteGateway),S=!!Object(r.useSelector)(E.selectAvailableUlteDevice),u=Object(l.useMemo)(()=>{const t=[];return t.push({label:p?Object(Xt.b)(p):e.formatMessage({id:"COMMON_WORD_DEFAULT"}),value:""}),m.length&&t.push(...m.map(e=>({label:Object(Xt.b)(e),value:e.mac}))),s&&!m.some(({mac:e})=>e===s)&&t.push({label:e.formatMessage({id:"COMMON_UNKNOWN"}),value:s}),t},[p,m,s,e]),O=Object(l.useMemo)(()=>[i.NetworkPurpose.REMOTE_USER_VPN,i.NetworkPurpose.SITE_VPN,i.NetworkPurpose.VPN_CLIENT].includes(d),[d]),N=Object(l.useCallback)(e=>{a("gateway_device",e.value),a("gateway_type",m.some(t=>t.mac===e.value)?i.NetworkGatewayType.switch:i.NetworkGatewayType.default)},[a,m]),b=o?u.length>1&&_.gateway_type===i.NetworkGatewayType.switch:u.length>1;return n.a.createElement(w.a,null,n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{alignWith:"toggleSmall",htmlFor:"enabled",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_ENABLE"})}),n.a.createElement(k.a,null,n.a.createElement(B.Field,{name:"enabled",type:"checkbox"}))),n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{alignWith:"input",htmlFor:"name",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_NAME"}),searchIsApplicable:"isLanOrVpn"}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,name:"name"}))),b&&n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{alignWith:"dropdown",htmlFor:"gateway_device",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_ROUTER"}),searchIsApplicable:"isLanOrVpn,hasGatewayDevicesDropdown"}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,name:"gateway_device",options:u,type:"dropdown",onChange:N}))),n.a.createElement(K.a,{disabled:!0},n.a.createElement(we.a,{alignWith:"toggleSmall",htmlFor:"wanAccess",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_INTERNET_ACCESS"}),badge:n.a.createElement(T.c,{id:"COMMON_BADGE_COMING_SOON"})}),n.a.createElement(k.a,null,n.a.createElement(B.Field,{name:"wanAccess",type:"checkbox",disabled:!0}))),S&&!O&&n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{alignWith:"toggleSmall",htmlFor:"lte_lan_enabled",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_BACKUP_INTERNET_ACCESS"}),searchIsApplicable:"isLanOrVpn"}),n.a.createElement(k.a,null,n.a.createElement(B.Field,{name:"lte_lan_enabled",type:"checkbox"}))))});const Zt=Object(S.c)("label",{shouldForwardProp:e=>"isSelected"!==e})`
  outline: none;
  width: 100%;
  max-width: 420px;
  background: ${({theme:e})=>e.motifPalette.ui02};
  padding: ${({theme:e})=>e.spacing["spacing-s"]} ${({theme:e})=>e.spacing["spacing-xxl"]}
    ${({theme:e})=>e.spacing["spacing-s"]} ${({theme:e})=>e.spacing["spacing-l"]};
  margin-bottom: ${({theme:e})=>e.spacing["spacing-m"]};
  display: flex;
  align-items: center;
  cursor: pointer;

  border-radius: 4px;
  border: 1px solid transparent;
  transition: background 200ms ease;
  ${({isSelected:e,theme:t})=>e?`border-color: ${t.motifPalette.ui06};`:""}

  &:hover {
    background: ${({theme:e})=>e.motifPalette.ui04};
  }

  /* TODO remove when focus monitor is added to ui-components */
  &:focus {
    border-color: ${({theme:e})=>e.motifPalette.ui06};
  }
`,Jt=Object(S.c)("input")`
  opacity: 0;
  position: absolute;
`,Qt=Object(S.c)(He.g)`
  margin-left: ${({theme:e})=>e.spacing["spacing-l"]};
  color: ${({theme:e})=>e.motifPalette.text03} !important;
`,ea=Object(S.c)(He.g,{shouldForwardProp:e=>"imgWidth"!==e})`
  width: 66px;
  height: 60px;
  padding-right: ${({theme:e})=>e.spacing["spacing-m"]};
  border-right: 1px solid ${({theme:e})=>e.motifPalette.ui07};
  align-items: center;

  > img {
    width: ${({imgWidth:e})=>e}px;
  }
`,ta=Object(S.c)(xe.a)`
  color: ${({theme:e})=>e.motifPalette.text01} !important;
  margin-bottom: ${({theme:e})=>e.spacing["spacing-xs"]} !important;
`;var aa=({id:e,isSelected:t,key:a,value:l,icon:c,field:r,title:_,description:i,imgWidth:E,setFieldValue:o})=>n.a.createElement(Zt,{htmlFor:e,isSelected:t,key:a,tabIndex:0},n.a.createElement(Jt,{type:"radio",checked:t,id:e,name:r,onChange:()=>o(r,l)}),n.a.createElement(ea,{justifyContent:"center",imgWidth:E},c),n.a.createElement(Qt,{flexDirection:"column",flex:"1"},n.a.createElement(ta,{weight:"bold"},n.a.createElement(T.c,{id:_})),n.a.createElement(T.c,{id:i})));var la=()=>{const{setFieldValue:e,values:t}=Object(j.e)();return n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{htmlFor:"content-filtering-type-"+s.DnsFilterType.NONE,label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_CONTENT_FILTERING_LABEL"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_CONTENT_FILTERING_DESCRIPTION"}),searchIsApplicable:"isUbiOs,isLan"}),n.a.createElement(k.a,{unlimitedWidth:!0},n.a.createElement(He.g,{justifyContent:"space-between",width:"100%",alignItems:"flex-start",flexDirection:"column"},[s.DnsFilterType.NONE,s.DnsFilterType.WORK,s.DnsFilterType.FAMILY].map(a=>{const l=(e=>{switch(e){case s.DnsFilterType.FAMILY:return n.a.createElement(Ve.lc,{width:"35",height:"38"});case s.DnsFilterType.WORK:return n.a.createElement(Ve.q,{width:"51",height:"53"});case s.DnsFilterType.NONE:default:return n.a.createElement(Ve.mb,{width:"40",height:"40"})}})(a),c="SETTINGS_NETWORKS_FORM_FIELD_CONTENT_FILTERING_"+a.toUpperCase(),r=`SETTINGS_NETWORKS_FORM_FIELD_CONTENT_FILTERING_${a.toUpperCase()}_DESCRIPTION`,_=(e=>{switch(e){case s.DnsFilterType.FAMILY:return 70;case s.DnsFilterType.WORK:return 50;case s.DnsFilterType.NONE:default:return 42}})(a);return n.a.createElement(aa,{id:"content-filtering-type-"+a,isSelected:t.contentFilter===a,key:a,field:"contentFilter",icon:l,setFieldValue:e,value:a,title:c,description:r,imgWidth:_})}))))},na=a(44),ca=a(3),ra=a(69);const _a=Object(ca.a)(i.selectHasVpnServerWithType,g.k,E.selectHasSiteUxg,(e,t,a)=>Object(na.a)(l=>ht.filter(({value:n})=>{switch(n){case i.ServerVpnType.L2TP_SERVER:return!e(i.ServerVpnType.L2TP_SERVER,l);case i.ServerVpnType.PPTP_SERVER:return!(e(i.ServerVpnType.PPTP_SERVER,l)||t||a);default:return!0}}))),ia=e=>Object(ca.a)(d.selectSites,i.selectNetworksData,ra.a,g.k,(t,a,l,n)=>{if(n)return[];const c=a.map(e=>e.remote_site_id);return t.filter(t=>{if(t.name===l)return!1;const a=e&&e.remote_site_id===t._id,n="admin"===t.role&&-1===c.indexOf(t._id);return a||n}).map(({desc:e,_id:t})=>({label:e,value:t}))}),Ea=(e,t)=>Object(ca.a)(E.selectSiteGateway,m.e,(a,l)=>l.filter(({configuration:e})=>!Object(i.isUlteFailoverNetwork)(e)).map(l=>{const{configuration:{attr_hidden_id:n,wan_networkgroup:c,wan_ip:r,wan_ip_aliases:_,wan_type:E}}=l,o=n===i.NetworkHiddenId.WAN,s=o?null==a?void 0:a.wan1:null==a?void 0:a.wan2;return E===i.IpV4ConnectionType.DHCP?[{label:`${(null==s?void 0:s.ip)?(null==s?void 0:s.ip)+" ":""}(${o?"WAN1":"WAN2"})`,value:`${t?null==s?void 0:s.ip:"any"}/${c.toLowerCase()}`}]:[(null==s?void 0:s.ip)&&s.ip,...[r,..._].filter(e=>!!e&&e!==(null==s?void 0:s.ip)).map(e=>e.split("/")[0])].map(t=>({label:`${t||e.formatMessage({id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_IP_AUTO_DEFINED"})} (${o?"WAN1":"WAN2"})`,value:`${t||"any"}/${c.toLowerCase()}`}))}).flat().filter(e=>!t||"any"!==String(e.value).split("/")[0]));var oa=a(1764),sa=a(1146);const da=Object(S.c)(He.g)`
  margin-top: 7px;
`,ma=Object(S.c)(Ve.e)`
  color: ${({theme:e})=>e.motifPalette.orange06};
  margin-right: 10px;
`,pa=Object(S.c)(He.g)`
  margin-top: 10px;
`,Sa=Object(S.c)(xe.a)`
  margin: 0 8px;
`,Ta=Object(S.c)(oa.a)`
  margin-bottom: 0px;
`;var ua=Object(T.f)(({vpnInterfaceType:e,vpnLocalWanIp:t,vpnPort:a,intl:c})=>{const{values:_,setFieldValue:E,errors:o,touched:s,submitCount:d}=Object(j.e)(),m=Object(r.useSelector)(kt.D),S=Object(r.useSelector)(Ea(c,t===i.VpnLocalWanIp.IPSEC_LOCAL_IP&&_.ipsec_dynamic_routing)),u=Object(r.useSelector)(i.selectWanNetworks),N=Object(r.useSelector)(kt.S),[b,I]=Object(l.useState)(!1),R=Object(l.useMemo)(()=>Object(Ye.b)(t,o,s,d),[o,d,s,t]),{_id:h,wan_ip:D,attr_hidden_id:F,wan_type:A}=Object(l.useMemo)(()=>u.find(({wan_networkgroup:t})=>t.toLowerCase()===_[e])||{wan_type:i.IpV4ConnectionType.DHCP},[u,_[e]]),g=Object(p.h)("internet/wan/form/"+h,!0),P=Object(l.useCallback)(a=>{const[l,n]=a.split("/");E(t,l),E(e,n)},[E,e,t]),L=Object(l.useMemo)(()=>`${_[t]}/${_[e]}`,[_,e,t]),C=Object(l.useCallback)(e=>{e.preventDefault(),I(e=>(e||"any"===_[t]&&E(t,F===i.NetworkHiddenId.WAN?N.wan1.ip:D),e&&(_[t]!==(F===i.NetworkHiddenId.WAN?N.wan1.ip:D)||(t!==i.VpnLocalWanIp.IPSEC_LOCAL_IP||_.ipsec_dynamic_routing)&&t===i.VpnLocalWanIp.IPSEC_LOCAL_IP||E(t,"any")),!e))},[]),f=A===i.IpV4ConnectionType.DHCP&&!b;return Object(l.useEffect)(()=>{!_[t].length&&S.length&&!b&&m&&E(t,String(S[0].value).split("/")[0])},[_.ipsec_dynamic_routing]),Object(l.useEffect)(()=>{m||E(t,"")},[]),m?n.a.createElement(n.a.Fragment,null,n.a.createElement(K.a,null,n.a.createElement(we.a,{htmlFor:e,alignWith:S.length>1?"input":2,label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_PUBLIC_IP_WAN"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_PUBLIC_IP_WAN_DESCRIPTION"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(He.g,{width:"100%",alignItems:"baseline"},n.a.createElement(He.g,{flexDirection:"column",flex:a?"1 1 55%":"1"},b?n.a.createElement(B.Field,{name:t,full:!0,invalid:R}):n.a.createElement(sa.a,{options:S,width:"100%",onChange:(e,t)=>P(t),label:a&&c.formatMessage({id:"SETTINGS_NETWORKS_FORM_FIELD_OPENVPN_ADDRESS_LABEL"}),value:L,invalid:R}),n.a.createElement(pa,null,n.a.createElement(O.a,{variant:"inline",onClick:C},n.a.createElement(T.c,{id:b?"SETTINGS_NETWORKS_FORM_FIELD_VPN_PUBLIC_IP_WAN_BUTTON_EXISTING":"SETTINGS_NETWORKS_FORM_FIELD_VPN_PUBLIC_IP_WAN_BUTTON_MANUAL"}))),n.a.createElement(Be.a,{wrap:!0,padding:"0",in:R,unmountOnExit:!0,mountOnEnter:!0},n.a.createElement(Ta,null,o[t]))),a&&n.a.createElement(n.a.Fragment,null,n.a.createElement(Sa,null,"/"),n.a.createElement(He.g,{flexDirection:"column",flex:"1 1 35%"},n.a.createElement(B.Field,{full:!0,name:"openvpn_local_port",label:"SETTINGS_NETWORKS_FORM_FIELD_OPENVPN_PORT_LABEL"})))),n.a.createElement(Be.a,{in:f,unmountOnExit:!0,mountOnEnter:!0},n.a.createElement(da,null,n.a.createElement(ma,{width:19,height:19}),n.a.createElement(xe.a,null,n.a.createElement(T.b,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_WAN_DHCP_WARNING",values:{link:g}}))))))):n.a.createElement(K.a,null,n.a.createElement(we.a,{htmlFor:t,alignWith:"input",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_PUBLIC_IP"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,name:t})))}),Oa=a(219);const Na=Object(S.c)(He.g)`
  margin-right: ${({theme:e})=>e.spacing["spacing-xxxxl"]};
`,ba=Object(S.c)("div")`
  margin-top: 48px;
`,Ia=Object(S.c)(He.g)`
  margin-top: 8px;
`,Ra=Object(S.c)(Qe.a)`
  white-space: normal;
  text-transform: none;
  line-height: 1;
`,ha=Object(S.c)(Ve.cb)`
  margin: -5px 0 0 5px;
`,Da=[{id:"ip",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_IP_ADDRESS_TABLE_LABEL_GATEWAY"}),minWidth:150},{id:"broadcastAddress",label:n.a.createElement(He.g,null,n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_IP_ADDRESS_TABLE_LABEL_BOADCAST"}),n.a.createElement(xe.a,null,n.a.createElement(Ra,{width:201,message:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_IP_ADDRESS_TABLE_LABEL_BOADCAST_TOOLTIP"})},n.a.createElement(ha,{isActive:!0})))),minWidth:150},{id:"numIps",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_IP_ADDRESS_TABLE_LABEL_IP_COUNT"}),minWidth:100},{id:"firstHostAddress",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_IP_ADDRESS_TABLE_LABEL_IP_RANGE"}),renderCell:({firstHostAddress:e,lastHostAddress:t})=>n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_IP_ADDRESS_TABLE_CELL_IP_RANGE",values:{first:e,last:t}}),minWidth:200},{id:"netmask",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_IP_ADDRESS_TABLE_LABEL_SUBNET"}),minWidth:150}];var Fa=Object(T.f)(({intl:e})=>{const{values:t,setFieldValue:a,errors:c,initialValues:_,touched:o,setTouched:s,submitCount:d}=Object(j.e)(),m=Object(r.useSelector)(E.selectHasSiteUxg),p=Object(r.useSelector)(A.selectSubnetSuggestions),S=Object(r.useSelector)(i.selectNetworksData),[u,N]=Object(l.useState)(t.ip_subnet.split("/")[0]),[b,I]=Object(l.useState)(t.ip_subnet.split("/")[1]),[R,h]=Object(l.useState)(!1),D=Object(l.useMemo)(()=>{const t=[];for(let a=29;a>=17;a--){const{start:l,stop:n}=Object(Ge.c)(`${u}/${a}`);t.push({label:e.formatMessage({id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_SUBNET_OPTION"},{subnet:a,ips:Object(tt.d)(n)-Object(tt.d)(l)}),value:a.toString()})}return t},[u]);Object(l.useEffect)(()=>{const[e,l]=t.ip_subnet.split("/");if(u!==e||b!==l){const{start:e,stop:t}=Object(Ge.c)(`${u}/${b}`);a("dhcpd_start",e),a("dhcpd_stop",t),a("ip_subnet",`${u}/${b}`)}},[u,a,b,t.ip_subnet]);const F=Object(l.useCallback)(()=>{const e=p.find(({mask:e})=>e.toString()===b);if(null==e?void 0:e.gateways.length){const t=Object($e.a)(e.gateways);N(t),I(e.mask.toString())}},[p,b]),g=Object(l.useMemo)(()=>{const{broadcastAddress:e,netmask:a}=Object(tt.l)(`${u}/${b}`);return[{ip:u,broadcastAddress:e,firstHostAddress:t.dhcpd_start,lastHostAddress:t.dhcpd_stop,numIps:Object(tt.d)(t.dhcpd_stop)-Object(tt.d)(t.dhcpd_start),netmask:a}]},[u,b,t.dhcpd_start,t.dhcpd_stop]),P=Object(l.useMemo)(()=>!!Object(Ye.b)("ip_subnet",c,o,d)&&Object(Ge.a)(S,t.ip_subnet,c.ip_subnet,_.ip_subnet),[c,_.ip_subnet,S,d,o,t.ip_subnet]),L=Object(l.useCallback)(e=>{e.preventDefault(),h(e=>!e)},[]);return n.a.createElement(ba,null,n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isVpnServer",searchText:"SETTINGS_NETWORKS_FORM_FIELD_VPN_GATEWAY_SUBNET_SEARCH",htmlFor:"ip_subnet",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_GATEWAY_SUBNET"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_GATEWAY_SUBNET_DESCRIPTION"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(He.g,{width:"100%"},n.a.createElement(Na,{flexDirection:"column",flex:"1 1 35%"},n.a.createElement(Oa.a,{label:e.formatMessage({id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_GATEWAY_SUBNET_IP_LABEL"}),full:!0,invalid:!!P,onChange:(e,t)=>N(t.toString()),onBlur:()=>s({ip_subnet:!0}),value:u,"data-lpignore":!0}),n.a.createElement(Ia,null,n.a.createElement(O.a,{variant:"inline",onClick:L},n.a.createElement(T.c,{id:R?"SETTINGS_NETWORKS_FORM_FIELD_VPN_HIDE_IP_ADDRESS_TABLE_BUTTON":"SETTINGS_NETWORKS_FORM_FIELD_VPN_SHOW_IP_ADDRESS_TABLE_BUTTON"})))),n.a.createElement(He.g,{flexDirection:"column",flex:"1 1 65%"},n.a.createElement(sa.a,{label:n.a.createElement(He.g,null,n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_GATEWAY_SUBNET_SUBNET_LABEL"}),n.a.createElement(Qe.a,{width:201,message:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_GATEWAY_SUBNET_SUBNET_LABEL_TOOLTIP"})},n.a.createElement(ha,{isActive:!0}))),width:"100%",options:D,value:b,onChange:(e,t)=>{I(t.toString()),s({ip_subnet:!0})}}),n.a.createElement(Ia,{justifyContent:"flex-end"},n.a.createElement(O.a,{variant:"inline",type:"button",onClick:F,Icon:Ve.Fb},n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_AUTO_GENERATE_BUTTON"}))))),n.a.createElement(Be.a,{wrap:!0,padding:"16px 0 0 0",in:!!P},n.a.createElement(xe.a,{color:"danger"},P)))),n.a.createElement(Be.a,{wrap:!0,in:R,mountOnEnter:!0,unmountOnExit:!0},n.a.createElement(x.a,{items:g,columns:Da,idField:"ip",disableColumnFilters:!0,disableSelection:!0,disableHover:!0,disableSort:!0})),n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isVpnServer",searchText:"SETTINGS_NETWORKS_FORM_FIELD_VPN_NAME_SERVER_SEARCH",alignWith:"dropdown",htmlFor:"dhcpd_dns_enabled",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_NAME_SERVER"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,name:"dhcpd_dns_enabled",value:String(t.dhcpd_dns_enabled),options:gt,type:"dropdown",translateOptions:!0,onChange:(e,t)=>{a("dhcpd_dns_enabled","true"===t)}}))),n.a.createElement(Be.a,{in:t.dhcpd_dns_enabled===Rt},n.a.createElement(K.a,null,n.a.createElement(we.a,{alignWith:"input",htmlFor:"dhcpd_dns_1",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_NAME_SERVER_NUMBER",values:{number:1}})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,name:"dhcpd_dns_1"}))),n.a.createElement(K.a,null,n.a.createElement(we.a,{alignWith:"input",htmlFor:"dhcpd_dns_2",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_NAME_SERVER_NUMBER",values:{number:2}})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,name:"dhcpd_dns_2"})))),!m&&n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isVpnServer",alignWith:"toggleSmall",htmlFor:"dhcpd_wins_enabled",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_WINS_SERVER"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_WINS_SERVER_DESCRIPTION"})}),n.a.createElement(k.a,null,n.a.createElement(B.Field,{name:"dhcpd_wins_enabled",type:"checkbox"}))),n.a.createElement(Be.a,{in:t.dhcpd_wins_enabled===Rt},n.a.createElement(K.a,null,n.a.createElement(we.a,{alignWith:"input",htmlFor:"dhcpd_wins_1",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_WINS_SERVER_NUMBER",values:{number:1}})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,name:"dhcpd_wins_1"}))),n.a.createElement(K.a,null,n.a.createElement(we.a,{alignWith:"input",htmlFor:"dhcpd_wins_2",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_WINS_SERVER_NUMBER",values:{number:2}})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,name:"dhcpd_wins_2"})))),!m&&n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isVpnServer",searchText:"SETTINGS_NETWORKS_FORM_FIELD_VPN_SITE_TO_SITE_VPN_DESCRIPTION",alignWith:"toggleSmall",htmlFor:"exposed_to_site_vpn",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_SITE_TO_SITE_VPN"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_SITE_TO_SITE_VPN_DESCRIPTION"})}),n.a.createElement(k.a,null,n.a.createElement(B.Field,{name:"exposed_to_site_vpn",type:"checkbox"}))),n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isVpnServer",searchText:"SETTINGS_NETWORKS_FORM_FIELD_MSCHAP_DESCRIPTION",alignWith:"toggleSmall",htmlFor:"require_mschapv2",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_MSCHAP"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_MSCHAP_DESCRIPTION"})}),n.a.createElement(k.a,null,n.a.createElement(B.Field,{name:"require_mschapv2",type:"checkbox"}))))}),Aa=a(2206);const ga=Object(S.c)("div")`
  margin-bottom: 5px;
`,Pa=Object(S.c)("div")`
  margin: 0 10px;
  cursor: pointer;
`,La=[{id:"name",label:n.a.createElement(T.c,{id:"COMMON_LABEL_USERNAME"}),sortable:!0,minWidth:160},{id:"x_password",label:n.a.createElement(T.c,{id:"COMMON_LABEL_PASSWORD"}),renderCell:({_id:e,x_password:t,isPasswordShown:a,togglePassword:l})=>n.a.createElement(He.g,{justifyContent:"space-between",alignItems:"center",width:"100%"},n.a.createElement(xe.a,{truncate:!0},t),n.a.createElement(Pa,null,a?n.a.createElement(Ve.Q,{onClick:()=>l(e)}):n.a.createElement(Ve.P,{onClick:()=>l(e)}))),minWidth:180}];var Ca=()=>{const e=Object(r.useSelector)(I.selectAccounts),t=Object(c.k)(),[a,_]=Object(l.useState)([]),{networkId:i}=Object(c.m)(),E=Object(p.h)(`networks/form/${i||0}/${yt.CREATE_RADIUS_USER}`),o=Object(l.useCallback)(e=>{a.includes(e)?_(a.filter(t=>t!==e)):_([...a,e])},[a]),s=Object(l.useMemo)(()=>e.map(e=>{const t=a.includes(e._id);return{...e,x_password:t?e.x_password:"".repeat(e.x_password.length),isPasswordShown:t,togglePassword:o}}),[e,o,a]),d=Object(l.useCallback)(e=>{e.preventDefault(),t.push(E)},[t,E]);return n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isVpnServer",htmlFor:"radiusProfileUsers",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_RADIUS_USER_LIST"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_RADIUS_USER_LIST_DESCRIPTION"})}),n.a.createElement(k.a,{column:!0},!!s.length&&n.a.createElement(ga,null,n.a.createElement(Aa.a,{items:s,columns:La,idField:"name",disableColumnFilters:!0})),n.a.createElement(O.a,{name:"createRADIUSUser",variant:"inline",onClick:d,Icon:n.a.createElement(Ve.ub,{isActive:!0})},n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_RADIUS_USER_CREATE_NEW"}))))};const fa=Object(S.c)(He.g)`
  margin-top: 5px;
`,Ma=Object(S.c)(xe.a)`
  border-bottom: 1px solid ${({theme:e})=>e.motifPalette.ui07};
  padding-bottom: 12px;
  margin-bottom: 34px;
`,va=Object(S.c)(He.g)`
  margin-bottom: 32px;
`,Ga=Object(S.c)(Ve.cb)`
  margin-right: 9px;
`;var Wa=()=>{var e;const{values:t,setFieldValue:a}=Object(j.e)(),c=Object(r.useSelector)(_a)(t._id),_=Object(r.useSelector)(s.selectRadiusSettings),o=Object(r.useSelector)(h.selectRadiusProfiles),d=Object(p.h)("advanced/radius/profile/form/",!0),m=Object(r.useSelector)(E.selectIsUbiOS),S=Object(l.useMemo)(()=>{const e=o.find(e=>e.attr_no_delete);return t.radiusprofile_id===e._id},[o,t.radiusprofile_id]),N=Object(l.useMemo)(()=>o.map(({_id:e,name:t})=>({label:t,value:e})),[o]);Object(l.useEffect)(()=>{c[0]&&!c.some(({value:e})=>e===t.vpn_type)&&a("vpn_type",c[0]&&c[0].value),a("radiusprofile_id",Object(u.a)(t,"radiusprofile_id",N[0]&&N[0].value))},[]);const b=Object(l.useMemo)(()=>[{id:"advanced-options",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_ADVANCED_LABEL"}),renderContent:()=>n.a.createElement(Fa,null)}],[]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(K.a,{disabled:!!t._id},n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isVpnServer",alignWith:"dropdown",htmlFor:"vpn_type",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_PROTOCOL"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_PROTOCOL_DESCRIPTION"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,name:"vpn_type",options:c,type:"dropdown",translateOptions:!0,disabled:!!t._id}))),t.vpn_type===i.ServerVpnType.L2TP_SERVER&&n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isVpnServerL2tpNetwork",searchText:"SETTINGS_NETWORKS_FORM_FIELD_PRE_SHARED_KEY_SEARCH",alignWith:"input",htmlFor:"x_ipsec_pre_shared_key",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_PRE_SHARED_KEY"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_PRE_SHARED_KEY_DESCRIPTION"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{type:"password",name:"x_ipsec_pre_shared_key",passwordToggle:!0}))),m&&n.a.createElement(ua,{vpnInterfaceType:i.VpnInterfaceType.L2TP_INTERFACE,vpnLocalWanIp:i.VpnLocalWanIp.L2TP_LOCAL_WAN_IP}),n.a.createElement(Ma,{size:"body",color:"header"},n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_VPN_USER_ACCESS_LABEL"})),n.a.createElement(Be.a,{in:S&&!_.enabled},n.a.createElement(va,{alignItems:"center"},n.a.createElement(Ga,{isActive:!0}),n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_VPN_USER_ACCESS_RADIUS_DISABLE_MESSAGE"}))),n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isVpnServer",alignWith:"dropdown",htmlFor:"radiusprofile_id",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_RADIUS_PROFILE"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_RADIUS_PROFILE_DESCRIPTION"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{name:"radiusprofile_id",options:N,type:"dropdown",full:!0}),n.a.createElement(fa,{alignItems:"center"},n.a.createElement(O.a,{variant:"inline",href:d,target:"_blank",Icon:n.a.createElement(Ve.hb,{isActive:!0})},n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_RADIUS_PROFILE_CREATE_NEW"}))))),n.a.createElement(Be.a,{in:S},n.a.createElement(n.a.Fragment,null,!(null===(e=_.x_secret)||void 0===e?void 0:e.length)&&n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isVpnServer",alignWith:"input",htmlFor:"radiusServerSecret",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_RADIUS_SECRET"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_RADIUS_SECRET_DESCRIPTION"})}),n.a.createElement(k.a,null,n.a.createElement(B.Field,{name:"radiusServerSecret",full:!0,type:"password",passwordToggle:!0}))),n.a.createElement(Ca,null))),n.a.createElement(je.SearchableAccordion,{items:b,variant:"secondary"}))};var ja=()=>{const{values:e,initialValues:t,setFieldValue:a}=Object(j.e)(),c=Object(l.useMemo)(()=>ia(t),[t]),_=Object(r.useSelector)(c);return Object(l.useEffect)(()=>{a("remote_site_id",Object(u.a)(e,"remote_site_id",_[0]&&_[0].value))},[]),n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isVpnSiteToSiteAutoIpsec",alignWith:"dropdown",htmlFor:"remote_site_id",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_REMOTE_SITE"})}),n.a.createElement(k.a,null,n.a.createElement(B.Field,{full:!0,name:"remote_site_id",options:_,type:"dropdown"})))},ya=a(2039);var Va=Object(T.f)(({intl:e})=>{const{setFieldValue:t,values:a,errors:c,touched:r,submitCount:_}=Object(j.e)(),[i,E]=Object(l.useState)(""),{remote_vpn_subnets:o}=a,s=Object(l.useMemo)(()=>Object(Ye.b)("remote_vpn_subnets",c,r,_),[c,_,r]),d=i.trim(),m=Object(l.useMemo)(()=>!d||Object(ya.a)(d),[d]),p=Object(l.useMemo)(()=>d&&!o.includes(d)&&m,[d,o,m]),S=Object(l.useMemo)(()=>o?o.map(e=>({label:e,value:e})):[],[o]);p&&S.splice(0,0,{label:`${e.formatHTMLMessage({id:"COMMON_ACTION_CREATE"})} "${d}"`,value:d});const O=Object(l.useCallback)((e,t="")=>{E(t)},[]),N=Object(l.useCallback)((e,a)=>{t("remote_vpn_subnets",a),E("")},[t,E]),b=Object(l.useCallback)(e=>{"Enter"===e.key&&p&&N({label:d,value:d},o.concat(d))},[p,d,o,N]);return Object(l.useEffect)(()=>{t("remote_vpn_subnets",Object(u.a)(a,"remote_vpn_subnets",[]))},[]),n.a.createElement(K.a,null,n.a.createElement(we.a,{alignWith:"dropdown",htmlFor:"remote_vpn_subnets",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_REMOTE_SUBNETS"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_REMOTE_SUBNETS_DESCRIPTION"})}),n.a.createElement(k.a,{wrap:!0},n.a.createElement(B.Field,{full:!0,inputProps:{full:!0,onKeyDown:b,value:i},invalid:!m||s,multi:!0,name:"remote_vpn_subnets",onChange:N,onInputChange:O,options:S,searchable:!0,selectionItemWidth:"auto",type:"dropdown"}),n.a.createElement(Be.a,{wrap:!0,in:!m||s},n.a.createElement(oa.a,null,!m&&n.a.createElement(T.c,{id:"COMMON_VALIDATION_VALID_NETWORK_SUBNET"})||s&&Object(u.a)(c,"remote_vpn_subnets")))))});const wa=Object(S.c)(xe.a)`
  border-bottom: 1px solid ${({theme:e})=>e.motifPalette.ui07};
  padding-bottom: 12px;
  margin-bottom: 34px;
`;var xa=()=>n.a.createElement(n.a.Fragment,null,n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isVpnSiteToSiteManualIpsec",alignWith:"input",htmlFor:"x_ipsec_pre_shared_key",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_PRE_SHARED_KEY"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_PRE_SHARED_KEY_DESCRIPTION"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,type:"password",name:"x_ipsec_pre_shared_key",passwordToggle:!0}))),n.a.createElement(ua,{vpnInterfaceType:i.VpnInterfaceType.IPSEC_INTERFACE,vpnLocalWanIp:i.VpnLocalWanIp.IPSEC_LOCAL_IP}),n.a.createElement(wa,{size:"body",color:"header"},n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_VPN_REMOTE_DEVICE_CONFIGURATION_LABEL"})),n.a.createElement(Va,null),n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isVpnSiteToSiteManualIpsec",alignWith:"input",htmlFor:"ipsec_peer_ip",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_PEER_IP"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_PEER_IP_DESCRIPTION"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,name:"ipsec_peer_ip"}))));const Ua=Object(S.c)(K.a)`
  margin-top: ${({theme:e})=>e.spacing["spacing-xxxxl"]};
`;var Ka=()=>{const{values:e,setValues:t}=Object(j.e)(),a=Object(r.useSelector)(g.k),c=Object(l.useMemo)(()=>a?Ct:Lt,[a]),_=Object(l.useMemo)(()=>a?Mt:ft,[a]),i=Object(l.useCallback)((a,l)=>{switch(l){case ut.AZURE_DYNAMIC:return t({...e,ipsec_profile:l,ipsec_key_exchange:"ikev2",ipsec_encryption:"aes256",ipsec_hash:"sha1",ipsec_dh_group:2,ipsec_pfs:!0,ipsec_dynamic_routing:!0});case ut.AZURE_STATIC:return t({...e,ipsec_profile:l,ipsec_key_exchange:"ikev1",ipsec_encryption:"aes256",ipsec_hash:"sha1",ipsec_dh_group:2,ipsec_pfs:!1,ipsec_dynamic_routing:!1});default:return t({...e,ipsec_profile:l})}},[t,e]);return Object(l.useEffect)(()=>{t({...e,route_distance:Object(u.a)(e,"route_distance",30),ipsec_profile:Object(u.a)(e,"ipsec_profile",ut.CUSTOMIZED),ipsec_key_exchange:Object(u.a)(e,"ipsec_key_exchange",Pt[0].value),ipsec_encryption:Object(u.a)(e,"ipsec_encryption",c[0].value),ipsec_hash:Object(u.a)(e,"ipsec_hash",_[0].value),ipsec_pfs:Object(u.a)(e,"ipsec_pfs",!0),ipsec_dynamic_routing:Object(u.a)(e,"ipsec_dynamic_routing",!0),ipsec_ike_dh_group:Object(u.a)(e,"ipsec_ike_dh_group",jt[3].value),ipsec_esp_dh_group:Object(u.a)(e,"ipsec_esp_dh_group",Wt[3].value),ipsec_dh_group:Object(u.a)(e,"ipsec_dh_group",Gt[3].value)})},[]),n.a.createElement(w.a,{padding:"none"},n.a.createElement(Ua,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isVpnSiteToSiteManualIpsec",alignWith:"dropdown",htmlFor:"ipsec_profile",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_IPSEC_PROFILE"})}),n.a.createElement(k.a,null,n.a.createElement(B.Field,{full:!0,name:"ipsec_profile",options:At,type:"dropdown",translateOptions:!0,onChange:i}))),n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isVpnSiteToSiteManualIpsec",alignWith:"input",htmlFor:"route_distance",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_ROUTE_DISTANCE"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{name:"route_distance",type:"number",full:!0,contentAfter:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_ROUTE_DISTANCE_UNIT_LABEL"})}))),n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isVpnSiteToSiteManualIpsec",alignWith:"dropdown",htmlFor:"ipsec_key_exchange",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_KEY_EXCHANGE_VERSION"})}),n.a.createElement(k.a,null,n.a.createElement(B.Field,{full:!0,name:"ipsec_key_exchange",options:Pt,type:"dropdown"}))),n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isVpnSiteToSiteManualIpsec",searchText:"SETTINGS_NETWORKS_FORM_FIELD_ENCRYPTION_VPN_MANUAL_IPSEC_SEARCH",alignWith:"dropdown",htmlFor:"ipsec_encryption",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_ENCRYPTION"})}),n.a.createElement(k.a,null,n.a.createElement(B.Field,{full:!0,name:"ipsec_encryption",options:c,type:"dropdown"}))),n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isVpnSiteToSiteManualIpsec",searchText:"SETTINGS_NETWORKS_FORM_FIELD_HASH_VPN_MANUAL_IPSEC_SEARCH",alignWith:"dropdown",htmlFor:"ipsec_hash",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_HASH"})}),n.a.createElement(k.a,null,n.a.createElement(B.Field,{full:!0,name:"ipsec_hash",options:_,type:"dropdown"}))),a?n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isUdm,isVpnSiteToSiteManualIpsec",alignWith:"dropdown",htmlFor:"ipsec_ike_dh_group",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_IKE_DH_GROUP"})}),n.a.createElement(k.a,null,n.a.createElement(B.Field,{full:!0,name:"ipsec_ike_dh_group",options:jt,type:"dropdown"}))):n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isNotUdm,isVpnSiteToSiteManualIpsec",alignWith:"dropdown",htmlFor:"ipsec_encryption",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_DH_GROUP"})}),n.a.createElement(k.a,null,n.a.createElement(B.Field,{full:!0,name:"ipsec_dh_group",options:Gt,type:"dropdown"}))),a&&n.a.createElement(K.a,{disabled:!e.ipsec_pfs},n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isUdm,isVpnSiteToSiteManualIpsec",alignWith:"dropdown",htmlFor:"ipsec_esp_dh_group",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_ESP_DH_GROUP"})}),n.a.createElement(k.a,null,n.a.createElement(B.Field,{full:!0,name:"ipsec_esp_dh_group",options:Wt,type:"dropdown",disabled:!e.ipsec_pfs}))),n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isVpnSiteToSiteManualIpsec",alignWith:"toggleSmall",htmlFor:"ipsec_pfs",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_PFS"})}),n.a.createElement(k.a,null,n.a.createElement(B.Field,{name:"ipsec_pfs",type:"checkbox"}))),n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isVpnSiteToSiteManualIpsec",alignWith:"toggleSmall",htmlFor:"ipsec_dynamic_routing",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_DYNAMIC_ROUTING"})}),n.a.createElement(k.a,null,n.a.createElement(B.Field,{name:"ipsec_dynamic_routing",type:"checkbox"}))))},ka=a(1917);const Ha=Object(S.c)("div")`
  margin-top: 32px;
`,Ba=Object(S.c)(xe.a)`
  border-bottom: 1px solid ${({theme:e})=>e.motifPalette.ui07};
  padding-bottom: 12px;
  margin-bottom: 34px;
`,$a=Object(S.c)(xe.a)`
  margin: 0 8px;
`,Ya=[{id:"advanced",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_ADVANCED_LABEL"}),renderContent:()=>n.a.createElement(Ha,null,n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isNotUdm,isVpnSiteToSiteOpen",alignWith:"input",htmlFor:"route_distance",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_ROUTE_DISTANCE"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{name:"route_distance",type:"number",full:!0,contentAfter:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_ROUTE_DISTANCE_UNIT_LABEL"})}))))}];var za=()=>{const e=Object(r.useSelector)(g.k);return n.a.createElement(n.a.Fragment,null,n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isVpnSiteToSiteOpen",searchText:"SETTINGS_NETWORKS_FORM_FIELD_OPENVPN_SHARED_SECRET_KEY_SEARCH",alignWith:"input",htmlFor:"x_openvpn_shared_secret_key",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_PRE_SHARED_KEY"}),description:n.a.createElement(T.b,{id:"SETTINGS_NETWORKS_FORM_FIELD_PRE_SHARED_KEY_OPEN_VPN_DESCRIPTION",values:{link:Ue.a.openVpnSiteToSiteGuide}})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{type:"password",name:"x_openvpn_shared_secret_key",passwordToggle:!0}))),n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isVpnSiteToSiteOpen",alignWith:"input",htmlFor:"openvpn_local_address",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_OPENVPN_LOCAL_ADDRESS"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_OPENVPN_LOCAL_ADDRESS_DESCRIPTION"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(He.g,{width:"100%",alignItems:"baseline"},n.a.createElement(He.g,{flexDirection:"column",flex:"1 1 55%"},n.a.createElement(B.Field,{full:!0,name:"openvpn_local_address",label:"SETTINGS_NETWORKS_FORM_FIELD_OPENVPN_ADDRESS_LABEL"})),n.a.createElement($a,null,"/"),n.a.createElement(He.g,{flexDirection:"column",flex:"1 1 35%"},n.a.createElement(B.Field,{full:!0,name:"openvpn_local_port",label:"SETTINGS_NETWORKS_FORM_FIELD_OPENVPN_LOCAL_PORT"}))))),n.a.createElement(Ba,{size:"body",color:"header"},n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_VPN_REMOTE_DEVICE_CONFIGURATION_LABEL"})),n.a.createElement(Va,null),n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isVpnSiteToSiteOpen",alignWith:"input",htmlFor:"openvpn_remote_host",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_OPENVPN_REMOTE_HOST"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_OPENVPN_REMOTE_HOST_DESCRIPTION"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,name:"openvpn_remote_host"}))),n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isVpnSiteToSiteOpen",alignWith:"input",htmlFor:"openvpn_remote_address",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_OPENVPN_REMOTE_ADDRESS"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_OPENVPN_REMOTE_ADDRESS_DESCRIPTION"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(He.g,{width:"100%",alignItems:"baseline"},n.a.createElement(He.g,{flexDirection:"column",flex:"1 1 55%"},n.a.createElement(B.Field,{full:!0,name:"openvpn_remote_address",label:"SETTINGS_NETWORKS_FORM_FIELD_OPENVPN_ADDRESS_LABEL"})),n.a.createElement($a,null,"/"),n.a.createElement(He.g,{flexDirection:"column",flex:"1 1 35%"},n.a.createElement(B.Field,{full:!0,name:"openvpn_remote_port",label:"SETTINGS_NETWORKS_FORM_FIELD_OPENVPN_PORT_LABEL"}))))),!e&&n.a.createElement(ka.a,{variant:"secondary",items:Ya}))};var Xa=()=>{const{initialValues:e,values:t,setFieldValue:a}=Object(j.e)(),{vpn_type:c}=t,_=Object(l.useMemo)(()=>{return t=e,Object(ca.a)(g.k,E.selectHasSiteUxg,ia(t),(e,t,a)=>e||t||!a.length?Dt.filter(({value:e})=>e!==i.SiteToSiteVpnType.AUTO_IPSEC_VTI):Dt);var t},[e]),o=Object(r.useSelector)(_),s=Object(l.useMemo)(()=>{switch(c){case i.SiteToSiteVpnType.AUTO_IPSEC_VTI:return n.a.createElement(ja,null);case i.SiteToSiteVpnType.MANUAL_IPSEC:return n.a.createElement(n.a.Fragment,null,n.a.createElement(xa,null),n.a.createElement(je.SearchableAccordion,{items:[{id:"advanced",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_ADVANCED_LABEL"}),renderContent:()=>n.a.createElement(Ka,null)}],variant:"secondary"}));case i.SiteToSiteVpnType.OPEN_VPN:return n.a.createElement(za,null);default:return null}},[c]);return Object(l.useEffect)(()=>{o[0]&&!o.some(({value:e})=>e===t.vpn_type)&&a("vpn_type",o[0]&&o[0].value)},[]),n.a.createElement(n.a.Fragment,null,n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isVpnSiteToSite",alignWith:"dropdown",htmlFor:"vpn_type",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_PROTOCOL"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_PROTOCOL_DESCRIPTION"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,name:"vpn_type",options:o,type:"dropdown",translateOptions:!0,disabled:!!t._id}))),s)};const qa=Object(S.c)(xe.a)`
  border-bottom: 1px solid ${({theme:e})=>e.motifPalette.ui07};
  padding-bottom: 12px;
  margin-bottom: 34px;
`,Za=Object(S.c)(K.a)`
  margin-top: 32px;
`,Ja=[{id:"advanced",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_ADVANCED_LABEL"}),renderContent:()=>n.a.createElement(n.a.Fragment,null,n.a.createElement(Za,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isVpnClient",alignWith:"input",htmlFor:"pptpc_route_distance",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_ROUTE_DISTANCE"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{name:"pptpc_route_distance",type:"number",contentAfter:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_ROUTE_DISTANCE_UNIT_LABEL"})}))),n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isVpnClient",alignWith:"toggleSmall",htmlFor:"pptpc_require_mppe",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_PPTC_MPPE"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_PPTC_MPPE_DESCRIPTION"})}),n.a.createElement(k.a,null,n.a.createElement(B.Field,{name:"pptpc_require_mppe",type:"checkbox"}))),n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isVpnClient",searchText:"SETTINGS_NETWORKS_FORM_FIELD_VPN_PULL_DNS_SEARCH",alignWith:"toggleSmall",htmlFor:"vpn_client_pull_dns",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_PULL_DNS"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_PULL_DNS_DESCRIPTION"})}),n.a.createElement(k.a,null,n.a.createElement(B.Field,{name:"vpn_client_pull_dns",type:"checkbox"}))))}];var Qa=()=>{const{values:e,setFieldValue:t}=Object(j.e)(),{vpn_client_default_route:a}=e;return Object(l.useEffect)(()=>{Ft.some(({value:t})=>t===e.vpn_type)||t("vpn_type",i.ClientVpnType.PPTP_CLIENT),t("vpn_client_default_route",Object(u.a)(e,"vpn_client_default_route",!1))},[]),n.a.createElement(n.a.Fragment,null,n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isVpnClient",alignWith:"dropdown",htmlFor:"vpn_type",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_PROTOCOL"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_PROTOCOL_DESCRIPTION"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{full:!0,name:"vpn_type",options:Ft,type:"dropdown",translateOptions:!0,disabled:!!e._id}))),n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isVpnClient",alignWith:"toggleSmall",htmlFor:"vpn_client_default_route",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_DEFAULT_ROUTE"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_DEFAULT_ROUTE_DESCRIPTION"})}),n.a.createElement(k.a,null,n.a.createElement(B.Field,{name:"vpn_client_default_route",type:"checkbox"}))),n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isVpnClient",searchText:"SETTINGS_NETWORKS_FORM_FIELD_VPN_PPTC_SERVER_SEARCH",alignWith:"input",htmlFor:"pptpc_server_ip",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_PPTC_SERVER"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_PPTC_SERVER_DESCRIPTION"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{name:"pptpc_server_ip"}))),n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isVpnClient",searchText:"SETTINGS_NETWORKS_FORM_FIELD_VPN_PPTC_USERNAME_SEARCH",alignWith:"input",htmlFor:"pptpc_username",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_PPTC_USERNAME"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{name:"pptpc_username"}))),n.a.createElement(K.a,null,n.a.createElement(je.SearchableGridLabel,{searchIsApplicable:"isVpnClient",searchText:"SETTINGS_NETWORKS_FORM_FIELD_VPN_PPTC_PASSWORD_SEARCH",alignWith:"input",htmlFor:"x_pptpc_password",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_PPTC_PASSWORD"})}),n.a.createElement(k.a,{column:!0},n.a.createElement(B.Field,{type:"password",name:"x_pptpc_password",passwordToggle:!0}))),!a&&n.a.createElement(n.a.Fragment,null,n.a.createElement(qa,{size:"body",color:"header"},n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_VPN_REMOTE_DEVICE_CONFIGURATION_LABEL"})),n.a.createElement(Va,null)),n.a.createElement(ka.a,{variant:"secondary",items:Ja}))};var el=Object(T.f)(({intl:e})=>{const{values:t,setFieldValue:a}=Object(j.e)(),c=Object(l.useContext)(He.l),_=Object(r.useSelector)(_a)(t._id),E=Object(r.useSelector)(g.k),o=Object(l.useMemo)(()=>{switch(t.purpose){case i.NetworkPurpose.REMOTE_USER_VPN:return Wa;case i.NetworkPurpose.SITE_VPN:return Xa;case i.NetworkPurpose.VPN_CLIENT:return Qa;default:return()=>null}},[t.purpose]),s=Object(l.useMemo)(()=>{const e=[{icon:n.a.createElement(Ve.mb,{width:40,height:40}),optionTranslationString:"NONE",value:i.NetworkPurpose.CORPORATE},{icon:n.a.createElement(Ve.Nb,{width:51,height:46}),optionTranslationString:"SITE_TO_SITE",value:i.NetworkPurpose.SITE_VPN},...E?[]:[{icon:n.a.createElement(Ve.pc,{width:46,height:41}),optionTranslationString:"CLIENT",value:i.NetworkPurpose.VPN_CLIENT}]];return _.length&&e.splice(1,0,{icon:n.a.createElement(Ve.Gb,{width:53,height:46}),optionTranslationString:"SERVER",value:i.NetworkPurpose.REMOTE_USER_VPN}),e},[E,_.length]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(w.a,{padding:"none"},n.a.createElement(K.a,{disabled:!!t._id||c},n.a.createElement(we.a,{alignWith:"dropdown",htmlFor:"purpose",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_CONNECTION"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_CONNECTION_DESCRIPTION"})}),n.a.createElement(k.a,{unlimitedWidth:!0},n.a.createElement(He.g,{justifyContent:"space-between",width:"100%",alignItems:"flex-start",flexDirection:"column"},s.map(e=>{const l="SETTINGS_NETWORKS_FORM_FIELD_VPN_TYPE_"+e.optionTranslationString,c=`SETTINGS_NETWORKS_FORM_FIELD_VPN_TYPE_${e.optionTranslationString}_DESCRIPTION`;return n.a.createElement(aa,{id:"vpn-type-"+e.value,isSelected:t.purpose===e.value,key:e.value,field:"purpose",icon:e.icon,setFieldValue:a,value:e.value,title:l,description:c})})))),n.a.createElement(Be.a,{in:t.purpose!==i.NetworkPurpose.CORPORATE,wrap:!0,flexDirection:"column"},n.a.createElement(o,null))))});var tl=({hiddenId:e})=>{const t=Object(l.useRef)(null),a=Object(r.useSelector)(E.selectIsUbiOS),{errors:c,values:{gateway_type:_,purpose:o,vpn_type:s},initialValues:d}=Object(j.e)(),m=Object(l.useMemo)(()=>[i.NetworkPurpose.REMOTE_USER_VPN,i.NetworkPurpose.SITE_VPN,i.NetworkPurpose.VPN_CLIENT].includes(o),[o]),S=m&&!!s,u=m&&!!s,O=o===i.NetworkPurpose.GUEST||d._id&&!m||_===i.NetworkGatewayType.switch,N=Object(l.useMemo)(()=>[{id:"vpn-settings",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_VPN_SETTINGS_LABEL"}),renderContent:()=>n.a.createElement(el,null),disabled:O},a&&{id:"content-filtering",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_CONTENT_FILTERING_LABEL"}),description:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_CONTENT_FILTERING_DESCRIPTION"}),renderContent:()=>n.a.createElement(la,null),disabled:u},{id:"advanced",label:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_ADVANCED_LABEL"}),renderContent:()=>n.a.createElement(zt,{hiddenId:e}),disabled:S}].filter(e=>!!e),[e,S,u,O,a]);return Object(p.f)(t,c),n.a.createElement("div",{ref:t},n.a.createElement(qt,null),n.a.createElement(w.a,{padding:"none"},n.a.createElement(je.SearchableAccordion,{items:N,variant:"primary",multiOpen:!0,closeDisabled:!0})))},al=a(2370),ll=a(2207);const nl=Object(S.c)(al.a)`
  position: absolute;
  top: 0;
  left: 0;
`;var cl=()=>{const e=Object(c.k)(),{networkId:t}=Object(c.m)(),a=Object(p.h)(`networks/form/${t||0}/${yt.VPN_SETUP}`),r=Object(l.useCallback)(t=>{t.preventDefault(),e.push(a)},[e,a]);return n.a.createElement(nl,null,n.a.createElement(ll.a,null),n.a.createElement(xe.a,null,n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_VPN_SETUP_BANNER"})),n.a.createElement(O.a,{variant:"inline",onClick:r},n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_VPN_SETUP_BANNER_BUTTON"})))},rl=a(1759);const _l=Object(S.c)(rl.a)`
  width: 512px;
`,il=Object(S.c)(xe.a)`
  margin: 21px 0 35px;
`,El=Object(S.c)(Oa.a)`
  margin-bottom: 44px;
`,ol=Object(S.c)(sa.a)`
  margin-bottom: 25px;
`,sl=Object(S.c)(Oa.a)`
  margin-bottom: 25px;
`,dl=Object(S.c)(xe.a)`
  margin-bottom: 25px;
`,ml=Object(S.c)(Ve.cb)`
  margin-right: 7px;
`,pl=Object(S.c)(He.g)`
  margin: 16px 0 25px;
`,Sl=Object(S.c)(Ve.e)`
  color: ${({theme:e})=>e.motifPalette.orange06};
  margin-right: 10px;
`,Tl=Object(S.c)("input")`
  background: none;
  border: none;
  color: ${({theme:e})=>e.motifPalette.uBlue06};
  padding: 1px 3px;
  cursor: pointer;
`;var ul=Object(T.f)(({onClose:e,intl:t})=>{const{values:a}=Object(j.e)(),_=Object(r.useSelector)(h.selectRadiusProfiles),i=Object(r.useSelector)(I.selectAccounts),E=Object(c.k)(),[o,s]=Object(l.useState)(i[0]||void 0),d=Object(r.useSelector)(Ea(t)),m=Object(l.useMemo)(()=>_.find(e=>e._id===a.radiusprofile_id),[_,a.radiusprofile_id]),S=Object(l.useMemo)(()=>i.map(e=>({label:e.name,value:e._id})),[i]),u=Object(l.useCallback)(e=>{const t=i.find(t=>t._id===e);s(t)},[i]),O=Object(p.h)("advanced/radius/form"),N=Object(l.useCallback)(()=>{E.push(O)},[E,O]),b=Object(l.useMemo)(()=>{const e=d.find(e=>e.value===`${a.l2tp_local_wan_ip}/${a.l2tp_interface}`);return(null==e?void 0:e.label.split("(")[0])||a.l2tp_local_wan_ip},[a.l2tp_interface,a.l2tp_local_wan_ip,d]);return n.a.createElement(_l,{isOpen:!0,title:t.formatMessage({id:"SETTINGS_NETWORKS_VPN_SETUP_MODAL_TITLE"}),onRequestClose:e,actions:[{style:{minWidth:142},text:t.formatMessage({id:"COMMON_ACTION_DONE"}),type:"button",variant:"primary",onClick:()=>e()}]},n.a.createElement(il,{color:"header"},t.formatMessage({id:"SETTINGS_NETWORKS_VPN_SETUP_MODAL_DESCRIPTION"})),n.a.createElement(El,{label:t.formatMessage({id:"SETTINGS_NETWORKS_FORM_FIELD_VPN_PROTOCOL"}),helperMessage:t.formatMessage({id:"SETTINGS_NETWORKS_VPN_SETUP_MODAL_IP_ADDRESS_DESCRIPTION"}),value:a.vpn_type.split("-")[0].toUpperCase(),readOnly:!0,width:"100%"}),n.a.createElement(El,{label:t.formatMessage({id:"SETTINGS_NETWORKS_VPN_SETUP_MODAL_IP_ADDRESS_LABEL"},{wan:a.l2tp_interface.toUpperCase()}),helperMessage:t.formatMessage({id:"SETTINGS_NETWORKS_VPN_SETUP_MODAL_IP_ADDRESS_DESCRIPTION"}),value:b,readOnly:!0,width:"100%"}),n.a.createElement(El,{passwordToggle:!0,type:"password",label:t.formatMessage({id:"SETTINGS_NETWORKS_FORM_FIELD_PRE_SHARED_KEY"}),helperMessage:t.formatMessage({id:"SETTINGS_NETWORKS_VPN_SETUP_MODAL_SHARE_SECRET_DESCRIPTION"}),value:a.x_ipsec_pre_shared_key,readOnly:!0,width:"100%"}),n.a.createElement(dl,{color:"header"},t.formatMessage({id:"SETTINGS_NETWORKS_VPN_SETUP_MODAL_USER_AUTHENTICATION_TITLE"})),m.attr_no_delete&&(S.length?n.a.createElement(n.a.Fragment,null,n.a.createElement(ol,{label:t.formatMessage({id:"COMMON_LABEL_USERNAME"}),width:"100%",options:S,onChange:(e,t)=>u(t),value:o._id}),n.a.createElement(sl,{passwordToggle:!0,type:"password",label:t.formatMessage({id:"SETTINGS_NETWORKS_VPN_SETUP_MODAL_USER_PASSWORD_LABEL"}),value:o.x_password,readOnly:!0,width:"100%"})):n.a.createElement(n.a.Fragment,null,n.a.createElement(Oa.a,{label:t.formatMessage({id:"SETTINGS_NETWORKS_VPN_SETUP_MODAL_USER_PROFILE_LABEL"}),value:m.name,readOnly:!0,width:"100%"}),n.a.createElement(pl,{alignItems:"flex-start"},n.a.createElement(n.a.Fragment,null,n.a.createElement(Sl,{width:19,height:19}),n.a.createElement(xe.a,{color:"header"},t.formatMessage({id:"SETTINGS_NETWORKS_VPN_SETUP_MODAL_NO_RADIUS_USERS_MESSAGE_PART_1"}),n.a.createElement(Tl,{type:"button",value:t.formatMessage({id:"SETTINGS_NETWORKS_VPN_SETUP_MODAL_NO_RADIUS_USERS_MESSAGE_PART_2"}),onClick:N})))))),!m.attr_no_delete&&n.a.createElement(n.a.Fragment,null,n.a.createElement(Oa.a,{label:t.formatMessage({id:"SETTINGS_NETWORKS_VPN_SETUP_MODAL_USER_PROFILE_LABEL"}),value:m.name,readOnly:!0,width:"100%"}),n.a.createElement(pl,{alignItems:"flex-start"},n.a.createElement(n.a.Fragment,null,n.a.createElement(ml,{isActive:!0}),n.a.createElement(xe.a,{color:"header"},n.a.createElement(T.b,{id:"SETTINGS_NETWORKS_VPN_SETUP_MODAL_EXTERNAL_RADIUS_SERVER_MESSAGE"}))))),n.a.createElement(He.g,{alignItems:"flex-start"},n.a.createElement(ml,{isActive:!0}),n.a.createElement(xe.a,{color:"header"},n.a.createElement(T.b,{id:"SETTINGS_NETWORKS_VPN_SETUP_MODAL_LEARN_MORE",values:{link:"https://www.ui.com"}}))))});const Ol=Object(S.c)(P.b)`
  width: 100%;
`;var Nl=Object(T.f)(e=>{const{initialValues:t,hiddenId:a,intl:m,onBack:S}=e,P=Object(r.useSelector)(D.u),j=Object(r.useSelector)(g.k),y=Object(r.useSelector)(E.selectIsUbiOS),V=Object(l.useMemo)(()=>Object(i.selectNetworksInGroupWithoutVlan)(t.networkgroup||i.NetworkHiddenId.LAN),[t.networkgroup]),w=Object(r.useSelector)(V),x=Object(r.useSelector)(i.selectVlansInUse),U=Object(r.useSelector)(s.selectIpsSettings),K=Object(r.useSelector)(o.c),k=Object(r.useSelector)(s.selectHotspotSettings),H=Object(r.useSelector)(E.selectWanInterfaceOptions),{networkId:B,modalType:$}=Object(c.m)(),Y=Object(u.a)(U,"dns_filters",[]),z=Y.find(({network_id:e})=>e===t._id)||{allowed_sites:[],blocked_sites:[],blocked_tld:[],description:"",filter:s.DnsFilterType.NONE,version:"v4"},X=Object(c.k)(),q=`${Object(p.h)("networks/form")}${B&&"0"!==B?"/"+B:""}`,Z=Object(l.useCallback)(()=>X.push(q),[X,q]),J=Object(r.useSelector)(s.selectRadiusSettings),Q=Object(r.useSelector)(h.selectRadiusProfiles),ee=Object(r.useSelector)(d.selectSites),te=Object(r.useSelector)(i.selectNetworksData),ae=te.reduce((e,a)=>(a.ip_subnet&&a.ip_subnet!==t.ip_subnet&&e.push(a.ip_subnet),e),[]),le=Object(r.useSelector)(A.selectSubnetSuggestions).find(({mask:e})=>24===e)||{mask:24,gateways:[""]},ne=`${le.gateways[0]}/${le.mask}`,{start:ce,stop:re}=Object(Ge.c)(t.ip_subnet||ne),_e=!!w.length&&!w.find(({_id:e})=>e===t._id),ie=j?b.a.MAX_VLAN_UDM:b.a.MAX_VLAN,Ee=_e?[...Array(ie-b.a.MIN_VLAN)].map((e,t)=>t+b.a.MIN_VLAN).find(e=>!x.includes(e)):void 0,oe=Object(r.useDispatch)(),se=Object(p.m)({component:n.a.createElement(T.c,{id:"SETTINGS_NETWORKS_FORM_TITLE_CREATE"}),message:"networks-create"},"networks-edit-view",t?t.name:void 0),de=Object(l.useMemo)(()=>{var e;let a=i.DhcpRelayMode.NONE;t.dhcpd_enabled&&(a=i.DhcpRelayMode.ENABLED),t.dhcp_relay_enabled&&(a=i.DhcpRelayMode.RELAY);const l=t._id?Object(i.networkInitialValues)(t.purpose):{};t._id&&(l.auto_scale_enabled=null!==(e=t.auto_scale_enabled)&&void 0!==e&&e);const n=te.filter(({wan_networkgroup:e,wan_type:t})=>H.some(({label:a})=>a===e&&[i.IpV4ConnectionType.STATIC,i.IpV4ConnectionType.PPPOE].includes(t)));let c;return c=t.nat_outbound_ip_addresses?t.nat_outbound_ip_addresses.map(e=>{var t;return{...e,ip_adress:e.ip_address?e.ip_address:null===(t=n.find(t=>t.wan_networkgroup===e.wan_network_group))||void 0===t?void 0:t.wan_ip}}):n.map(({wan_networkgroup:e,wan_ip:t})=>({wan_network_group:e,ip_address:t})),c=c.filter(e=>e.ip_address),{...i.vpnDefaultValues,...l,gateway_device:"",...t,contentFilter:z.filter,ipv6_interface_type:t.ipv6_interface_type||i.IPV6_INTERFACE_TYPES.NONE,ip_subnet:t.ip_subnet||ne,dhcpd_start:t.dhcpd_start||ce,dhcpd_stop:t.dhcpd_stop||re,vlan:t.vlan||Ee,dhcp_mode:a,...Kt(a),allowedSubnets:Object(M.d)(k,"allowed_subnet_"),restrictedSubnets:Object(M.d)(k,"restricted_subnet_"),nat_outbound_ip_addresses:c,radiusServerSecret:J.x_secret||""}},[t,te,z.filter,ne,ce,re,Ee,k,J.x_secret,H]),me=Object(l.useCallback)(Object(C.c)(e)(async({allowedSubnets:e,restrictedSubnets:a,...l})=>{const n=Object(v.a)(l);if(n.vpn_type===i.SiteToSiteVpnType.AUTO_IPSEC_VTI){const{_id:e,name:a,remote_site_id:l}=n,c={name:a,site:l};try{return e&&l!==t.remote_site_id&&await oe(Object(F.e)(t)),await oe(Object(F.b)(c)),oe(Object(L.c)({icon:f.a.success,message:"SETTINGS_NETWORKS_CREATE_FORM_SAVE_SUCCESS",values:{name:a}})),oe(Object(i.fetchNetworks)())}catch(o){return oe(Object(L.c)({icon:f.a.danger,message:"SETTINGS_NETWORKS_CREATE_FORM_SAVE_ERROR",values:{name:a},errorMessage:N.a[o.apiMsg],errorValues:o})),Promise.reject()}}const c=n._id?i.updateNetwork:i.createNetwork;if(oe(Object(A.clearSubnetSuggestions)()),n.vpn_type){const e=Q.find(e=>e.attr_no_delete);if(!J.enabled&&n.radiusprofile_id===e._id){const{name:e}=n;try{const e={...J,enabled:!0,x_secret:l.radiusServerSecret,key:"radius"};await oe(Object(s.saveSettings)(e))}catch(o){return oe(Object(L.c)({icon:f.a.danger,message:"SETTINGS_NETWORKS_CREATE_FORM_SAVE_ERROR",values:{name:e},errorMessage:N.a[o.apiMsg],errorValues:o})),Promise.reject()}}return oe(c(n,{},i.saveToastsWithErr))}if(K&&n.purpose===i.NetworkPurpose.GUEST){const t=Object(M.b)(k,"allowed_subnet_"),l=Object(M.b)(k,"restricted_subnet_"),n=Object(M.a)(e,"allowed_subnet_",t),c=Object(M.a)(a,"restricted_subnet_",l),r={...Object(M.c)(k,"allowed_subnet","restricted_subnet"),...n,...c};await oe(Object(s.saveSettings)(r))}const r=await oe(c(n,{},i.saveToastsWithErr)),_=Object(u.a)(r,"data[0]._id",Object(u.a)(r,"_id")),E=y?{...U,dns_filtering:!0,dns_filters:Y.filter(({network_id:e})=>e!==_).concat({...z,filter:l.contentFilter,network_id:_,name:""})}:U;return oe(Object(s.saveSettings)(E))}),[oe,Y,z,t,y]),pe=Object(l.useMemo)(()=>Object(We.b)(_e,x,!P,j,t.vlan,m,ae,y,a),[_e,x,P,j,t.vlan,m,ae,y,a]),Se=[Object(R.fetchDhcpOptions)({crudCacheStrategy:{type:_.a.CACHE}}),Object(E.fetchDevices)(void 0,{crudCacheStrategy:{type:_.a.CACHE}}),Object(d.fetchSites)(void 0,{crudCacheStrategy:{type:_.a.CACHE}}),Object(s.fetchSettings)({type:_.a.CACHE}),Object(I.fetchAccounts)(void 0,{crudCacheStrategy:{type:_.a.CACHE}})];P||Se.push(Object(A.fetchSubnetSuggestions)());const Te=Object(l.useCallback)(({_id:e,name:t})=>{oe(Object(i.deleteNetwork)(e,{name:t})),oe(Object(s.saveSettings)({...U,dns_filtering:!0,dns_filters:U.dns_filters.filter(({network_id:t})=>t!==e)})),S()},[oe,U,S]),ue=Object(l.useCallback)(()=>oe(Object(W.b)({name:null==t?void 0:t.name,onConfirm:()=>Object(Ge.e)(t)?oe(Object(F.e)(t,i.deleteToastsWithErr)).then(()=>S()):Te(t)})),[oe,t,S,Te]),Oe=Object(i.isVpnRemovable)(t,ee);return Object(p.e)(Se,n.a.createElement(Ol,{goBack:S,initialValues:de,isEdit:!P,isView:P,showBack:!0,title:se,validationSchema:pe,onEscClicked:S,onSubmit:me,enableReinitialize:!0,unsavedChangesModalIgnoredPaths:[/networks\/form(\/([\w-_]+)){2,3}$/],submitText:(null==t?void 0:t._id)?"COMMON_ACTION_APPLY_CHANGES":"SETTINGS_NETWORKS_FORM_ADD",footerActiveOverride:!!(null==t?void 0:t._id)&&Oe,customFooterButtons:e=>(null==t?void 0:t._id)&&Oe&&n.a.createElement(O.a,{disabled:e,type:"button",variant:"default",onClick:ue},n.a.createElement(T.c,{id:"COMMON_ACTION_REMOVE"}))},t.vpn_type===i.ServerVpnType.L2TP_SERVER&&n.a.createElement(cl,null),n.a.createElement(tl,{hiddenId:a}),$===yt.CREATE_DHCP_OPTION&&n.a.createElement(ve,{onClose:Z}),$===yt.CREATE_RADIUS_USER&&n.a.createElement(G.a,{simpleForm:!0,onClose:Z}),$===yt.VPN_SETUP&&n.a.createElement(ul,{onClose:Z})))});t.default=()=>{const{networkId:e}=Object(c.m)(),t=Object(r.useSelector)(i.selectNetworksData).find(t=>t._id===e),a=Object(p.g)();return Object(p.e)([Object(i.fetchNetworks)(void 0,{crudCacheStrategy:{type:_.a.CACHE}}),Object(E.fetchDevices)(),Object(d.fetchSites)(void 0,{crudCacheStrategy:{type:_.a.CACHE}}),Object(o.a)({type:_.a.COMBINED,interval:8e3}),Object(s.fetchSettings)({type:_.a.CACHE}),Object(m.b)(void 0,{crudCacheStrategy:{type:_.a.CACHE}})],n.a.createElement(Nl,{initialValues:t||Object(i.networkInitialValues)(i.NetworkPurpose.CORPORATE),hiddenId:t?t.attr_hidden_id:void 0,onBack:a}))}},1982:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return _})),a.d(t,"c",(function(){return i}));var l=a(18),n=function(e,t){var a=t.successMessage,l=t.failureMessage;if((a||l)&&!e.createToast)throw new Error("formSubmit util requires createToast action as a prop. Please add it to mapDispatchToProps")},c=function(e){return function(t){return function(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r,_){var i=_.props||t;n(i,c);var E=i.createToast,o="function"==typeof c?c(r):c,s=o.msgValues,d=o.successMessage,m=o.failureMessage;a(r,i,_).then((function(){return d&&E({icon:l.a.success,message:d,values:s}),e(_,t)})).catch((function(e){m&&E({icon:l.a.danger,message:m,values:s,errorMessage:e.msg,errorValues:e}),_.setSubmitting(!1)}))}}}},r=c((function(e){return e.setStatus({isSubmitted:!0})}))(),_=c((function(e){return e.setStatus({isSubmitted:!0})})),i=(c((function(e){return e.props.onClose()}))(),c((function(e,t){return t.onBack()})))},2030:function(e,t,a){"use strict";a.d(t,"d",(function(){return d})),a.d(t,"a",(function(){return m})),a.d(t,"c",(function(){return p})),a.d(t,"b",(function(){return S})),a.d(t,"e",(function(){return T}));var l=a(15),n=a.n(l),c=a(172),r=a.n(c),_=a(100),i=a.n(_),E=a(670);function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d=function(e,t){return Object.entries(e||{}).reduce((function(e,a){var l=i()(a,2),n=l[0],c=l[1];return n.startsWith(t)&&c?[].concat(r()(e),[c]):e}),[])},m=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",n=a>e.length?Array.from(Array(a),(function(t,a){return a<e.length?e[a]:l})):e;return n.reduce((function(e,a,l){return e[t+(l+1)]=a,e}),{})},p=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),l=1;l<t;l++)a[l-1]=arguments[l];return Object.entries(e||{}).reduce((function(e,t){var l=i()(t,2),n=l[0],c=l[1];return a.find((function(e){return n.startsWith(e)}))||(e[n]=c),e}),{})},S=function(e,t){return Object.keys(e).reduce((function(e,a){return a.startsWith(t)?e+1:e}),0)},T=function(e,t){return s(s({},e),Object.entries(Object(E.a)(e,t)).reduce((function(e,t){var a=i()(t,2),l=a[0],c=a[1];return s(s({},e),{},n()({},l,null===c?"":c))}),{}))}},2157:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));a(1207);var l=function(e){return e[Math.floor(Math.random()*e.length)]}},2206:function(e,t,a){"use strict";var l=a(0),n=a.n(l),c=a(1860),r=a(1969),_=a(5);const i=Object(_.c)("div",{shouldForwardProp:e=>!["height","maxWidth","headerHeight"].includes(e)})`
  height: ${({height:e})=>e}px;
  ${({maxWidth:e})=>e?`max-width: ${e}px;`:""}
  ${({headerHeight:e})=>e?`table {\n    th {\n      height: ${e}px !important;\n    }\n  }`:""}
`;t.a=function({maxRows:e=6,headerHeight:t,maxWidth:a,forwardedRef:_,rowHeight:E,items:o,...s}){const d=Object(l.useMemo)(()=>r.b.getHeight(o.length,6,t,E)+1,[t,o.length,E]);return n.a.createElement(i,{height:d,maxWidth:a,headerHeight:t},n.a.createElement(c.a,Object.assign({ref:_,rowHeight:E,items:o},s)))}},2207:function(e,t,a){"use strict";var l=a(0),n=a.n(l),c=a(5);const r=Object(c.c)("div")`
  background: ${({theme:e})=>e.motifPalette.info};
  margin-right: ${({theme:e})=>e.spacing["spacing-s"]};
  border-radius: 50%;
  width: 16px;
  height: 16px;
  color: ${({theme:e})=>e.motifPalette.white};
  text-align: center;
  font-size: ${({theme:e})=>e.fontSize["font-size-xs"]};
  position: relative;

  &::after {
    content: 'i';
    position: absolute;
    display: block;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
  }
`;t.a=()=>n.a.createElement(r,null)},2254:function(e,t,a){"use strict";var l=a(0),n=a.n(l),c=a(5),r=a(52),_=a(4),i=a(8),E=a(31),o=a(45),s=a(1154),d=a(23),m=a(49),p=a(660),S=a(170),T=a(394),u=a(97),O=a(98),N=a(464),b=a(95),I=a(54),R=a(64),h=a(30);const D=(e,t)=>e.map(e=>({value:e.value,label:t.formatMessage({id:e.label},{id:e.values?e.values.id:void 0})})),F=e=>{if(e)return{...e,tunnel_type:""!==e.tunnel_type?e.tunnel_type:0,tunnel_medium_type:""!==e.tunnel_medium_type?e.tunnel_medium_type:0}},A=Object(c.c)(m.a)`
  width: 100%;
  text-align: center;
`,g=Object(c.c)(I.Field,{shouldForwardProp:e=>"hasHelperMessage"!==e})`
  margin-top: 28px;
  ${({hasHelperMessage:e})=>e&&"margin-bottom: 40px;"}
`,P=Object(c.c)(p.a)`
  margin: 14px auto 10px 0;
  display: flex;
  justify-content: flex-end;
`,L=Object(c.c)("div")`
  margin-right: auto;
`,C=Object(c.c)("div")`
  margin: 60px 0 30px;
`,f=Object(s.a)(e=>h.a.object().shape({name:h.a.string().label("SETTINGS_RADIUS_USERS_CREATE_USER_FORM_NAME_LABEL").required().matches(O.x,n.a.createElement(_.c,{id:"SETTINGS_RADIUS_USERS_NAME_VALIDATION_MESSAGE"})),x_password:h.a.string().label("SETTINGS_RADIUS_USERS_CREATE_USER_FORM_PASSWORD_LABEL").required().min(4),vlan:Object(h.f)(e),tunnel_type:h.a.number().when("tunnel_medium_type",{is:e=>e!==T.NONE_VALUE,then:h.a.number().label("SETTINGS_RADIUS_USERS_TUNNEL_TYPE_LABEL").min(1).required()}),tunnel_medium_type:h.a.number().when("tunnel_type",{is:e=>e!==T.NONE_VALUE,then:h.a.number().label("SETTINGS_RADIUS_USERS_TUNNEL_MEDIUM_TYPE_LABEL").min(1).required()})},["tunnel_type","tunnel_medium_type"]));var M=Object(_.f)(({intl:e,simpleForm:t=!1,onClose:a})=>{const{userId:c}=Object(E.m)(),r=Object(i.useDispatch)(),s=Object(i.useSelector)(T.selectAccountById)(c),m=Object(i.useSelector)(u.k),p=Object(R.h)("advanced/radius/form"),O=D(T.tunnelTypeOptions,e),I=D(T.tunnelMediumTypeOptions,e),h=Object(l.useMemo)(()=>({name:"",x_password:"",vlan:"",tunnel_type:0,tunnel_medium_type:0,...F(s)}),[s]),M=f(m),v=Object(l.useCallback)((e,{setSubmitting:t})=>{const l={...e,tunnel_type:0!==e.tunnel_type?e.tunnel_type:"",tunnel_medium_type:0!==e.tunnel_medium_type?e.tunnel_medium_type:""};s?r(Object(T.updateAccount)(s._id,l)).then(()=>a()).catch(()=>t(!1)):r(Object(T.saveAccount)(l)).then(()=>a()).catch(()=>t(!1))},[a,r,s]),G=Object(l.useCallback)(e=>{e.preventDefault(),a()},[a]),W=Object(l.useCallback)(()=>{r(Object(N.b)({name:h.name,onConfirm:()=>r(Object(T.removeAccount)(h._id,h.name)).then(a())}))},[r,h._id,h.name]);return n.a.createElement(o.c,{initialValues:h,onSubmit:v,validationSchema:M},({handleSubmit:a})=>n.a.createElement("form",{autoComplete:"off",onSubmit:a},n.a.createElement(A,{size:"body"},n.a.createElement(_.c,{id:s?"SETTINGS_ADVANCED_RADIUS_USERS_FROM_TITLE_EDIT":"SETTINGS_ADVANCED_RADIUS_USERS_FROM_TITLE_ADD"})),n.a.createElement(g,{label:"SETTINGS_ADVANCED_RADIUS_USERS_FROM_LABEL_NAME",name:"name",type:"input",full:!0}),n.a.createElement(g,{hasHelperMessage:!0,label:"SETTINGS_ADVANCED_RADIUS_USERS_FROM_LABEL_PASSWORD",name:"x_password",type:"password",passwordToggle:!0,full:!0,helperMessage:n.a.createElement(_.c,{id:"SETTINGS_ADVANCED_RADIUS_USERS_FROM_LABEL_PASSWORD_DESCRIPTION"})}),!t&&n.a.createElement(n.a.Fragment,null,n.a.createElement(g,{label:"SETTINGS_ADVANCED_RADIUS_USERS_FROM_LABEL_VLAN",name:"vlan",type:"input",full:!0}),n.a.createElement(g,{label:e.formatMessage({id:"SETTINGS_ADVANCED_RADIUS_USERS_FROM_LABEL_TUNNEL_TYPE"}),type:"dropdown",name:"tunnel_type",options:O,full:!0,validated:!0}),n.a.createElement(g,{label:e.formatMessage({id:"SETTINGS_ADVANCED_RADIUS_USERS_FROM_LABEL_TUNNEL_MEDIUM_TYPE"}),type:"dropdown",name:"tunnel_medium_type",options:I,full:!0,validated:!0})),t&&n.a.createElement(C,null,n.a.createElement(S.a,{variant:"inline",href:"/network"+p,target:"_blank"},n.a.createElement(b.g,{alignItems:"center"},n.a.createElement(d.hb,null),n.a.createElement(_.c,{id:"SETTINGS_ADVANCED_RADIUS_USERS_FROM_LABEL_LINK_RADIUS_FORM"})))),n.a.createElement(P,null,!t&&h._id&&n.a.createElement(L,null,n.a.createElement(S.a,{type:"button",variant:"default",onClick:W},n.a.createElement(_.c,{id:"COMMON_ACTION_REMOVE"}))),n.a.createElement(S.a,{type:"button",variant:"default",onClick:G},n.a.createElement(_.c,{id:"COMMON_ACTION_CANCEL"})),n.a.createElement(S.a,{type:"submit",variant:"primary"},n.a.createElement(_.c,{id:s?"COMMON_ACTION_APPLY_CHANGES":"SETTINGS_ADVANCED_RADIUS_USERS_FROM_LABEL_BUTTON_CREATE_USER"})))))});const v=Object(c.c)(r.a)`
  overflow: visible;
  padding: 24px 45px;
`;t.a=({simpleForm:e,onClose:t})=>n.a.createElement(v,{size:"small",onRequestClose:t},n.a.createElement(M,{simpleForm:e,onClose:t}))},2370:function(e,t,a){"use strict";var l=a(0),n=a.n(l),c=a(1),r=a.n(c),_=a(7),i=a.n(_),E=a(40),o=a(58),s=a(215),d=a(25);Object(d.a)(".banner__ypd1iNzO{position:relative;display:block;overflow:hidden;width:100%;height:50px;-webkit-animation:banner_appearance_animation__ypd1iNzO .45s cubic-bezier(.6,0,.3,1);animation:banner_appearance_animation__ypd1iNzO .45s cubic-bezier(.6,0,.3,1);transition:height .45s cubic-bezier(.6,0,.3,1)}.banner-light__ypd1iNzO .container__ypd1iNzO{background:#fff;border-bottom:1px solid #7e8190}.banner-dark__ypd1iNzO .container__ypd1iNzO{background:#151725;border-bottom:1px solid #1c1e2d}.banner__ypd1iNzO .container__ypd1iNzO{position:absolute;bottom:0;left:0;display:flex;width:100%;height:50px;align-items:center;justify-content:space-between}.banner__ypd1iNzO.closed__ypd1iNzO{height:0;-webkit-animation:none;animation:none}.icon__ypd1iNzO{color:#a4a7b5;margin-right:30px}.spacer__ypd1iNzO{width:46px}.content__ypd1iNzO{display:flex;width:100%;align-items:center;justify-content:center}.content__ypd1iNzO>*{margin-left:10px}.content__ypd1iNzO>:first-child{margin-left:0}@-webkit-keyframes banner_appearance_animation__ypd1iNzO{0%{height:0}to{height:50px}}@keyframes banner_appearance_animation__ypd1iNzO{0%{height:0}to{height:50px}}");var m={banner:"banner__ypd1iNzO",banner_appearance_animation:"banner_appearance_animation__ypd1iNzO","banner-light":"banner-light__ypd1iNzO",container:"container__ypd1iNzO","banner-dark":"banner-dark__ypd1iNzO",closed:"closed__ypd1iNzO",icon:"icon__ypd1iNzO",spacer:"spacer__ypd1iNzO",content:"content__ypd1iNzO"};const p=n.a.forwardRef(({className:e,motif:t,onClose:a,children:c,isOpen:r},_)=>{const[o,d]=Object(l.useState)(!1),{motif:p}=Object(E.a)(t),S=void 0===r?o:!r,T=void 0!==r,u=Object(l.useCallback)(()=>{T?a&&a():d(!0)},[T,a]);return n.a.createElement("div",{onTransitionEnd:T?void 0:a,ref:_,className:i()(m.banner,m["banner-"+p],e,{[m.closed]:S})},n.a.createElement("div",{className:i()(m.container)},n.a.createElement("div",{className:m.spacer}),n.a.createElement("span",{className:i()(m.content,m[p])},c),n.a.createElement(s.a,{actionable:!0,className:m.icon,onClick:u})))});p.propTypes={motif:r.a.oneOf(["light","dark"]),children:r.a.node,className:r.a.string,onClose:r.a.func,forwardedRef:o.d};t.a=p}}]);