(window.webpackJsonpunifiNetworkUi=window.webpackJsonpunifiNetworkUi||[]).push([[78],{1822:function(e,t,a){"use strict";a.r(t);var _=a(0),r=a.n(_),n=a(171),l=a(64),c=a(2),i=a(4),E=a(8),s=a(31),A=a(170),o=a(13),S=a(1945),d=a(464),I=a(21),m=a(18),R=a(5),u=a(45),O=a(1154),D=a(230),L=a.n(D),T=a(1754),p=a(1753),N=a(1924),b=a(1755),h=a(49),F=a(98),v=a(42),P=a(1950),C=a(1954),g=a(54),V=a(30),M=a(2216);const U=Object(R.c)(T.a)`
  height: 100%;
  margin-bottom: 0 !important;
`,f=[{id:"ip",label:r.a.createElement(i.c,{id:"SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_LABEL_IP_ADDRESS"}),renderCell:({ip:e})=>e,sortable:!1,minWidth:120},{id:"port",label:r.a.createElement(i.c,{id:"SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_LABEL_PORT"}),renderCell:({port:e})=>e,sortable:!1,minWidth:80},{id:"x_secret",label:r.a.createElement(i.c,{id:"SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_LABEL_PASSWORD"}),renderCell:({x_secret:e})=>e.replace(/./g,"•"),sortable:!1,minWidth:180}],B=[{id:"ip",label:r.a.createElement(i.c,{id:"SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_LABEL_IP_ADDRESS"}),renderCell:({ip:e})=>e,sortable:!1,minWidth:120},{id:"port",label:r.a.createElement(i.c,{id:"SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_LABEL_PORT"}),renderCell:({port:e})=>e,sortable:!1,minWidth:80},{id:"x_secret",label:r.a.createElement(i.c,{id:"SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_LABEL_PASSWORD"}),renderCell:({x_secret:e})=>e.replace(/./g,"•"),sortable:!1,minWidth:180}],G={authIp:"SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_LABEL_IP_ADDRESS",authPort:"SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_LABEL_PORT",authX_secret:"SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_LABEL_PASSWORD"},x={acctIp:"SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_LABEL_IP_ADDRESS",acctPort:"SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_LABEL_PORT",acctX_secret:"SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_LABEL_PASSWORD"},j=Object(O.a)(e=>[{inline:!0,name:"auth_server"===e?"authIp":"acctIp",placeholder:"SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_LABEL_IP_ADDRESS",type:"text",validated:!0,autoComplete:"disabled"},{inline:!0,name:"auth_server"===e?"authPort":"acctPort",placeholder:"SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_LABEL_PORT",type:"text",validated:!0},{inline:!0,name:"auth_server"===e?"authX_secret":"acctX_secret",placeholder:"SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_LABEL_PASSWORD",type:"password",validated:!0}]),w=V.a.object().shape({editActive:V.a.bool(),ip:V.a.string().label("SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_LABEL_IP_ADDRESS").when("editActive",{is:!1,then:V.a.string().label("SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_LABEL_IP_ADDRESS").required().matches(F.h,r.a.createElement(i.c,{id:"COMMON_VALIDATION_VALID_IPV4"}))}).when("auth_servers",{is:[],then:V.a.string().label("SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_LABEL_IP_ADDRESS").required().matches(F.h,r.a.createElement(i.c,{id:"COMMON_VALIDATION_VALID_IPV4"}))}),port:V.a.number().label("SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_LABEL_PORT").when("editActive",{is:!1,then:V.a.number().label("SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_LABEL_PORT").min(n.RADIUS_LIMITS.MIN_PORT).max(n.RADIUS_LIMITS.MAX_PORT).required()}),x_secret:V.a.string().label("SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_LABEL_PASSWORD").when("editActive",{is:!1,then:V.a.string().label("SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_LABEL_PASSWORD").required()}),auth_servers:V.a.array().of(M.c)}),y=V.a.object().shape({editActive:V.a.bool(),accounting_enabled:V.a.bool(),ip:V.a.string().label("SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_LABEL_IP_ADDRESS").when("editActive",{is:!1,then:V.a.string().label("SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_LABEL_IP_ADDRESS").required().matches(F.h,r.a.createElement(i.c,{id:"COMMON_VALIDATION_VALID_IPV4"}))}),port:V.a.number().label("SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_LABEL_PORT").when("editActive",{is:!1,then:V.a.number().label("SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_LABEL_PORT").min(n.RADIUS_LIMITS.MIN_PORT).max(n.RADIUS_LIMITS.MAX_PORT)}),x_secret:V.a.string().label("SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_LABEL_PASSWORD").when("editActive",{is:!1,then:V.a.string().label("SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_LABEL_PASSWORD").required()}),acct_servers:V.a.array().of(M.c)}),W=Object(O.a)((e,t)=>({editActive:!1,authIp:"",authPort:t.auth_port,authX_secret:"",auth_servers:e.auth_servers})),k=Object(O.a)((e,t)=>({editActive:!1,acctIp:"",acctPort:t.acct_port,acctX_secret:"",acct_servers:e.acct_servers,accounting_enabled:e.accounting_enabled}));var X=({authError:e,acctError:t})=>{const a=Object(u.e)(),{setFieldValue:n,values:l}=a,c=Object(E.useSelector)(v.selectRadiusSettings),s=Object(_.useCallback)(e=>{n("auth_servers",(e.auth_servers||[]).concat({ip:e.authIp,port:e.authPort,x_secret:e.authX_secret,id:L()()}))},[n]),A=Object(_.useCallback)(e=>{n("acct_servers",(e.acct_servers||[]).concat({ip:e.acctIp,port:e.acctPort,x_secret:e.acctX_secret,id:L()()}))},[n]),o=Object(_.useCallback)((e,t)=>n(t,[...e]),[n]),S=Object(_.useCallback)((e,t)=>n(t,l[t].filter(({id:t})=>t!==e.id)),[n,l]);return r.a.createElement(p.a,{padding:"none"},e&&!l.auth_servers.length&&r.a.createElement(U,null,r.a.createElement(N.a,null),r.a.createElement(b.a,{wrap:!0},r.a.createElement(h.a,{color:"danger"},e)," ")),r.a.createElement(T.a,null,r.a.createElement(N.a,{alignWith:"input",htmlFor:"auth_servers",label:r.a.createElement(i.c,{id:"SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_SECTION_AUTH_SERVERS"})}),r.a.createElement(b.a,{wrap:!0},r.a.createElement(P.d,{fieldName:"auth_servers",columns:f,fieldLabels:G,initialValues:W(l,c),items:l.auth_servers||[],newFields:j("auth_server"),validationSchema:w,onAddItem:e=>s(e),onEditSubmit:e=>o(e,"auth_servers"),onRemoveItem:e=>S(e,"auth_servers"),max:4}))),r.a.createElement(T.a,null,r.a.createElement(N.a,{alignWith:"toggleSmall",htmlFor:"accounting_enabled",label:r.a.createElement(i.c,{id:"SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_LABEL_ENABLE_ACCOUNTING"})}),r.a.createElement(b.a,null,r.a.createElement(g.Field,{name:"accounting_enabled",type:"checkbox"}))),l.accounting_enabled&&t&&!l.acct_servers.length&&r.a.createElement(U,null,r.a.createElement(N.a,null),r.a.createElement(b.a,{wrap:!0},r.a.createElement(h.a,{color:"danger"},t)," ")),r.a.createElement(C.a,{in:l.accounting_enabled},r.a.createElement(T.a,null,r.a.createElement(N.a,{alignWith:"input",htmlFor:"acct_servers",label:r.a.createElement(i.c,{id:"SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_SECTION_ACCOUNTING_SERVERS"})}),r.a.createElement(b.a,{wrap:!0},r.a.createElement(P.d,{fieldName:"acct_servers",columns:B,fieldLabels:x,initialValues:k(l,c),items:l.acct_servers||[],newFields:j("acct_server"),validationSchema:y,onAddItem:e=>A(e),onEditSubmit:e=>o(e,"acct_servers"),onRemoveItem:e=>S(e,"acct_servers"),max:4})))),r.a.createElement(T.a,null,r.a.createElement(N.a,{alignWith:"toggleSmall",htmlFor:"interim_update_enabled",label:r.a.createElement(i.c,{id:"SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_LABEL_ENABLE_INTERIM_UPDATE"})}),r.a.createElement(b.a,null,r.a.createElement(g.Field,{name:"interim_update_enabled",type:"checkbox"}))),r.a.createElement(C.a,{in:l.interim_update_enabled},r.a.createElement(T.a,null,r.a.createElement(N.a,{alignWith:"input",htmlFor:"interim_update_interval",label:r.a.createElement(i.c,{id:"SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_LABEL_INTERIM_UPDATE_INTERVAL"})}),r.a.createElement(b.a,{column:!0},r.a.createElement(g.Field,{type:"number",full:!0,name:"interim_update_interval"})))))};const q=e=>e.map(({id:e,...t})=>({...t}));var K=a(1917);var H=()=>r.a.createElement(p.a,null,r.a.createElement(T.a,null,r.a.createElement(N.a,{alignWith:"input",htmlFor:"name",label:r.a.createElement(i.c,{id:"SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_LABEL_NAME"})}),r.a.createElement(b.a,{column:!0},r.a.createElement(g.Field,{name:"name",type:"input",full:!0}))),r.a.createElement(T.a,null,r.a.createElement(N.a,{alignWith:"toggleSmall",htmlFor:"vlan_enabled",label:r.a.createElement(i.c,{id:"SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_LABEL_ENABLE_WIRED"}),description:r.a.createElement(i.c,{id:"SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_DESCRIPTION_ENABLE_WIRED"})}),r.a.createElement(b.a,null,r.a.createElement(g.Field,{name:"vlan_enabled",type:"checkbox"}))),r.a.createElement(T.a,null,r.a.createElement(N.a,{alignWith:"toggleSmall",htmlFor:"vlan_wlan_mode",label:r.a.createElement(i.c,{id:"SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_LABEL_ENABLE_WIRELESS"}),description:r.a.createElement(i.c,{id:"SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_DESCRIPTION_ENABLE_WIRELESS"})}),r.a.createElement(b.a,null,r.a.createElement(g.Field,{name:"vlan_wlan_mode",type:"checkbox"}))));var $=({items:e,openAccordions:t,setOpenAccordions:a})=>{const n=Object(_.useRef)(null),{errors:c}=Object(u.e)();return Object(l.f)(n,c),r.a.createElement("div",{ref:n},r.a.createElement(H,null),r.a.createElement(K.a,{items:e,variant:"primary",openPanelIds:t,onClickPanel:e=>a(e)}))};const z=(e,t)=>e.includes(t)?e.filter(e=>e!==t):[...e,t];var Y=Object(i.f)(({intl:e})=>{const{profileId:t}=Object(s.m)(),a=Object(E.useDispatch)(),c=Object(E.useSelector)(o.u),R=Object(E.useSelector)(n.selectRadiusProfile)(t),[u,O]=Object(_.useReducer)(z,[]),[D,T]=Object(_.useState)(),[p,N]=Object(_.useState)(),b=Object(_.useMemo)(()=>(e=>({attr_no_delete:!1,attr_hidden_id:"",name:"",use_usg_auth_server:!1,auth_servers:[],acct_servers:[],vlan_enabled:!1,vlan_wlan_mode:!1,accounting_enabled:!1,interim_update_enabled:!1,interim_update_interval:"3600",...e?{...e,auth_servers:e.auth_servers.map(e=>({...e,id:L()()})),acct_servers:e.acct_servers.map(e=>({...e,id:L()()})),vlan_wlan_mode:e.vlan_wlan_mode===n.RADIUS_VLAN_OPTIONS.ENABLED}:{}}))(R),[R]),h=Object(l.g)(),F=Object(l.m)({component:r.a.createElement(i.c,{id:"SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_TITLE"}),message:"radius-profile"},"radius-profile",(null==R?void 0:R._id)?R.name:void 0),v=Object(_.useCallback)((t,{setSubmitting:_})=>{if(!t.auth_servers.length||t.accounting_enabled&&!t.acct_servers.length)return u.includes("radius-profile-settings")||O("radius-profile-settings"),!t.auth_servers.length&&T(e.formatMessage({id:"SETTINGS_ADVANCED_RADIUS_PROFILE_SERVER_ERROR"},{name:e.formatMessage({id:"SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_SECTION_AUTH_SERVER"})})),t.accounting_enabled&&!t.acct_servers.length&&N(e.formatMessage({id:"SETTINGS_ADVANCED_RADIUS_PROFILE_SERVER_ERROR"},{name:e.formatMessage({id:"SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_SECTION_ACCOUNTING_SERVER"})})),void _(!1);const r={...t,vlan_wlan_mode:t.vlan_wlan_mode?n.RADIUS_VLAN_OPTIONS.ENABLED:n.RADIUS_VLAN_OPTIONS.DISABLED,auth_servers:q(t.auth_servers),acct_servers:t.accounting_enabled?q(t.acct_servers):[]};a(Object(n.saveRadiusProfile)(r)).then(()=>{a(Object(I.c)({icon:m.a.success,message:"SETTINGS_ADVANCED_RADIUS_SERVER_FORM_TOAST_SAVE_SUCCESS"})),h()}).catch(e=>{a(Object(I.c)({errorMessage:e.msg,errorValues:e,icon:m.a.danger,message:"SETTINGS_ADVANCED_RADIUS_SERVER_FORM_TOAST_SAVE_FAILURE"})),_(!1)})},[a,h,e,u]),P=Object(_.useMemo)(()=>[{id:"radius-profile-settings",label:r.a.createElement(i.c,{id:"SETTINGS_ADVANCED_RADIUS_PROFILE_FORM_SECTION_LABEL_RADIUS_SETTINGS"}),renderContent:()=>r.a.createElement(X,{authError:D,acctError:p})}],[p,D]),C=Object(_.useCallback)(()=>a(Object(d.b)({name:b.name,onConfirm:()=>a(Object(n.removeRadiusProfile)(b._id,b.name)).then(h())})),[a,h,b._id,b.name]);return r.a.createElement(S.b,{initialValues:b,isEdit:!0,isView:c,title:F,validationSchema:M.a,goBack:h,showBack:!0,onEscClicked:h,onSubmit:v,footerActiveOverride:!!(null==b?void 0:b._id),customFooterButtons:e=>(null==b?void 0:b._id)&&r.a.createElement(A.a,{disabled:e,type:"button",variant:"default",onClick:C},r.a.createElement(i.c,{id:"COMMON_ACTION_REMOVE"}))},r.a.createElement($,{items:P,openAccordions:u,setOpenAccordions:O}))});t.default=()=>Object(l.e)([Object(n.fetchRadiusProfiles)(void 0,{crudCacheStrategy:{type:c.a.CACHE}})],r.a.createElement(Y,null))},1954:function(e,t,a){"use strict";var _=a(0),r=a.n(_),n=a(1848),l=a(5);const c=(e,t)=>l.a`
  &-appear,
  &-enter {
    opacity: 0;
    display: flex !important;
    transform: translateY(-10px);
  }
  &-appear-active,
  &-enter-active {
    display: flex !important;
    ${e&&`flex-direction: ${e};`}
    ${t&&`padding: ${t};`}
    opacity: 1;
    transform: translateY(0px);
    transition: opacity 150ms ease-in-out, transform 300ms cubic-bezier(0.25, 0.1, 0.25, 1);
  }
  &-appear-done,
  &-enter-done {
    display: flex !important;
    ${e&&`flex-direction: ${e};`}
    ${t&&`padding: ${t};`}
    opacity: 1;
  }
  &-exit {
    display: flex !important;
    opacity: 0;
    height: 0;
    box-sizing: border-box;
    margin: 10px 0 0 !important;
    & > * {
      display: none;
    }
  }
  &-exit-active {
    display: flex !important;
    margin: 0 !important;
    transition: margin 300ms cubic-bezier(0.25, 0.1, 0.25, 1);
  }
  &-exit-done {
    display: none;
  }
`;t.a=r.a.memo(({timeout:e=300,in:t=!1,flexDirection:a,padding:l="0 0 32px",wrap:i=!1,children:E,...s})=>{const A=Object(_.useMemo)(()=>r.a.Children.map(E,(_,l)=>r.a.createElement(n.a,Object.assign({appear:t,in:t,timeout:e,classNames:c(a,void 0),mountOnEnter:!0},s),null===_?r.a.createElement("div",null):_)),[E,a,t,s,e]);return i?r.a.createElement(n.a,Object.assign({appear:t,in:t,timeout:e,classNames:c(a,l),mountOnEnter:!0},s),r.a.createElement("div",null,E)):r.a.createElement(r.a.Fragment,null,A)})},1956:function(e,t,a){(t=a(290)(!1)).push([e.i,"._2CK7bYrzA61VHROCpc-Pto{color:var(--status-text-color);display:inline-block;font-size:10px;text-transform:uppercase}._2SLoFfvH9hW4rKKuaiBtO3{color:#39cc64}.Kmd1jQ00VlOZksCfvtOd7{color:#f5a623}._1n1-pNdSId4IXjH2NBBqQK{color:#f03a3e}._2TJXw0jvp8-Udl2edpOPsF{color:#006fff}.CwnkZfqYILIlAcLwGpeP6{color:#c2c4ce}",""]),t.locals={ubntStatusText:"_2CK7bYrzA61VHROCpc-Pto","ubntStatusText--success":"_2SLoFfvH9hW4rKKuaiBtO3","ubntStatusText--warning":"Kmd1jQ00VlOZksCfvtOd7","ubntStatusText--danger":"_1n1-pNdSId4IXjH2NBBqQK","ubntStatusText--primary":"_2TJXw0jvp8-Udl2edpOPsF","ubntStatusText--neutral":"CwnkZfqYILIlAcLwGpeP6"},e.exports=t},1981:function(e,t,a){var _=a(289),r=a(1956);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var n={insert:"head",singleton:!1};_(r,n);e.exports=r.locals||{}}}]);