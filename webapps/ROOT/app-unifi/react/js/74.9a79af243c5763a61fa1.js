(window.webpackJsonpunifiNetworkUi=window.webpackJsonpunifiNetworkUi||[]).push([[74],{1792:function(e,t,a){"use strict";a.r(t);var n=a(0),E=a.n(n),r=a(31),c=a(8),i=a(393),l=a(28),_=a(64),o=a(2),T=a(2146);const s={};t.default=()=>{const{id:e}=Object(r.m)(),t=Object(c.useSelector)(i.selectRoutingData).find(t=>t._id===e),a=Object(_.g)();return Object(_.e)([Object(i.fetchRouting)(void 0,{crudCacheStrategy:{type:o.a.CACHE}}),Object(l.fetchNetworks)(void 0,{crudCacheStrategy:{type:o.a.CACHE}})],E.a.createElement(T.a,{initialValues:t||s,onBack:a}))}},1948:function(e,t,a){"use strict";var n=a(0),E=a.n(n),r=a(5),c=a(4),i=a(1949),l=a.n(i),_=a(1759),o=a(538),T=a(539);const s=Object(r.c)("span")`
  line-height: 1.5;
  margin-top: ${({theme:e})=>e.spacing["spacing-xxxxl"]};
`;t.a=({when:e,ignoredPaths:t=null,onLeave:a=null,onStay:r=null})=>{const i=Object(n.useMemo)(()=>({overlay:{"--modal-z-index":2e3}}),[]),u=Object(T.a)(t),S=Object(n.useCallback)((e,t)=>t.pathname!==e.pathname,[]),N=Object(n.useCallback)(e=>(e={},t={})=>u(e,t)&&S(e,t),[u,S]);return!!e&&E.a.createElement(l.a,{when:N(t)},({onCancel:e,onConfirm:t})=>E.a.createElement(_.a,{actions:[{type:"button",text:E.a.createElement(c.c,{id:"SETTINGS_MODAL_UNSAVED_CHANGES_STAY"}),onClick:()=>r?r(e):e()},{type:"button",text:E.a.createElement(c.c,{id:"SETTINGS_MODAL_UNSAVED_CHANGES_LEAVE"}),onClick:()=>a?a(t):t(),variant:"primary"}],isOpen:!0,size:"small",style:i,parentSelector:o.b,title:E.a.createElement(c.c,{id:"SETTINGS_MODAL_UNSAVED_CHANGES_TITLE"}),onRequestClose:()=>r?r(e):e()},E.a.createElement(s,null,E.a.createElement(c.c,{id:"SETTINGS_MODAL_UNSAVED_CHANGES_CONTENT"}))))}},2008:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"d",(function(){return c})),a.d(t,"c",(function(){return i})),a.d(t,"e",(function(){return l})),a.d(t,"a",(function(){return _}));var n=function(e){return e.toString().substring(1).split(/\/([^/]*)$/)},E=function(e,t){var a=n(e),E=a[0],r=a[1];return new RegExp(t.call(t,E),r)},r=function(e){return E(e,(function(e){var t="^"===e.substring(0,1),a="$"===e.substring(e.length-1);if(!t&&!a)throw new Error("Unable to modify - regex does not contain modifiers to remove");return e.substring(t?1:0,e.length-(a?1:0))}))},c=function(e){return n(e)[0]},i=function(e){return E(e,(function(e){if("^"===e.substring(0,1)||"$"===e.substring(e.length-1))throw new Error("Unable to modify - regex already contains one or more modifiers");return"^".concat(e,"$")}))},l=function(e,t){if(!Array.isArray(e)||e.length<2)throw new Error("Unable to combine - missing source regexes");var a=e.map((function(e){return"(".concat(n(e)[0],")")})).join("|");return new RegExp(a,t)},_=function(e,t,a,E){return new RegExp((e||"")+n(t)[0]+(a||""),E)}},2039:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(44),E=a(168),r=a(2008),c=a(98),i=Object(r.e)([c.j,c.m]),l=Object(n.a)((function(e){if("string"!=typeof e)return!1;if(!e.match(i))return!1;var t=new E.Address4(e);if(t.isValid())return t.correctForm()===t.startAddress().address;var a=new E.Address6(e);if(a.isValid()){var n=a.correctForm();return new E.Address6(n).startAddress().address===a.startAddress().address}return!1}))},2146:function(e,t,a){"use strict";var n=a(0),E=a.n(n),r=a(8),c=a(4),i=a(44),l=a(170),_=a(6),o=a(28),T=a(393),s=a(1945),u=a(464),S=a(21),N=a(95),m=a(64),d=a(18);var A=a(30),R=a(98),p=a(2039),I=a(2008),O=A.a.object().shape({name:A.a.string().label("SETTINGS_INTERNET_GENERAL_ADV_GW_STATIC_ROUTES_NAME").required(),enabled:A.a.boolean(),gateway_device:A.a.string().when(["gateway_type"],{is:e=>e===T.StaticRouteGatewayType.SWITCH,then:A.a.string().label("SETTINGS_INTERNET_GENERAL_ADV_GW_STATIC_ROUTES_L3_GATEWAY_DEVICE").required()}),"static-route_network":A.a.string().label("SETTINGS_INTERNET_GENERAL_ADV_GW_STATIC_ROUTES_NETWORK").required().test("networkSubnet",E.a.createElement(c.c,{id:"COMMON_VALIDATION_VALID_NETWORK_SUBNET"}),p.a),"static-route_distance":A.a.string().matches(/^([0-9][0-9]{0,1}|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/,E.a.createElement(c.c,{id:"COMMON_DESCRIPTION_NUMBER_BETWEEN",values:{min:0,max:255}})),"static-route_type":A.a.string(),"static-route_nexthop":A.a.string().when(["static-route_type"],{is:T.StaticRouteType.NEXT_HOP,then:A.a.string().label("SETTINGS_INTERNET_GENERAL_ADV_GW_STATIC_ROUTES_NEXT_HOP").required().matches(Object(I.e)([R.h,R.k]),E.a.createElement(c.c,{id:"COMMON_VALIDATION_VALID_IP"}))}),"static-route_interface":A.a.string()}),g=a(2151);const G=[o.NetworkPurpose.REMOTE_USER_VPN,o.NetworkPurpose.VLAN_ONLY,o.NetworkPurpose.WAN];var b=a(1753),y=a(1754),C=a(1924),h=a(1755),w=a(45),f=a(5),L=a(1954),D=a(54),V=a(76);const v=Object(f.c)(D.Field)`
  margin-right: ${({theme:e})=>e.spacing["spacing-s"]};
  white-space: nowrap;
  &:last-child {
    margin-right: ${({theme:e})=>e.spacing["spacing-xl"]};
  }
`;var W=Object(c.f)(({interfaces:e,intl:t})=>{const{initialValues:{_id:a},values:{gateway_type:n,"static-route_nexthop":i,"static-route_type":l},errors:{gateway_device:o}}=Object(w.e)(),s=/^fe80:/i.test(i),u=Object(r.useSelector)(_.selectAdoptedL3Switches).map(e=>({value:e.mac,label:Object(V.b)(e)})),S=u.length>0,N=n===T.StaticRouteGatewayType.DEFAULT,m=!!a;return E.a.createElement(b.a,null,E.a.createElement(y.a,null,E.a.createElement(C.a,{htmlFor:"enabled",alignWith:"toggleSmall",label:E.a.createElement(c.c,{id:"SETTINGS_INTERNET_GENERAL_ADV_GW_STATIC_ROUTES_ENABLE"})}),E.a.createElement(h.a,{column:!0},E.a.createElement(D.Field,{type:"checkbox",name:"enabled"}))),E.a.createElement(y.a,null,E.a.createElement(C.a,{htmlFor:"name",alignWith:"input",label:E.a.createElement(c.c,{id:"SETTINGS_INTERNET_GENERAL_ADV_GW_STATIC_ROUTES_NAME"})}),E.a.createElement(h.a,{column:!0},E.a.createElement(D.Field,{full:!0,name:"name",placeholder:"SETTINGS_INTERNET_GENERAL_ADV_GW_STATIC_ROUTES_NAME"}))),S&&E.a.createElement(E.a.Fragment,null,E.a.createElement(y.a,{disabled:m},E.a.createElement(C.a,{htmlFor:"gateway_type",alignWith:"input",label:E.a.createElement(c.c,{id:"SETTINGS_INTERNET_GENERAL_ADV_GW_STATIC_ROUTES_DEVICE_TYPE"})}),E.a.createElement(h.a,null,E.a.createElement(v,{value:T.StaticRouteGatewayType.DEFAULT,type:"togglebox",toggleboxType:"radio",name:"gateway_type",disabled:m},E.a.createElement(c.c,{id:"SETTINGS_INTERNET_GENERAL_ADV_GW_STATIC_ROUTES_DEVICE_TYPE_GATEWAY"})),E.a.createElement(v,{value:T.StaticRouteGatewayType.SWITCH,type:"togglebox",toggleboxType:"radio",name:"gateway_type",disabled:m},E.a.createElement(c.c,{id:"SETTINGS_INTERNET_GENERAL_ADV_GW_STATIC_ROUTES_DEVICE_TYPE_SWITCH"})))),!N&&E.a.createElement(y.a,null,E.a.createElement(C.a,{htmlFor:"gateway_device",alignWith:"dropdown",label:E.a.createElement(c.c,{id:"SETTINGS_INTERNET_GENERAL_ADV_GW_STATIC_ROUTES_SELECT_GATEWAY"})}),E.a.createElement(h.a,{column:!0},E.a.createElement(D.Field,{full:!0,type:"dropdown",name:"gateway_device",options:u,placeholder:t.formatMessage({id:"COMMON_CHOOSE_AN_OPTION"})}),o&&E.a.createElement(D.ValidationMessage,{visible:!0},o)))),N&&E.a.createElement(y.a,null,E.a.createElement(C.a,{htmlFor:"static-route_distance",alignWith:"input",label:E.a.createElement(c.c,{id:"SETTINGS_INTERNET_GENERAL_ADV_GW_STATIC_ROUTES_DISTANCE"})}),E.a.createElement(h.a,{column:!0},E.a.createElement(D.Field,{full:!0,name:"static-route_distance",placeholder:"SETTINGS_INTERNET_GENERAL_ADV_GW_STATIC_ROUTES_DISTANCE_PLACEHOLDER"}))),E.a.createElement(y.a,null,E.a.createElement(C.a,{htmlFor:"static-route_network",alignWith:"input",label:E.a.createElement(c.c,{id:"SETTINGS_INTERNET_GENERAL_ADV_GW_STATIC_ROUTES_NETWORK"})}),E.a.createElement(h.a,{column:!0},E.a.createElement(D.Field,{full:!0,name:"static-route_network",placeholder:"SETTINGS_INTERNET_GENERAL_ADV_GW_STATIC_ROUTES_NETWORK_PLACEHOLDER"}))),E.a.createElement(y.a,null,E.a.createElement(C.a,{htmlFor:"static-route_type",alignWith:"dropdown",label:E.a.createElement(c.c,{id:"SETTINGS_INTERNET_GENERAL_ADV_GW_STATIC_ROUTES_ROUTE_TYPE"})}),E.a.createElement(h.a,null,E.a.createElement(v,{value:T.StaticRouteType.NEXT_HOP,type:"togglebox",toggleboxType:"radio",name:"static-route_type"},E.a.createElement(c.c,{id:"SETTINGS_INTERNET_GENERAL_ADV_GW_STATIC_ROUTES_NEXT_HOP"})),E.a.createElement(v,{value:T.StaticRouteType.INTERFACE,type:"togglebox",toggleboxType:"radio",name:"static-route_type"},E.a.createElement(c.c,{id:"SETTINGS_INTERNET_GENERAL_ADV_GW_STATIC_ROUTES_INTERFACE"})),E.a.createElement(v,{value:T.StaticRouteType.BLACK_HOLE,type:"togglebox",toggleboxType:"radio",name:"static-route_type"},E.a.createElement(c.c,{id:"SETTINGS_INTERNET_GENERAL_ADV_GW_STATIC_ROUTES_BLACK_HOLE"})))),E.a.createElement(L.a,{in:l===T.StaticRouteType.NEXT_HOP||l===T.StaticRouteType.INTERFACE||s,wrap:!0},l===T.StaticRouteType.NEXT_HOP&&E.a.createElement(y.a,null,E.a.createElement(C.a,{htmlFor:"static-route_nexthop",alignWith:"input",label:E.a.createElement(c.c,{id:"SETTINGS_INTERNET_GENERAL_ADV_GW_STATIC_ROUTES_NEXT_HOP"})}),E.a.createElement(h.a,{column:!0},E.a.createElement(D.Field,{full:!0,name:"static-route_nexthop",placeholder:"SETTINGS_INTERNET_GENERAL_ADV_GW_STATIC_ROUTES_NEXT_HOP_PLACEHOLDER"}))),(l===T.StaticRouteType.INTERFACE||s)&&E.a.createElement(y.a,null,E.a.createElement(C.a,{htmlFor:"static-route_interface",alignWith:"dropdown",label:E.a.createElement(c.c,{id:"SETTINGS_INTERNET_GENERAL_ADV_GW_STATIC_ROUTES_INTERFACE"})}),E.a.createElement(h.a,{column:!0},E.a.createElement(D.Field,{full:!0,type:"dropdown",name:"static-route_interface",options:e})))))});const U=Object(i.a)((e,t)=>({...{name:"",enabled:!0,gateway_device:"",gateway_type:T.StaticRouteGatewayType.DEFAULT,"static-route_network":"","static-route_distance":"","static-route_type":T.StaticRouteType.NEXT_HOP,"static-route_nexthop":"","static-route_interface":t.length?t[0].value:""},...e}));t.a=e=>{const{initialValues:t,onBack:a}=e,i=Object(r.useSelector)(o.selectNetworksData),A=Object(r.useSelector)(_.selectGatewayMac),R=Object(r.useDispatch)(),p=Object(n.useContext)(N.l),I=Object(n.useCallback)((e,{setSubmitting:t})=>{const n={...e,"static-route_nexthop":e["static-route_type"]===T.StaticRouteType.NEXT_HOP?e["static-route_nexthop"]:void 0,"static-route_interface":e["static-route_type"]===T.StaticRouteType.INTERFACE?e["static-route_interface"]:void 0};return n.gateway_type===T.StaticRouteGatewayType.SWITCH&&delete n["static-route_distance"],n.gateway_type===T.StaticRouteGatewayType.DEFAULT&&(n.gateway_device=A),R(Object(T.saveRouting)({...n,type:"static-route"})).then(()=>{R(Object(S.c)({icon:d.a.success,message:"SETTINGS_GENERAL_SAVE_SUCCESS"})),a()}).catch(e=>{R(Object(S.c)({errorMessage:e.msg,errorValues:e,icon:d.a.danger,message:"SETTINGS_GENERAL_SAVE_ERROR"})),t(!1)})},[R,a]),b=(e=>[...Object(g.b)(e).map(e=>({label:e,value:e})),...(e||[]).filter(e=>!G.includes(e.purpose)).map(({_id:e,name:t})=>({label:t,value:e}))])(i),y=!!t._id,C=Object(m.m)({component:E.a.createElement(c.c,{id:"SETTINGS_INTERNET_GENERAL_ADV_GW_STATIC_ROUTES"}),message:"SETTINGS_INTERNET_GENERAL_ADV_GW_STATIC_ROUTES"},p?"SETTINGS_INTERNET_GENERAL_ADV_GW_STATIC_ROUTES_VIEW":"SETTINGS_INTERNET_GENERAL_ADV_GW_STATIC_ROUTES_EDIT",t._id?t.name:void 0),h=Object(n.useCallback)(()=>{R(Object(u.b)({name:t.name,onConfirm:()=>R(Object(T.removeRouting)(t)).then(a())}))},[R,t,a]);return E.a.createElement(s.b,{onSubmit:I,title:C,initialValues:U(t,b),isEdit:y,isView:p,onEscClicked:a,validationSchema:O,showBack:!0,goBack:a,footerActiveOverride:!!(null==t?void 0:t._id),customFooterButtons:e=>(null==t?void 0:t._id)&&E.a.createElement(l.a,{disabled:e,type:"button",variant:"default",onClick:h},E.a.createElement(c.c,{id:"COMMON_ACTION_REMOVE"}))},E.a.createElement(W,{interfaces:b}))}}}]);